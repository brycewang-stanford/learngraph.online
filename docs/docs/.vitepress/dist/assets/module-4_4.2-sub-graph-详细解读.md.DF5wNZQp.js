import{_ as i,c as a,o as n,ag as l}from"./chunks/framework.Cf3FQAeg.js";const g=JSON.parse('{"title":"LangGraph å­å›¾ï¼ˆSub-graphï¼‰è¯¦ç»†è§£è¯»","description":"","frontmatter":{},"headers":[],"relativePath":"module-4/4.2-sub-graph-è¯¦ç»†è§£è¯».md","filePath":"module-4/4.2-sub-graph-è¯¦ç»†è§£è¯».md","lastUpdated":1760223716000}'),p={name:"module-4/4.2-sub-graph-è¯¦ç»†è§£è¯».md"};function e(t,s,h,k,r,d){return n(),a("div",null,[...s[0]||(s[0]=[l(`<h1 id="langgraph-å­å›¾-sub-graph-è¯¦ç»†è§£è¯»" tabindex="-1">LangGraph å­å›¾ï¼ˆSub-graphï¼‰è¯¦ç»†è§£è¯» <a class="header-anchor" href="#langgraph-å­å›¾-sub-graph-è¯¦ç»†è§£è¯»" aria-label="Permalink to &quot;LangGraph å­å›¾ï¼ˆSub-graphï¼‰è¯¦ç»†è§£è¯»&quot;">â€‹</a></h1><h2 id="ğŸ“‹-æ¡ˆä¾‹æ¦‚è§ˆ" tabindex="-1">ğŸ“‹ æ¡ˆä¾‹æ¦‚è§ˆ <a class="header-anchor" href="#ğŸ“‹-æ¡ˆä¾‹æ¦‚è§ˆ" aria-label="Permalink to &quot;ğŸ“‹ æ¡ˆä¾‹æ¦‚è§ˆ&quot;">â€‹</a></h2><p>è¿™ä¸ªæ¡ˆä¾‹å±•ç¤ºäº† LangGraph ä¸­**å­å›¾ï¼ˆSub-graphï¼‰**çš„æ ¸å¿ƒæ¦‚å¿µå’Œä½¿ç”¨æ–¹æ³•ã€‚è™½ç„¶ä»£ç ç›¸å¯¹ç®€å•ï¼Œä½†å®ƒæ­ç¤ºäº†ä¸€ä¸ªéå¸¸é‡è¦çš„æ¶æ„æ¨¡å¼ï¼š<strong>å¦‚ä½•åœ¨å¤æ‚ç³»ç»Ÿä¸­ç®¡ç†ä¸åŒçš„çŠ¶æ€ç©ºé—´</strong>ã€‚</p><h3 id="ä¸šåŠ¡åœºæ™¯" tabindex="-1">ä¸šåŠ¡åœºæ™¯ <a class="header-anchor" href="#ä¸šåŠ¡åœºæ™¯" aria-label="Permalink to &quot;ä¸šåŠ¡åœºæ™¯&quot;">â€‹</a></h3><p>æƒ³è±¡ä½ åœ¨è¿è¥ä¸€ä¸ªé—®ç­”ç³»ç»Ÿï¼Œéœ€è¦å®šæœŸåˆ†æç”¨æˆ·æ—¥å¿—ï¼š</p><ol><li><strong>æ—¥å¿—æ¸…æ´—</strong>ï¼šåŸå§‹æ—¥å¿—éœ€è¦é¢„å¤„ç†</li><li><strong>å¤±è´¥åˆ†æ</strong>ï¼šæ‰¾å‡ºå›ç­”è´¨é‡å·®çš„è®°å½•ï¼Œç”Ÿæˆæ”¹è¿›æŠ¥å‘Š</li><li><strong>é—®é¢˜æ€»ç»“</strong>ï¼šåˆ†æç”¨æˆ·æœ€å…³å¿ƒçš„ä¸»é¢˜ï¼Œå‘é€åˆ° Slack é€šçŸ¥å›¢é˜Ÿ</li></ol><h3 id="æ ¸å¿ƒæŒ‘æˆ˜" tabindex="-1">æ ¸å¿ƒæŒ‘æˆ˜ <a class="header-anchor" href="#æ ¸å¿ƒæŒ‘æˆ˜" aria-label="Permalink to &quot;æ ¸å¿ƒæŒ‘æˆ˜&quot;">â€‹</a></h3><p>è¿™ä¸¤ä¸ªåˆ†æä»»åŠ¡ï¼ˆå¤±è´¥åˆ†æ &amp; é—®é¢˜æ€»ç»“ï¼‰éœ€è¦ï¼š</p><ul><li><strong>å¹¶è¡Œæ‰§è¡Œ</strong>ä»¥æé«˜æ•ˆç‡</li><li><strong>ç‹¬ç«‹çš„çŠ¶æ€ç©ºé—´</strong>ï¼ˆå„è‡ªæœ‰ä¸åŒçš„ä¸­é—´å˜é‡ï¼‰</li><li><strong>å…±äº«è¾“å…¥æ•°æ®</strong>ï¼ˆéƒ½éœ€è¦è®¿é—®æ¸…æ´—åçš„æ—¥å¿—ï¼‰</li><li><strong>æ±‡æ€»è¾“å‡ºç»“æœ</strong>åˆ°ä¸»å›¾</li></ul><p><strong>å­å›¾æ­£æ˜¯è§£å†³è¿™ä¸ªé—®é¢˜çš„æœ€ä½³æ–¹æ¡ˆï¼</strong></p><hr><h2 id="ğŸ—ºï¸-æ•´ä½“æ¶æ„å›¾" tabindex="-1">ğŸ—ºï¸ æ•´ä½“æ¶æ„å›¾ <a class="header-anchor" href="#ğŸ—ºï¸-æ•´ä½“æ¶æ„å›¾" aria-label="Permalink to &quot;ğŸ—ºï¸ æ•´ä½“æ¶æ„å›¾&quot;">â€‹</a></h2><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>ç”¨æˆ·è¾“å…¥åŸå§‹æ—¥å¿—ï¼ˆraw_logsï¼‰</span></span>
<span class="line"><span>         â†“</span></span>
<span class="line"><span>    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span></span>
<span class="line"><span>    â”‚clean_logsâ”‚  æ¸…æ´—æ—¥å¿—</span></span>
<span class="line"><span>    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span></span>
<span class="line"><span>         â†“ cleaned_logsï¼ˆå…±äº«æ•°æ®ï¼‰</span></span>
<span class="line"><span>    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”</span></span>
<span class="line"><span>    â†“         â†“</span></span>
<span class="line"><span>â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”</span></span>
<span class="line"><span>â”‚å¤±è´¥åˆ†æâ”‚  â”‚é—®é¢˜æ€»ç»“â”‚  ï¼ˆä¸¤ä¸ªç‹¬ç«‹å­å›¾å¹¶è¡Œè¿è¡Œï¼‰</span></span>
<span class="line"><span>â”‚å­å›¾   â”‚  â”‚å­å›¾   â”‚</span></span>
<span class="line"><span>â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜</span></span>
<span class="line"><span>    â†“         â†“</span></span>
<span class="line"><span>fa_summary  report</span></span>
<span class="line"><span>    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜</span></span>
<span class="line"><span>         â†“</span></span>
<span class="line"><span>     æœ€ç»ˆç»“æœæ±‡æ€»</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><hr><h2 id="ğŸ“š-ä»£ç åˆ†æ®µè¯¦è§£" tabindex="-1">ğŸ“š ä»£ç åˆ†æ®µè¯¦è§£ <a class="header-anchor" href="#ğŸ“š-ä»£ç åˆ†æ®µè¯¦è§£" aria-label="Permalink to &quot;ğŸ“š ä»£ç åˆ†æ®µè¯¦è§£&quot;">â€‹</a></h2><h3 id="ç¬¬ä¸€éƒ¨åˆ†-å®šä¹‰æ•°æ®ç»“æ„" tabindex="-1">ç¬¬ä¸€éƒ¨åˆ†ï¼šå®šä¹‰æ•°æ®ç»“æ„ <a class="header-anchor" href="#ç¬¬ä¸€éƒ¨åˆ†-å®šä¹‰æ•°æ®ç»“æ„" aria-label="Permalink to &quot;ç¬¬ä¸€éƒ¨åˆ†ï¼šå®šä¹‰æ•°æ®ç»“æ„&quot;">â€‹</a></h3><h4 id="log-æ•°æ®æ¨¡å‹" tabindex="-1">Log æ•°æ®æ¨¡å‹ <a class="header-anchor" href="#log-æ•°æ®æ¨¡å‹" aria-label="Permalink to &quot;Log æ•°æ®æ¨¡å‹&quot;">â€‹</a></h4><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> typing_extensions </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> TypedDict</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> typing </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> List, Optional</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TypedDict</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">              # æ—¥å¿— ID</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    question: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # ç”¨æˆ·é—®é¢˜</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    docs: Optional[List] </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ£€ç´¢åˆ°çš„æ–‡æ¡£ï¼ˆå¯é€‰ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    answer: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          # ç³»ç»Ÿå›ç­”</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    grade: Optional[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è´¨é‡è¯„åˆ†ï¼ˆå¯é€‰ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    grader: Optional[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è¯„åˆ†å™¨åç§°ï¼ˆå¯é€‰ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    feedback: Optional[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åé¦ˆä¿¡æ¯ï¼ˆå¯é€‰ï¼‰</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><strong>Python çŸ¥è¯†ç‚¹</strong>ï¼š</p><ol><li><p><strong>TypedDict</strong>ï¼šè¿™æ˜¯ Python 3.8+ å¼•å…¥çš„ç±»å‹ï¼Œç”¨äºå®šä¹‰å­—å…¸çš„ç»“æ„</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ™®é€šå­—å…¸ - ä¸çŸ¥é“æœ‰å“ªäº›é”®</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">log1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;question&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;xxx&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># TypedDict - æ˜ç¡®å®šä¹‰äº†é”®å’Œç±»å‹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">log2: Log </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;question&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;xxx&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li><li><p><strong>Optional[ç±»å‹]</strong>ï¼šè¡¨ç¤ºè¿™ä¸ªå­—æ®µå¯ä»¥æ˜¯æŒ‡å®šç±»å‹ï¼Œä¹Ÿå¯ä»¥æ˜¯ <code>None</code></p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">grade: Optional[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ç­‰ä»·äº grade: int | None</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li></ol><p><strong>ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡ï¼Ÿ</strong></p><ul><li>å¹¶éæ‰€æœ‰æ—¥å¿—éƒ½æœ‰è¯„åˆ†ï¼ˆgradeï¼‰ï¼Œåªæœ‰è¢«è¯„ä¼°è¿‡çš„æ‰æœ‰</li><li>è¿™ç§çµæ´»çš„æ•°æ®ç»“æ„é€‚é…å®é™…ä¸šåŠ¡åœºæ™¯</li></ul><hr><h3 id="ç¬¬äºŒéƒ¨åˆ†-å¤±è´¥åˆ†æå­å›¾" tabindex="-1">ç¬¬äºŒéƒ¨åˆ†ï¼šå¤±è´¥åˆ†æå­å›¾ <a class="header-anchor" href="#ç¬¬äºŒéƒ¨åˆ†-å¤±è´¥åˆ†æå­å›¾" aria-label="Permalink to &quot;ç¬¬äºŒéƒ¨åˆ†ï¼šå¤±è´¥åˆ†æå­å›¾&quot;">â€‹</a></h3><h4 id="çŠ¶æ€å®šä¹‰" tabindex="-1">çŠ¶æ€å®šä¹‰ <a class="header-anchor" href="#çŠ¶æ€å®šä¹‰" aria-label="Permalink to &quot;çŠ¶æ€å®šä¹‰&quot;">â€‹</a></h4><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å­å›¾å†…éƒ¨çŠ¶æ€ï¼ˆå®Œæ•´çŠ¶æ€ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> FailureAnalysisState</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TypedDict</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    cleaned_logs: List[Log]   </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è¾“å…¥ï¼šæ¸…æ´—åçš„æ—¥å¿—</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    failures: List[Log]       </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ä¸­é—´å˜é‡ï¼šå¤±è´¥çš„æ—¥å¿—</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    fa_summary: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">           # è¾“å‡ºï¼šå¤±è´¥åˆ†ææ‘˜è¦</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    processed_logs: List[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è¾“å‡ºï¼šå¤„ç†è¿‡çš„æ—¥å¿— ID</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å­å›¾è¾“å‡ºçŠ¶æ€ï¼ˆåªåŒ…å«éœ€è¦è¿”å›ç»™ä¸»å›¾çš„å­—æ®µï¼‰</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> FailureAnalysisOutputState</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TypedDict</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    fa_summary: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">           # åªè¾“å‡ºæ‘˜è¦</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    processed_logs: List[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åªè¾“å‡ºå¤„ç†è®°å½•</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><strong>å…³é”®æ¦‚å¿µ</strong>ï¼šä¸ºä»€ä¹ˆéœ€è¦ä¸¤ä¸ªçŠ¶æ€ï¼Ÿ</p><ol><li><p><strong>å†…éƒ¨çŠ¶æ€ï¼ˆFailureAnalysisStateï¼‰</strong>ï¼š</p><ul><li>åŒ…å«æ‰€æœ‰ä¸­é—´å˜é‡ï¼ˆå¦‚ <code>failures</code>ï¼‰</li><li>ç”¨äºå­å›¾å†…éƒ¨èŠ‚ç‚¹ä¹‹é—´ä¼ é€’æ•°æ®</li></ul></li><li><p><strong>è¾“å‡ºçŠ¶æ€ï¼ˆFailureAnalysisOutputStateï¼‰</strong>ï¼š</p><ul><li>åªåŒ…å«éœ€è¦è¿”å›ç»™ä¸»å›¾çš„å­—æ®µ</li><li>é¿å…ä¸å¿…è¦çš„æ•°æ®ä¼ é€’</li><li>å‡å°‘çŠ¶æ€å†²çªçš„å¯èƒ½æ€§</li></ul></li></ol><p><strong>ç±»æ¯”</strong>ï¼š</p><ul><li>å†…éƒ¨çŠ¶æ€ = å¨æˆ¿é‡Œçš„æ‰€æœ‰å·¥å…·å’ŒåŸæ–™</li><li>è¾“å‡ºçŠ¶æ€ = ç«¯ç»™å®¢äººçš„æˆå“èœè‚´</li></ul><hr><h4 id="èŠ‚ç‚¹å‡½æ•°" tabindex="-1">èŠ‚ç‚¹å‡½æ•° <a class="header-anchor" href="#èŠ‚ç‚¹å‡½æ•°" aria-label="Permalink to &quot;èŠ‚ç‚¹å‡½æ•°&quot;">â€‹</a></h4><p><strong>1. get_failures - è¿‡æ»¤å¤±è´¥æ—¥å¿—</strong></p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> get_failures</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state):</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot; è·å–åŒ…å«å¤±è´¥è®°å½•çš„æ—¥å¿— &quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    cleaned_logs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> state[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;cleaned_logs&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # ç­›é€‰å‡ºæœ‰ grade å­—æ®µçš„æ—¥å¿—ï¼ˆè¡¨ç¤ºè¢«è¯„åˆ†è¿‡ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    failures </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [log </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> log </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> cleaned_logs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;grade&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> log]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;failures&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: failures}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><strong>Python çŸ¥è¯†ç‚¹ - åˆ—è¡¨æ¨å¯¼å¼</strong>ï¼š</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ä¼ ç»Ÿå†™æ³•</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">failures </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> []</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> log </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> cleaned_logs:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;grade&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> log:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        failures.append(log)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åˆ—è¡¨æ¨å¯¼å¼ï¼ˆæ›´ç®€æ´ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">failures </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [log </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> log </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> cleaned_logs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;grade&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> log]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><strong>ä¸šåŠ¡é€»è¾‘</strong>ï¼š</p><ul><li>åªæœ‰è¢«è¯„ä¼°è¿‡çš„æ—¥å¿—æ‰æœ‰ <code>grade</code> å­—æ®µ</li><li>è¿™äº›æ—¥å¿—é€šå¸¸æ˜¯å› ä¸ºè´¨é‡é—®é¢˜éœ€è¦äººå·¥å®¡æ ¸çš„</li></ul><hr><p><strong>2. generate_summary - ç”Ÿæˆæ‘˜è¦</strong></p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> generate_summary</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state):</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot; ç”Ÿæˆå¤±è´¥åˆ†ææ‘˜è¦ &quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    failures </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> state[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;failures&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # å®é™…åº”ç”¨ä¸­ï¼Œè¿™é‡Œä¼šè°ƒç”¨ LLM åˆ†æå¤±è´¥åŸå› </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # fa_summary = summarize_with_llm(failures)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    fa_summary </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Poor quality retrieval of Chroma documentation.&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # è®°å½•å¤„ç†è¿‡çš„æ—¥å¿— ID</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    processed_logs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;failure-analysis-on-log-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">failure[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;id&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> failure </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> failures</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;fa_summary&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: fa_summary,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;processed_logs&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: processed_logs</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p><strong>æŠ€æœ¯ç»†èŠ‚</strong>ï¼š</p><ol><li><p><strong>f-string æ ¼å¼åŒ–å­—ç¬¦ä¸²</strong>ï¼ˆPython 3.6+ï¼‰ï¼š</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">failure_id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;123&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ä¼ ç»Ÿæ–¹å¼</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">msg </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;failure-analysis-on-log-&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> failure_id</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># f-stringï¼ˆæ›´ç›´è§‚ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">msg </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;failure-analysis-on-log-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">failure_id</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li><li><p><strong>processed_logs çš„ä½œç”¨</strong>ï¼š</p><ul><li>è¿½è¸ªå“ªäº›æ—¥å¿—è¢«å¤„ç†è¿‡</li><li>ç”¨äºå®¡è®¡å’Œè°ƒè¯•</li><li>ä¸»å›¾ä¼šæ”¶é›†æ‰€æœ‰å­å›¾çš„å¤„ç†è®°å½•</li></ul></li></ol><hr><h4 id="æ„å»ºå­å›¾" tabindex="-1">æ„å»ºå­å›¾ <a class="header-anchor" href="#æ„å»ºå­å›¾" aria-label="Permalink to &quot;æ„å»ºå­å›¾&quot;">â€‹</a></h4><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langgraph.graph </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> StateGraph, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">START</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">END</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">fa_builder </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> StateGraph(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    state_schema</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">FailureAnalysisState,        </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å†…éƒ¨çŠ¶æ€</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    output_schema</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">FailureAnalysisOutputState  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è¾“å‡ºçŠ¶æ€</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ·»åŠ èŠ‚ç‚¹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">fa_builder.add_node(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;get_failures&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, get_failures)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">fa_builder.add_node(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;generate_summary&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, generate_summary)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ·»åŠ è¾¹ï¼ˆå®šä¹‰æ‰§è¡Œé¡ºåºï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">fa_builder.add_edge(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">START</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;get_failures&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">fa_builder.add_edge(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;get_failures&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;generate_summary&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">fa_builder.add_edge(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;generate_summary&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">END</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p><strong>æ‰§è¡Œæµç¨‹</strong>ï¼š</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>START â†’ get_failures â†’ generate_summary â†’ END</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><strong>LangGraph æ¦‚å¿µ</strong>ï¼š</p><ul><li><code>START</code>ï¼šç‰¹æ®ŠèŠ‚ç‚¹ï¼Œè¡¨ç¤ºå›¾çš„å…¥å£</li><li><code>END</code>ï¼šç‰¹æ®ŠèŠ‚ç‚¹ï¼Œè¡¨ç¤ºå›¾çš„å‡ºå£</li><li><code>add_edge(A, B)</code>ï¼šä»èŠ‚ç‚¹ A åˆ°èŠ‚ç‚¹ B çš„æœ‰å‘è¾¹</li></ul><hr><h3 id="ç¬¬ä¸‰éƒ¨åˆ†-é—®é¢˜æ€»ç»“å­å›¾" tabindex="-1">ç¬¬ä¸‰éƒ¨åˆ†ï¼šé—®é¢˜æ€»ç»“å­å›¾ <a class="header-anchor" href="#ç¬¬ä¸‰éƒ¨åˆ†-é—®é¢˜æ€»ç»“å­å›¾" aria-label="Permalink to &quot;ç¬¬ä¸‰éƒ¨åˆ†ï¼šé—®é¢˜æ€»ç»“å­å›¾&quot;">â€‹</a></h3><h4 id="çŠ¶æ€å®šä¹‰-1" tabindex="-1">çŠ¶æ€å®šä¹‰ <a class="header-anchor" href="#çŠ¶æ€å®šä¹‰-1" aria-label="Permalink to &quot;çŠ¶æ€å®šä¹‰&quot;">â€‹</a></h4><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å†…éƒ¨çŠ¶æ€</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> QuestionSummarizationState</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TypedDict</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    cleaned_logs: List[Log]   </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è¾“å…¥</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    qs_summary: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">           # ä¸­é—´å˜é‡ï¼šé—®é¢˜æ‘˜è¦</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    report: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">               # è¾“å‡ºï¼šæœ€ç»ˆæŠ¥å‘Š</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    processed_logs: List[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è¾“å‡ºï¼šå¤„ç†è®°å½•</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è¾“å‡ºçŠ¶æ€</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> QuestionSummarizationOutputState</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TypedDict</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    report: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">               # åªè¾“å‡ºæŠ¥å‘Š</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    processed_logs: List[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åªè¾“å‡ºå¤„ç†è®°å½•</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><strong>æ³¨æ„</strong>ï¼š<code>qs_summary</code> æ˜¯ä¸­é—´å˜é‡ï¼Œä¸éœ€è¦è¿”å›ç»™ä¸»å›¾</p><hr><h4 id="èŠ‚ç‚¹å‡½æ•°-1" tabindex="-1">èŠ‚ç‚¹å‡½æ•° <a class="header-anchor" href="#èŠ‚ç‚¹å‡½æ•°-1" aria-label="Permalink to &quot;èŠ‚ç‚¹å‡½æ•°&quot;">â€‹</a></h4><p><strong>1. generate_summary - ç”Ÿæˆé—®é¢˜æ‘˜è¦</strong></p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> generate_summary</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    cleaned_logs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> state[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;cleaned_logs&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # å®é™…ä¼šè°ƒç”¨ LLM åˆ†æç”¨æˆ·é—®é¢˜çš„ä¸»é¢˜</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    summary </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Questions focused on usage of ChatOllama and Chroma vector store.&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # è®°å½•å¤„ç†çš„æ—¥å¿—</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    processed_logs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;summary-on-log-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">log[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;id&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> log </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> cleaned_logs</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;qs_summary&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: summary,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;processed_logs&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: processed_logs</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><hr><p><strong>2. send_to_slack - å‘é€æŠ¥å‘Š</strong></p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> send_to_slack</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    qs_summary </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> state[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;qs_summary&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # å®é™…ä¼šåŸºäºæ‘˜è¦ç”Ÿæˆå®Œæ•´æŠ¥å‘Šå¹¶å‘é€åˆ° Slack</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # report = generate_report(qs_summary)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # send_to_slack_api(report)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    report </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;foo bar baz&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;report&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: report}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><strong>ä¸šåŠ¡æµç¨‹</strong>ï¼š</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>æ¸…æ´—æ—¥å¿— â†’ ç”Ÿæˆæ‘˜è¦ â†’ æ ¼å¼åŒ–æŠ¥å‘Š â†’ å‘é€åˆ° Slack</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><hr><h4 id="æ„å»ºå­å›¾-1" tabindex="-1">æ„å»ºå­å›¾ <a class="header-anchor" href="#æ„å»ºå­å›¾-1" aria-label="Permalink to &quot;æ„å»ºå­å›¾&quot;">â€‹</a></h4><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">qs_builder </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> StateGraph(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    QuestionSummarizationState,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    output_schema</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">QuestionSummarizationOutputState</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">qs_builder.add_node(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;generate_summary&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, generate_summary)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">qs_builder.add_node(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;send_to_slack&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, send_to_slack)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">qs_builder.add_edge(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">START</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;generate_summary&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">qs_builder.add_edge(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;generate_summary&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;send_to_slack&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">qs_builder.add_edge(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;send_to_slack&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">END</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><hr><h3 id="ç¬¬å››éƒ¨åˆ†-ä¸»å›¾-æ•´åˆå­å›¾" tabindex="-1">ç¬¬å››éƒ¨åˆ†ï¼šä¸»å›¾ - æ•´åˆå­å›¾ <a class="header-anchor" href="#ç¬¬å››éƒ¨åˆ†-ä¸»å›¾-æ•´åˆå­å›¾" aria-label="Permalink to &quot;ç¬¬å››éƒ¨åˆ†ï¼šä¸»å›¾ - æ•´åˆå­å›¾&quot;">â€‹</a></h3><h4 id="ä¸»å›¾çŠ¶æ€" tabindex="-1">ä¸»å›¾çŠ¶æ€ <a class="header-anchor" href="#ä¸»å›¾çŠ¶æ€" aria-label="Permalink to &quot;ä¸»å›¾çŠ¶æ€&quot;">â€‹</a></h4><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> operator </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> add</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> typing </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Annotated</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> EntryGraphState</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TypedDict</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    raw_logs: List[Log]                      </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è¾“å…¥ï¼šåŸå§‹æ—¥å¿—</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    cleaned_logs: List[Log]                  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ¸…æ´—åçš„æ—¥å¿—</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    fa_summary: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                          # æ¥è‡ªå¤±è´¥åˆ†æå­å›¾</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    report: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                              # æ¥è‡ªé—®é¢˜æ€»ç»“å­å›¾</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    processed_logs: Annotated[List[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">], add] </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ¥è‡ªä¸¤ä¸ªå­å›¾ï¼Œéœ€è¦åˆå¹¶</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><strong>æ ¸å¿ƒæŠ€æœ¯ç‚¹ - Annotated å’Œ Reducer</strong>ï¼š</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">processed_logs: Annotated[List[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">], add]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>è¿™è¡Œä»£ç åŒ…å«äº†ä¸‰ä¸ªé‡è¦æ¦‚å¿µï¼š</p><ol><li><p><strong>Annotated</strong>ï¼šPython 3.9+ çš„ç±»å‹æ³¨è§£å¢å¼ºå·¥å…·</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> typing </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Annotated</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åŸºæœ¬ç±»å‹æ³¨è§£</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">name: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å¸¦é¢å¤–å…ƒæ•°æ®çš„æ³¨è§£</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">age: Annotated[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;must be positive&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li><li><p><strong>Reducerï¼ˆåˆå¹¶å™¨ï¼‰</strong>ï¼š<code>add</code> æ¥è‡ª <code>operator</code> æ¨¡å—</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> operator </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> add</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># add çš„ä½œç”¨æ˜¯åˆå¹¶åˆ—è¡¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> add([</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">], [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ç»“æœï¼š[1, 2, 3, 4]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li><li><p><strong>ä¸ºä»€ä¹ˆéœ€è¦ Reducerï¼Ÿ</strong></p><p>å› ä¸ºä¸¤ä¸ªå­å›¾<strong>å¹¶è¡Œè¿è¡Œ</strong>ï¼Œéƒ½ä¼šè¿”å› <code>processed_logs</code>ï¼š</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å¤±è´¥åˆ†æå­å›¾è¿”å›</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;processed_logs&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;failure-analysis-on-log-2&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># é—®é¢˜æ€»ç»“å­å›¾è¿”å›</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;processed_logs&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;summary-on-log-1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;summary-on-log-2&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># LangGraph éœ€è¦çŸ¥é“å¦‚ä½•åˆå¹¶è¿™ä¸¤ä¸ªç»“æœ</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ä½¿ç”¨ add åï¼š</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;processed_logs&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;failure-analysis-on-log-2&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;summary-on-log-1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;summary-on-log-2&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div></li></ol><p><strong>å¸¸è§çš„ Reducer</strong>ï¼š</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> operator </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> add</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åˆ—è¡¨åˆå¹¶</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Annotated[List[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">], add]  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># [1, 2] + [3] = [1, 2, 3]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è‡ªå®šä¹‰ Reducer</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> merge_dicts</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(a, b):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">**</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">a, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">**</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">b}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Annotated[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">dict</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, merge_dicts]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><hr><h4 id="ä¸ºä»€ä¹ˆ-cleaned-logs-ä¸éœ€è¦-reducer" tabindex="-1">ä¸ºä»€ä¹ˆ cleaned_logs ä¸éœ€è¦ Reducerï¼Ÿ <a class="header-anchor" href="#ä¸ºä»€ä¹ˆ-cleaned-logs-ä¸éœ€è¦-reducer" aria-label="Permalink to &quot;ä¸ºä»€ä¹ˆ cleaned_logs ä¸éœ€è¦ Reducerï¼Ÿ&quot;">â€‹</a></h4><p><strong>é—®é¢˜</strong>ï¼š<code>cleaned_logs</code> ä¹Ÿä¼šè¢«ä¸¤ä¸ªå­å›¾è®¿é—®ï¼Œä¸ºä»€ä¹ˆä¸éœ€è¦ <code>Annotated</code>ï¼Ÿ</p><p><strong>ç­”æ¡ˆ</strong>ï¼šå› ä¸ºæˆ‘ä»¬å®šä¹‰äº† <code>output_schema</code>ï¼</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å¤±è´¥åˆ†æå­å›¾çš„è¾“å‡ºçŠ¶æ€ï¼ˆä¸åŒ…å« cleaned_logsï¼‰</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> FailureAnalysisOutputState</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TypedDict</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    fa_summary: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    processed_logs: List[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # æ³¨æ„ï¼šæ²¡æœ‰ cleaned_logs</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># é—®é¢˜æ€»ç»“å­å›¾çš„è¾“å‡ºçŠ¶æ€ï¼ˆä¹Ÿä¸åŒ…å« cleaned_logsï¼‰</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> QuestionSummarizationOutputState</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TypedDict</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    report: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    processed_logs: List[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # æ³¨æ„ï¼šä¹Ÿæ²¡æœ‰ cleaned_logs</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><strong>æœºåˆ¶è§£é‡Š</strong>ï¼š</p><ol><li><p><strong>æ²¡æœ‰ output_schema æ—¶</strong>ï¼š</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">StateGraph(MyState)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ‰€æœ‰çŠ¶æ€å­—æ®µéƒ½ä¼šè¾“å‡º</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li>å­å›¾ä¼šè¿”å›æ‰€æœ‰çŠ¶æ€å­—æ®µ</li><li><code>cleaned_logs</code> ä¼šè¢«ä¸¤ä¸ªå­å›¾éƒ½è¿”å›</li><li>éœ€è¦ Reducer æ¥åˆå¹¶</li></ul></li><li><p><strong>æœ‰ output_schema æ—¶</strong>ï¼š</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">StateGraph(MyState, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">output_schema</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">MyOutputState)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li>å­å›¾åªè¿”å› <code>MyOutputState</code> ä¸­å®šä¹‰çš„å­—æ®µ</li><li><code>cleaned_logs</code> ä¸åœ¨è¾“å‡ºçŠ¶æ€ä¸­ï¼Œä¸ä¼šè¿”å›</li><li>ä¸éœ€è¦ Reducer</li></ul></li></ol><p><strong>ç±»æ¯”</strong>ï¼š</p><ul><li>æ²¡æœ‰ output_schema = å‡½æ•°è¿”å›æ‰€æœ‰å±€éƒ¨å˜é‡</li><li>æœ‰ output_schema = å‡½æ•°åªè¿”å›ä½ æŒ‡å®šçš„å€¼</li></ul><hr><h4 id="ä¸»å›¾èŠ‚ç‚¹å’Œæ„å»º" tabindex="-1">ä¸»å›¾èŠ‚ç‚¹å’Œæ„å»º <a class="header-anchor" href="#ä¸»å›¾èŠ‚ç‚¹å’Œæ„å»º" aria-label="Permalink to &quot;ä¸»å›¾èŠ‚ç‚¹å’Œæ„å»º&quot;">â€‹</a></h4><p><strong>clean_logs èŠ‚ç‚¹</strong>ï¼š</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> clean_logs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state):</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot; æ¸…æ´—æ—¥å¿— &quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    raw_logs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> state[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;raw_logs&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # å®é™…åº”ç”¨ä¸­ä¼šè¿›è¡Œæ•°æ®æ¸…æ´—ï¼š</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # - å»é‡</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # - æ ¼å¼æ ‡å‡†åŒ–</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # - è¿‡æ»¤æ— æ•ˆæ•°æ®</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    cleaned_logs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> raw_logs  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ç®€åŒ–ç¤ºä¾‹</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;cleaned_logs&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: cleaned_logs}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><hr><p><strong>æ„å»ºä¸»å›¾</strong>ï¼š</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">entry_builder </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> StateGraph(EntryGraphState)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ·»åŠ å¸¸è§„èŠ‚ç‚¹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">entry_builder.add_node(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;clean_logs&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, clean_logs)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å…³é”®ï¼šå°†ç¼–è¯‘åçš„å­å›¾ä½œä¸ºèŠ‚ç‚¹æ·»åŠ </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">entry_builder.add_node(</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;question_summarization&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    qs_builder.compile()  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ç¼–è¯‘å­å›¾</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">entry_builder.add_node(</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;failure_analysis&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    fa_builder.compile()  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ç¼–è¯‘å­å›¾</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å®šä¹‰æ‰§è¡Œæµç¨‹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">entry_builder.add_edge(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">START</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;clean_logs&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">entry_builder.add_edge(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;clean_logs&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;failure_analysis&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">entry_builder.add_edge(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;clean_logs&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;question_summarization&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">entry_builder.add_edge(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;failure_analysis&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">END</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">entry_builder.add_edge(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;question_summarization&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">END</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ç¼–è¯‘ä¸»å›¾</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">graph </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> entry_builder.compile()</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><p><strong>å…³é”®ç‚¹</strong>ï¼š</p><ol><li><p><strong>å­å›¾ä¹Ÿæ˜¯èŠ‚ç‚¹</strong>ï¼š</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">entry_builder.add_node(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;å­å›¾åç§°&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, å­å›¾å®ä¾‹.compile())</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li><p><strong>å¹¶è¡Œæ‰§è¡Œ</strong>ï¼š</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">entry_builder.add_edge(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;clean_logs&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;failure_analysis&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">entry_builder.add_edge(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;clean_logs&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;question_summarization&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>ä» <code>clean_logs</code> å‡ºå‘æœ‰ä¸¤æ¡è¾¹ï¼Œä¸¤ä¸ªå­å›¾ä¼šå¹¶è¡Œè¿è¡Œ</p></li><li><p><strong>xray å‚æ•°</strong>ï¼š</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">graph.get_graph(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">xray</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).draw_mermaid_png()</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><code>xray=1</code> ä¼šå±•å¼€å­å›¾çš„å†…éƒ¨ç»“æ„ï¼Œæ–¹ä¾¿è°ƒè¯•</p></li></ol><hr><h3 id="ç¬¬äº”éƒ¨åˆ†-è¿è¡Œç¤ºä¾‹" tabindex="-1">ç¬¬äº”éƒ¨åˆ†ï¼šè¿è¡Œç¤ºä¾‹ <a class="header-anchor" href="#ç¬¬äº”éƒ¨åˆ†-è¿è¡Œç¤ºä¾‹" aria-label="Permalink to &quot;ç¬¬äº”éƒ¨åˆ†ï¼šè¿è¡Œç¤ºä¾‹&quot;">â€‹</a></h3><h4 id="å‡†å¤‡æµ‹è¯•æ•°æ®" tabindex="-1">å‡†å¤‡æµ‹è¯•æ•°æ® <a class="header-anchor" href="#å‡†å¤‡æµ‹è¯•æ•°æ®" aria-label="Permalink to &quot;å‡†å¤‡æµ‹è¯•æ•°æ®&quot;">â€‹</a></h4><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ­£å¸¸çš„é—®ç­”æ—¥å¿—</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">question_answer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Log(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    question</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;How can I import ChatOllama?&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    answer</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;To import ChatOllama, use: &#39;from langchain_community.chat_models import ChatOllama.&#39;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # æ²¡æœ‰ grade å­—æ®µï¼Œè¡¨ç¤ºè´¨é‡æ­£å¸¸</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æœ‰è´¨é‡é—®é¢˜çš„æ—¥å¿—</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">question_answer_feedback </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Log(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;2&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    question</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;How can I use Chroma vector store?&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    answer</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;To use Chroma, define: rag_chain = create_retrieval_chain(retriever, question_answer_chain).&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    grade</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è¯„åˆ†ä¸º 0ï¼Œè¡¨ç¤ºè´¨é‡å·®</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    grader</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Document Relevance Recall&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    feedback</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;The retrieved documents discuss vector stores in general, but not Chroma specifically&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">raw_logs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [question_answer, question_answer_feedback]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><hr><h4 id="æ‰§è¡Œå›¾" tabindex="-1">æ‰§è¡Œå›¾ <a class="header-anchor" href="#æ‰§è¡Œå›¾" aria-label="Permalink to &quot;æ‰§è¡Œå›¾&quot;">â€‹</a></h4><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> graph.invoke({</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;raw_logs&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: raw_logs})</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><strong>è¾“å‡ºç»“æœ</strong>ï¼š</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;raw_logs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åŸå§‹è¾“å…¥</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;cleaned_logs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># clean_logs èŠ‚ç‚¹çš„è¾“å‡º</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;fa_summary&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Poor quality retrieval of Chroma documentation.&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # â†‘ æ¥è‡ªå¤±è´¥åˆ†æå­å›¾</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;report&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;foo bar baz&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # â†‘ æ¥è‡ªé—®é¢˜æ€»ç»“å­å›¾</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;processed_logs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &#39;failure-analysis-on-log-2&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,   </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å¤±è´¥åˆ†æå¤„ç†äº† log-2</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &#39;summary-on-log-1&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,            </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># é—®é¢˜æ€»ç»“å¤„ç†äº† log-1</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &#39;summary-on-log-2&#39;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">             # é—®é¢˜æ€»ç»“å¤„ç†äº† log-2</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ]</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # â†‘ ä¸¤ä¸ªå­å›¾çš„ processed_logs é€šè¿‡ add åˆå¹¶</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><hr><h2 id="ğŸ”‘-æ ¸å¿ƒæŠ€æœ¯è§£æ" tabindex="-1">ğŸ”‘ æ ¸å¿ƒæŠ€æœ¯è§£æ <a class="header-anchor" href="#ğŸ”‘-æ ¸å¿ƒæŠ€æœ¯è§£æ" aria-label="Permalink to &quot;ğŸ”‘ æ ¸å¿ƒæŠ€æœ¯è§£æ&quot;">â€‹</a></h2><h3 id="_1-å­å›¾çš„æœ¬è´¨" tabindex="-1">1. å­å›¾çš„æœ¬è´¨ <a class="header-anchor" href="#_1-å­å›¾çš„æœ¬è´¨" aria-label="Permalink to &quot;1. å­å›¾çš„æœ¬è´¨&quot;">â€‹</a></h3><p><strong>å­å›¾æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p><ul><li>å­å›¾æœ¬èº«å°±æ˜¯ä¸€ä¸ªå®Œæ•´çš„ StateGraph</li><li>å¯ä»¥ç‹¬ç«‹è¿è¡Œå’Œæµ‹è¯•</li><li>é€šè¿‡ <code>compile()</code> ç¼–è¯‘åï¼Œå¯ä»¥ä½œä¸ºèŠ‚ç‚¹åµŒå…¥å…¶ä»–å›¾</li></ul><p><strong>ç±»æ¯”</strong>ï¼š</p><ul><li>ä¸»å›¾ = ä¸€ä¸ªå…¬å¸</li><li>å­å›¾ = å…¬å¸å†…çš„éƒ¨é—¨</li><li>æ¯ä¸ªéƒ¨é—¨æœ‰è‡ªå·±çš„å·¥ä½œæµç¨‹ï¼ˆå†…éƒ¨çŠ¶æ€ï¼‰</li><li>éƒ¨é—¨åªå‘å…¬å¸æ±‡æŠ¥å…³é”®ç»“æœï¼ˆè¾“å‡ºçŠ¶æ€ï¼‰</li></ul><hr><h3 id="_2-çŠ¶æ€é€šä¿¡æœºåˆ¶" tabindex="-1">2. çŠ¶æ€é€šä¿¡æœºåˆ¶ <a class="header-anchor" href="#_2-çŠ¶æ€é€šä¿¡æœºåˆ¶" aria-label="Permalink to &quot;2. çŠ¶æ€é€šä¿¡æœºåˆ¶&quot;">â€‹</a></h3><p><strong>ä¸»å›¾ â†’ å­å›¾ï¼ˆè¾“å…¥ï¼‰</strong>ï¼š</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> EntryGraphState</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TypedDict</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    cleaned_logs: List[Log]  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ä¸»å›¾æœ‰è¿™ä¸ªå­—æ®µ</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> FailureAnalysisState</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TypedDict</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    cleaned_logs: List[Log]  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å­å›¾ä¹Ÿæœ‰è¿™ä¸ªå­—æ®µ</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>å½“ä¸»å›¾è°ƒç”¨å­å›¾æ—¶ï¼ŒLangGraph ä¼šè‡ªåŠ¨ä¼ é€’<strong>åŒåå­—æ®µ</strong>ï¼š</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ä¸»å›¾çŠ¶æ€</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;cleaned_logs&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è‡ªåŠ¨ä¼ é€’ç»™å­å›¾</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å­å›¾å¯ä»¥è®¿é—® state[&quot;cleaned_logs&quot;]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><hr><p><strong>å­å›¾ â†’ ä¸»å›¾ï¼ˆè¾“å‡ºï¼‰</strong>ï¼š</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> FailureAnalysisOutputState</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TypedDict</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    fa_summary: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # å­å›¾è¾“å‡ºè¿™ä¸ªå­—æ®µ</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> EntryGraphState</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TypedDict</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    fa_summary: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # ä¸»å›¾æœ‰åŒåå­—æ®µæ¥æ”¶</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>å­å›¾è¿”å›çš„å­—æ®µä¼š<strong>æ›´æ–°</strong>ä¸»å›¾çŠ¶æ€ä¸­çš„åŒåå­—æ®µã€‚</p><hr><p><strong>å…³é”®åŸåˆ™</strong>ï¼š</p><p>âœ… <strong>åŒåå­—æ®µ = é€šä¿¡é€šé“</strong></p><ul><li>ä¸»å›¾å’Œå­å›¾é€šè¿‡åŒåå­—æ®µä¼ é€’æ•°æ®</li><li>ä¸åŒåçš„å­—æ®µäº’ä¸å¹²æ‰°</li></ul><p>âœ… <strong>è¾“å…¥ = çŠ¶æ€äº¤é›†</strong></p><ul><li>å­å›¾åªèƒ½è®¿é—®ä¸ä¸»å›¾<strong>åŒå</strong>çš„è¾“å…¥å­—æ®µ</li></ul><p>âœ… <strong>è¾“å‡º = output_schema</strong></p><ul><li>å­å›¾åªè¿”å› output_schema ä¸­å®šä¹‰çš„å­—æ®µ</li><li>å‡å°‘ä¸å¿…è¦çš„æ•°æ®ä¼ é€’</li></ul><hr><h3 id="_3-å¹¶è¡Œå­å›¾çš„ç»“æœåˆå¹¶" tabindex="-1">3. å¹¶è¡Œå­å›¾çš„ç»“æœåˆå¹¶ <a class="header-anchor" href="#_3-å¹¶è¡Œå­å›¾çš„ç»“æœåˆå¹¶" aria-label="Permalink to &quot;3. å¹¶è¡Œå­å›¾çš„ç»“æœåˆå¹¶&quot;">â€‹</a></h3><p><strong>åœºæ™¯</strong>ï¼šä¸¤ä¸ªå­å›¾å¹¶è¡Œè¿è¡Œï¼Œéƒ½è¿”å›åŒåå­—æ®µ</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å­å›¾ A è¿”å›</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;processed_logs&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;a&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;b&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å­å›¾ B è¿”å›</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;processed_logs&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;c&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;d&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å¦‚ä½•åˆå¹¶ï¼Ÿ</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><strong>è§£å†³æ–¹æ¡ˆ 1ï¼šä½¿ç”¨ Reducer</strong></p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> operator </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> add</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> State</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TypedDict</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    processed_logs: Annotated[List[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">], add]  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æŒ‡å®šåˆå¹¶æ–¹å¼</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>ç»“æœï¼š<code>{&quot;processed_logs&quot;: [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;]}</code></p><hr><p><strong>è§£å†³æ–¹æ¡ˆ 2ï¼šä½¿ç”¨ä¸åŒçš„å­—æ®µå</strong></p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> EntryState</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TypedDict</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    fa_processed_logs: List[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å¤±è´¥åˆ†æçš„è®°å½•</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    qs_processed_logs: List[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># é—®é¢˜æ€»ç»“çš„è®°å½•</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> FAOutputState</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TypedDict</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    fa_processed_logs: List[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ä¸åŒå</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> QSOutputState</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TypedDict</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    qs_processed_logs: List[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ä¸åŒå</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>è¿™æ ·ä¸¤ä¸ªå­å›¾è¿”å›ä¸åŒçš„å­—æ®µï¼Œä¸éœ€è¦åˆå¹¶ã€‚</p><hr><h3 id="_4-ä½•æ—¶ä½¿ç”¨å­å›¾" tabindex="-1">4. ä½•æ—¶ä½¿ç”¨å­å›¾ï¼Ÿ <a class="header-anchor" href="#_4-ä½•æ—¶ä½¿ç”¨å­å›¾" aria-label="Permalink to &quot;4. ä½•æ—¶ä½¿ç”¨å­å›¾ï¼Ÿ&quot;">â€‹</a></h3><p><strong>é€‚åˆä½¿ç”¨å­å›¾çš„åœºæ™¯</strong>ï¼š</p><p>âœ… <strong>ç‹¬ç«‹çš„ä¸šåŠ¡é€»è¾‘</strong></p><ul><li>æ¯ä¸ªå­å›¾è´Ÿè´£ä¸€ä¸ªå®Œæ•´çš„å­ä»»åŠ¡</li><li>æœ‰æ¸…æ™°çš„è¾“å…¥å’Œè¾“å‡ºè¾¹ç•Œ</li></ul><p>âœ… <strong>éœ€è¦çŠ¶æ€éš”ç¦»</strong></p><ul><li>å­å›¾çš„ä¸­é—´å˜é‡ä¸åº”è¯¥æ±¡æŸ“ä¸»å›¾çŠ¶æ€</li><li>ä¾‹å¦‚ï¼š<code>failures</code> åªåœ¨å¤±è´¥åˆ†æå­å›¾å†…ä½¿ç”¨</li></ul><p>âœ… <strong>å¯å¤ç”¨çš„æµç¨‹</strong></p><ul><li>åŒä¸€ä¸ªå­å›¾å¯ä»¥åœ¨ä¸åŒçš„ä¸»å›¾ä¸­å¤ç”¨</li><li>ä¾‹å¦‚ï¼šæ—¥å¿—æ¸…æ´—å­å›¾å¯ç”¨äºå¤šä¸ªåœºæ™¯</li></ul><p>âœ… <strong>å¹¶è¡Œæ‰§è¡Œ</strong></p><ul><li>å¤šä¸ªç‹¬ç«‹ä»»åŠ¡éœ€è¦åŒæ—¶è¿è¡Œ</li><li>é€šè¿‡ Reducer åˆå¹¶ç»“æœ</li></ul><hr><p><strong>ä¸é€‚åˆä½¿ç”¨å­å›¾çš„åœºæ™¯</strong>ï¼š</p><p>âŒ <strong>ç®€å•çš„çº¿æ€§æµç¨‹</strong></p><ul><li>å¦‚æœåªæ˜¯å‡ ä¸ªé¡ºåºæ‰§è¡Œçš„èŠ‚ç‚¹ï¼Œä¸éœ€è¦å­å›¾</li></ul><p>âŒ <strong>çŠ¶æ€é«˜åº¦è€¦åˆ</strong></p><ul><li>å¦‚æœèŠ‚ç‚¹ä¹‹é—´éœ€è¦é¢‘ç¹å…±äº«ä¸­é—´çŠ¶æ€</li></ul><p>âŒ <strong>è¿‡åº¦è®¾è®¡</strong></p><ul><li>ä¸è¦ä¸ºäº†ç”¨å­å›¾è€Œç”¨å­å›¾</li></ul><hr><h2 id="ğŸ’¡-python-çŸ¥è¯†ç‚¹æ€»ç»“" tabindex="-1">ğŸ’¡ Python çŸ¥è¯†ç‚¹æ€»ç»“ <a class="header-anchor" href="#ğŸ’¡-python-çŸ¥è¯†ç‚¹æ€»ç»“" aria-label="Permalink to &quot;ğŸ’¡ Python çŸ¥è¯†ç‚¹æ€»ç»“&quot;">â€‹</a></h2><h3 id="_1-typeddict" tabindex="-1">1. TypedDict <a class="header-anchor" href="#_1-typeddict" aria-label="Permalink to &quot;1. TypedDict&quot;">â€‹</a></h3><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> typing_extensions </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> TypedDict</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å®šä¹‰å­—å…¸ç»“æ„</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Person</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TypedDict</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    name: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    age: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">int</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ä½¿ç”¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">person: Person </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Alice&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;age&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">30</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><strong>ä¼˜åŠ¿</strong>ï¼š</p><ul><li>æä¾›ç±»å‹æ£€æŸ¥</li><li>IDE è‡ªåŠ¨è¡¥å…¨</li><li>æ¸…æ™°çš„æ•°æ®ç»“æ„æ–‡æ¡£</li></ul><hr><h3 id="_2-optional-ç±»å‹" tabindex="-1">2. Optional ç±»å‹ <a class="header-anchor" href="#_2-optional-ç±»å‹" aria-label="Permalink to &quot;2. Optional ç±»å‹&quot;">â€‹</a></h3><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> typing </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Optional</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è¡¨ç¤ºå¯é€‰å­—æ®µ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">grade: Optional[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å¯ä»¥æ˜¯ int æˆ– None</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ç­‰ä»·äº</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">grade: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">int</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> None</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Python 3.10+</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><hr><h3 id="_3-annotated-å…ƒæ•°æ®" tabindex="-1">3. Annotated å…ƒæ•°æ® <a class="header-anchor" href="#_3-annotated-å…ƒæ•°æ®" aria-label="Permalink to &quot;3. Annotated å…ƒæ•°æ®&quot;">â€‹</a></h3><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> typing </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Annotated</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åŸºæœ¬ç”¨æ³•</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Age </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Annotated[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;must be positive&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># LangGraph ç”¨æ³•</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> operator </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> add</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Logs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Annotated[List[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">], add]  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æŒ‡å®šåˆå¹¶æ–¹å¼</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><hr><h3 id="_4-åˆ—è¡¨æ¨å¯¼å¼" tabindex="-1">4. åˆ—è¡¨æ¨å¯¼å¼ <a class="header-anchor" href="#_4-åˆ—è¡¨æ¨å¯¼å¼" aria-label="Permalink to &quot;4. åˆ—è¡¨æ¨å¯¼å¼&quot;">â€‹</a></h3><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åŸºæœ¬å½¢å¼</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [expression </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> item </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> iterable </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> condition]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ç¤ºä¾‹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">numbers </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">even </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [n </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> n </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> numbers </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> n </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># [2, 4]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">squared </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [n</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">**</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> n </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> numbers]  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># [1, 4, 9, 16, 25]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><hr><h3 id="_5-f-string-æ ¼å¼åŒ–" tabindex="-1">5. f-string æ ¼å¼åŒ– <a class="header-anchor" href="#_5-f-string-æ ¼å¼åŒ–" aria-label="Permalink to &quot;5. f-string æ ¼å¼åŒ–&quot;">â€‹</a></h3><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Alice&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">age </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 30</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åŸºæœ¬ç”¨æ³•</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">msg </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Name: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">name</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">, Age: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">age</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è¡¨è¾¾å¼</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">msg </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Next year: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">age </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ ¼å¼æ§åˆ¶</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">pi </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3.14159</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">msg </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Pi: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">pi</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:.2f</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # &quot;Pi: 3.14&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><hr><h3 id="_6-operator-æ¨¡å—" tabindex="-1">6. operator æ¨¡å— <a class="header-anchor" href="#_6-operator-æ¨¡å—" aria-label="Permalink to &quot;6. operator æ¨¡å—&quot;">â€‹</a></h3><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> operator </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> add</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åˆ—è¡¨åˆå¹¶</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">add([</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">], [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># [1, 2, 3, 4]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ•°å­—ç›¸åŠ </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">add(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">20</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 30</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å…¶ä»–å¸¸ç”¨æ“ä½œç¬¦</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> operator </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> mul, sub</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">mul(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 12</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sub(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 7</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><hr><h2 id="ğŸ¯-å®æˆ˜å»ºè®®" tabindex="-1">ğŸ¯ å®æˆ˜å»ºè®® <a class="header-anchor" href="#ğŸ¯-å®æˆ˜å»ºè®®" aria-label="Permalink to &quot;ğŸ¯ å®æˆ˜å»ºè®®&quot;">â€‹</a></h2><h3 id="å¯¹äºåˆå­¦è€…" tabindex="-1">å¯¹äºåˆå­¦è€… <a class="header-anchor" href="#å¯¹äºåˆå­¦è€…" aria-label="Permalink to &quot;å¯¹äºåˆå­¦è€…&quot;">â€‹</a></h3><ol><li><p><strong>å…ˆç†è§£çŠ¶æ€é€šä¿¡</strong></p><ul><li>ç”»å‡ºä¸»å›¾å’Œå­å›¾çš„çŠ¶æ€ç»“æ„</li><li>æ ‡æ³¨å“ªäº›å­—æ®µæ˜¯å…±äº«çš„</li></ul></li><li><p><strong>ä»ç®€å•å¼€å§‹</strong></p><ul><li>å…ˆæ„å»ºä¸€ä¸ªå­å›¾</li><li>æµ‹è¯•é€šè¿‡åå†æ·»åŠ ç¬¬äºŒä¸ª</li><li>æœ€åå¤„ç†å¹¶è¡Œå’Œåˆå¹¶</li></ul></li><li><p><strong>ä½¿ç”¨å¯è§†åŒ–</strong></p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æŸ¥çœ‹å­å›¾ç»“æ„</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">fa_graph.get_graph().draw_mermaid_png()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æŸ¥çœ‹ä¸»å›¾ç»“æ„ï¼ˆå±•å¼€å­å›¾ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">main_graph.get_graph(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">xray</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).draw_mermaid_png()</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li><li><p><strong>è°ƒè¯•æŠ€å·§</strong></p><ul><li>å…ˆå•ç‹¬æµ‹è¯•æ¯ä¸ªå­å›¾</li><li>ç¡®ä¿å­å›¾èƒ½ç‹¬ç«‹è¿è¡Œ</li><li>å†é›†æˆåˆ°ä¸»å›¾ä¸­</li></ul></li></ol><hr><h3 id="å¯¹äºè¿›é˜¶ä½¿ç”¨" tabindex="-1">å¯¹äºè¿›é˜¶ä½¿ç”¨ <a class="header-anchor" href="#å¯¹äºè¿›é˜¶ä½¿ç”¨" aria-label="Permalink to &quot;å¯¹äºè¿›é˜¶ä½¿ç”¨&quot;">â€‹</a></h3><ol><li><p><strong>ä¼˜åŒ–çŠ¶æ€è®¾è®¡</strong></p><ul><li>åªåœ¨ output_schema ä¸­åŒ…å«å¿…è¦å­—æ®µ</li><li>ä½¿ç”¨æœ‰æ„ä¹‰çš„å­—æ®µåé¿å…å†²çª</li><li>åˆç†ä½¿ç”¨ Reducer</li></ul></li><li><p><strong>é”™è¯¯å¤„ç†</strong></p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> safe_node</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> process(state)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    except</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Exception</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> e:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;error&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(e)}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li><li><p><strong>æ€§èƒ½ä¼˜åŒ–</strong></p><ul><li>åˆ©ç”¨å¹¶è¡Œæ‰§è¡Œæé«˜æ•ˆç‡</li><li>é¿å…ä¼ é€’å¤§é‡ä¸å¿…è¦çš„æ•°æ®</li><li>ä½¿ç”¨ xray å‚æ•°åˆ†ææ‰§è¡Œè·¯å¾„</li></ul></li><li><p><strong>å¯æµ‹è¯•æ€§</strong></p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å•ç‹¬æµ‹è¯•å­å›¾</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">fa_graph </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fa_builder.compile()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fa_graph.invoke({</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;cleaned_logs&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: test_logs})</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æµ‹è¯•ä¸»å›¾</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">main_graph </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> entry_builder.compile()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> main_graph.invoke({</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;raw_logs&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: test_logs})</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li></ol><hr><h2 id="ğŸ“Œ-æ€»ç»“" tabindex="-1">ğŸ“Œ æ€»ç»“ <a class="header-anchor" href="#ğŸ“Œ-æ€»ç»“" aria-label="Permalink to &quot;ğŸ“Œ æ€»ç»“&quot;">â€‹</a></h2><h3 id="æ ¸å¿ƒæ¦‚å¿µ" tabindex="-1">æ ¸å¿ƒæ¦‚å¿µ <a class="header-anchor" href="#æ ¸å¿ƒæ¦‚å¿µ" aria-label="Permalink to &quot;æ ¸å¿ƒæ¦‚å¿µ&quot;">â€‹</a></h3><ol><li><p><strong>å­å›¾æ˜¯ç‹¬ç«‹çš„å›¾</strong></p><ul><li>æœ‰è‡ªå·±çš„çŠ¶æ€ç©ºé—´</li><li>å¯ä»¥ç‹¬ç«‹è¿è¡Œå’Œæµ‹è¯•</li><li>é€šè¿‡ compile() åå¯åµŒå…¥å…¶ä»–å›¾</li></ul></li><li><p><strong>çŠ¶æ€é€šä¿¡é€šè¿‡åŒåå­—æ®µ</strong></p><ul><li>ä¸»å›¾ â†’ å­å›¾ï¼šè‡ªåŠ¨ä¼ é€’åŒåè¾“å…¥å­—æ®µ</li><li>å­å›¾ â†’ ä¸»å›¾ï¼šè¿”å› output_schema ä¸­çš„å­—æ®µ</li></ul></li><li><p><strong>å¹¶è¡Œå­å›¾éœ€è¦å¤„ç†ç»“æœåˆå¹¶</strong></p><ul><li>ä½¿ç”¨ Annotated + Reducer</li><li>æˆ–ä½¿ç”¨ä¸åŒçš„å­—æ®µå</li></ul></li></ol><h3 id="è®¾è®¡åŸåˆ™" tabindex="-1">è®¾è®¡åŸåˆ™ <a class="header-anchor" href="#è®¾è®¡åŸåˆ™" aria-label="Permalink to &quot;è®¾è®¡åŸåˆ™&quot;">â€‹</a></h3><p>âœ… <strong>å•ä¸€èŒè´£</strong>ï¼šæ¯ä¸ªå­å›¾è´Ÿè´£ä¸€ä¸ªç‹¬ç«‹ä»»åŠ¡ âœ… <strong>çŠ¶æ€éš”ç¦»</strong>ï¼šä¸­é—´å˜é‡ä¸æš´éœ²ç»™ä¸»å›¾ âœ… <strong>æ¸…æ™°æ¥å£</strong>ï¼šæ˜ç¡®å®šä¹‰è¾“å…¥å’Œè¾“å‡ºçŠ¶æ€ âœ… <strong>å¯å¤ç”¨æ€§</strong>ï¼šå­å›¾å¯åœ¨å¤šä¸ªåœºæ™¯ä¸­ä½¿ç”¨</p><h3 id="é€‚ç”¨åœºæ™¯" tabindex="-1">é€‚ç”¨åœºæ™¯ <a class="header-anchor" href="#é€‚ç”¨åœºæ™¯" aria-label="Permalink to &quot;é€‚ç”¨åœºæ™¯&quot;">â€‹</a></h3><ul><li>å¤šä»£ç†ç³»ç»Ÿï¼ˆæ¯ä¸ªä»£ç†æ˜¯ä¸€ä¸ªå­å›¾ï¼‰</li><li>å¤æ‚ä¸šåŠ¡æµç¨‹çš„æ¨¡å—åŒ–</li><li>éœ€è¦å¹¶è¡Œæ‰§è¡Œçš„ç‹¬ç«‹ä»»åŠ¡</li><li>éœ€è¦çŠ¶æ€éš”ç¦»çš„åœºæ™¯</li></ul><hr><h2 id="ğŸš€-æ‰©å±•ç»ƒä¹ " tabindex="-1">ğŸš€ æ‰©å±•ç»ƒä¹  <a class="header-anchor" href="#ğŸš€-æ‰©å±•ç»ƒä¹ " aria-label="Permalink to &quot;ğŸš€ æ‰©å±•ç»ƒä¹ &quot;">â€‹</a></h2><ol><li><p><strong>æ·»åŠ ç¬¬ä¸‰ä¸ªå­å›¾</strong></p><ul><li>åˆ›å»ºä¸€ä¸ª&quot;æ€§èƒ½ç›‘æ§&quot;å­å›¾</li><li>åˆ†ææ—¥å¿—çš„å“åº”æ—¶é—´</li><li>å¹¶è¡Œè¿è¡Œä¸‰ä¸ªå­å›¾</li></ul></li><li><p><strong>å®ç°é”™è¯¯å¤„ç†</strong></p><ul><li>åœ¨å­å›¾ä¸­æ·»åŠ é”™è¯¯æ•è·</li><li>å°†é”™è¯¯ä¿¡æ¯è¿”å›ç»™ä¸»å›¾</li><li>ä¸»å›¾æ ¹æ®é”™è¯¯å†³å®šæ˜¯å¦ç»§ç»­</li></ul></li><li><p><strong>åµŒå¥—å­å›¾</strong></p><ul><li>åœ¨å­å›¾å†…éƒ¨å†åµŒå¥—å­å›¾</li><li>ç†è§£å¤šå±‚çŠ¶æ€ä¼ é€’æœºåˆ¶</li></ul></li><li><p><strong>åŠ¨æ€å­å›¾é€‰æ‹©</strong></p><ul><li>æ ¹æ®è¾“å…¥æ•°æ®å†³å®šè°ƒç”¨å“ªäº›å­å›¾</li><li>å®ç°æ¡ä»¶å¹¶è¡Œ</li></ul></li></ol><hr><p><strong>æœ€åçš„è¯</strong>ï¼šå­å›¾æ˜¯ LangGraph å®ç°æ¨¡å—åŒ–å’Œå¯æ‰©å±•æ€§çš„å…³é”®æœºåˆ¶ã€‚è™½ç„¶è¿™ä¸ªæ¡ˆä¾‹å¾ˆç®€å•ï¼Œä½†å®ƒå±•ç¤ºçš„&quot;çŠ¶æ€éš”ç¦»&quot;å’Œ&quot;å¹¶è¡Œåˆå¹¶&quot;æ€æƒ³åœ¨æ„å»ºå¤æ‚çš„å¤šä»£ç†ç³»ç»Ÿæ—¶è‡³å…³é‡è¦ã€‚æŒæ¡å­å›¾ï¼Œä½ å°±æŒæ¡äº†æ„å»ºå¤§å‹ AI ç³»ç»Ÿçš„åŸºç¡€ï¼</p><hr><h2 id="ğŸ§ -æ ¸å¿ƒæ¦‚å¿µæ·±åº¦è§£è¯»" tabindex="-1">ğŸ§  æ ¸å¿ƒæ¦‚å¿µæ·±åº¦è§£è¯» <a class="header-anchor" href="#ğŸ§ -æ ¸å¿ƒæ¦‚å¿µæ·±åº¦è§£è¯»" aria-label="Permalink to &quot;ğŸ§  æ ¸å¿ƒæ¦‚å¿µæ·±åº¦è§£è¯»&quot;">â€‹</a></h2><h3 id="ç‹¬ç«‹çš„çŠ¶æ€ç©ºé—´-é€šä¿—è§£é‡Š" tabindex="-1">&quot;ç‹¬ç«‹çš„çŠ¶æ€ç©ºé—´&quot;é€šä¿—è§£é‡Š <a class="header-anchor" href="#ç‹¬ç«‹çš„çŠ¶æ€ç©ºé—´-é€šä¿—è§£é‡Š" aria-label="Permalink to &quot;&quot;ç‹¬ç«‹çš„çŠ¶æ€ç©ºé—´&quot;é€šä¿—è§£é‡Š&quot;">â€‹</a></h3><p><strong>åœºæ™¯ç±»æ¯”ï¼šå…¬å¸åŠå…¬å®¤</strong></p><p>æƒ³è±¡ä¸€ä¸ªå…¬å¸æœ‰ä¸‰ä¸ªåŠå…¬å®¤ï¼š</p><ol><li><p><strong>å‰å°åŠå…¬å®¤</strong>ï¼ˆä¸»å›¾ï¼‰</p><ul><li>è´Ÿè´£æ¥å¾…å®¢æˆ·ã€åˆ†é…ä»»åŠ¡</li><li>æœ‰ä¸€ä¸ªå…¬å…±ç™½æ¿è®°å½•ï¼šå®¢æˆ·ä¿¡æ¯ã€ä»»åŠ¡è¿›åº¦ã€æœ€ç»ˆç»“æœ</li></ul></li><li><p><strong>æŠ€æœ¯éƒ¨åŠå…¬å®¤</strong>ï¼ˆå­å›¾ Aï¼‰</p><ul><li>æœ‰è‡ªå·±çš„å°ç™½æ¿ï¼šè®°å½•ä»£ç  bugã€ä¿®å¤æ–¹æ¡ˆã€æŠ€æœ¯æ–‡æ¡£</li><li>è¿™äº›ä¸­é—´è¿‡ç¨‹å‰å°<strong>çœ‹ä¸åˆ°ä¹Ÿä¸å…³å¿ƒ</strong></li><li>å®Œæˆååªå‘Šè¯‰å‰å°ï¼š&quot;ä¿®å¥½äº†ï¼Œè¿™æ˜¯ä¿®å¤æŠ¥å‘Š&quot;</li></ul></li><li><p><strong>å¸‚åœºéƒ¨åŠå…¬å®¤</strong>ï¼ˆå­å›¾ Bï¼‰</p><ul><li>æœ‰è‡ªå·±çš„å°ç™½æ¿ï¼šè®°å½•è°ƒç ”æ•°æ®ã€åˆ†æè‰ç¨¿ã€ç«å“èµ„æ–™</li><li>è¿™äº›ä¸­é—´è¿‡ç¨‹å‰å°<strong>çœ‹ä¸åˆ°ä¹Ÿä¸å…³å¿ƒ</strong></li><li>å®Œæˆååªå‘Šè¯‰å‰å°ï¼š&quot;æå®šäº†ï¼Œè¿™æ˜¯å¸‚åœºæŠ¥å‘Š&quot;</li></ul></li></ol><p><strong>ç‹¬ç«‹çš„çŠ¶æ€ç©ºé—´ = æ¯ä¸ªåŠå…¬å®¤æœ‰è‡ªå·±çš„å°ç™½æ¿</strong></p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ä¸»å›¾çŠ¶æ€ï¼ˆå‰å°çš„å…¬å…±ç™½æ¿ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MainState</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    å®¢æˆ·éœ€æ±‚: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">           # å‰å°è®°å½•</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    æŠ€æœ¯ä¿®å¤æŠ¥å‘Š: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">       # æŠ€æœ¯éƒ¨æäº¤çš„</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    å¸‚åœºåˆ†ææŠ¥å‘Š: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">       # å¸‚åœºéƒ¨æäº¤çš„</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æŠ€æœ¯éƒ¨å­å›¾çŠ¶æ€ï¼ˆæŠ€æœ¯éƒ¨çš„å°ç™½æ¿ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> TechSubGraphState</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    å®¢æˆ·éœ€æ±‚: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">           # ä»å‰å°å¤åˆ¶è¿‡æ¥çš„</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    bugåˆ—è¡¨: List[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]     </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åªåœ¨æŠ€æœ¯éƒ¨ç”¨ï¼Œå‰å°ä¸çŸ¥é“</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ä¿®å¤ä»£ç : </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          # åªåœ¨æŠ€æœ¯éƒ¨ç”¨ï¼Œå‰å°ä¸çŸ¥é“</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    æŠ€æœ¯ä¿®å¤æŠ¥å‘Š: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">       # è¦æäº¤ç»™å‰å°çš„</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å¸‚åœºéƒ¨å­å›¾çŠ¶æ€ï¼ˆå¸‚åœºéƒ¨çš„å°ç™½æ¿ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MarketSubGraphState</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    å®¢æˆ·éœ€æ±‚: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">           # ä»å‰å°å¤åˆ¶è¿‡æ¥çš„</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    è°ƒç ”æ•°æ®: List[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">dict</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]   </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åªåœ¨å¸‚åœºéƒ¨ç”¨ï¼Œå‰å°ä¸çŸ¥é“</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ç«å“åˆ†æ: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          # åªåœ¨å¸‚åœºéƒ¨ç”¨ï¼Œå‰å°ä¸çŸ¥é“</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    å¸‚åœºåˆ†ææŠ¥å‘Š: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">       # è¦æäº¤ç»™å‰å°çš„</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p><strong>ä¸ºä»€ä¹ˆéœ€è¦ç‹¬ç«‹ç©ºé—´ï¼Ÿ</strong></p><p>âŒ <strong>æ²¡æœ‰ç‹¬ç«‹ç©ºé—´çš„é—®é¢˜</strong>ï¼š</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å¦‚æœéƒ½ç”¨åŒä¸€ä¸ªç™½æ¿ï¼ˆå…±äº«çŠ¶æ€ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">å…¨å…¬å¸å…±äº«çŠ¶æ€ </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;å®¢æˆ·éœ€æ±‚&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;...&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;bugåˆ—è¡¨&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],        </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æŠ€æœ¯éƒ¨çš„</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;ä¿®å¤ä»£ç &quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;...&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,       </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æŠ€æœ¯éƒ¨çš„</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;è°ƒç ”æ•°æ®&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],       </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å¸‚åœºéƒ¨çš„</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;ç«å“åˆ†æ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;...&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,       </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å¸‚åœºéƒ¨çš„</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # å…¨æ··åœ¨ä¸€èµ·ï¼Œä¹±å¥—äº†ï¼</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>é—®é¢˜ï¼š</p><ul><li>å‰å°ä¸å…³å¿ƒæŠ€æœ¯ç»†èŠ‚ï¼Œå´è¦çœ‹åˆ° <code>bugåˆ—è¡¨</code>ã€<code>ä¿®å¤ä»£ç </code></li><li>æŠ€æœ¯éƒ¨ä¸å…³å¿ƒå¸‚åœºæ•°æ®ï¼Œå´è¦çœ‹åˆ° <code>è°ƒç ”æ•°æ®</code>ã€<code>ç«å“åˆ†æ</code></li><li>å­—æ®µåå¯èƒ½å†²çªï¼ˆä¸¤ä¸ªéƒ¨é—¨éƒ½æƒ³ç”¨ <code>ä¸´æ—¶ç¬”è®°</code> è¿™ä¸ªåå­—ï¼‰</li><li>çŠ¶æ€è‡ƒè‚¿ï¼Œç®¡ç†å›°éš¾</li></ul><p>âœ… <strong>æœ‰ç‹¬ç«‹ç©ºé—´çš„å¥½å¤„</strong>ï¼š</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æŠ€æœ¯éƒ¨åªå…³å¿ƒè‡ªå·±çš„äº‹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">tech_state </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;å®¢æˆ·éœ€æ±‚&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;...&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,      </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è¾“å…¥</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;bugåˆ—è¡¨&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],       </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å†…éƒ¨å·¥ä½œ</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;ä¿®å¤ä»£ç &quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;...&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,      </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å†…éƒ¨å·¥ä½œ</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;æŠ€æœ¯ä¿®å¤æŠ¥å‘Š&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;...&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   # è¾“å‡º</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å¸‚åœºéƒ¨åªå…³å¿ƒè‡ªå·±çš„äº‹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">market_state </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;å®¢æˆ·éœ€æ±‚&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;...&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,      </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è¾“å…¥</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;è°ƒç ”æ•°æ®&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],      </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å†…éƒ¨å·¥ä½œ</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;ç«å“åˆ†æ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;...&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,      </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å†…éƒ¨å·¥ä½œ</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;å¸‚åœºåˆ†ææŠ¥å‘Š&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;...&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   # è¾“å‡º</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å‰å°åªçœ‹æœ€ç»ˆç»“æœ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">main_state </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;å®¢æˆ·éœ€æ±‚&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;...&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;æŠ€æœ¯ä¿®å¤æŠ¥å‘Š&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;...&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ¥è‡ªæŠ€æœ¯éƒ¨</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;å¸‚åœºåˆ†ææŠ¥å‘Š&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;...&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   # æ¥è‡ªå¸‚åœºéƒ¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>å¥½å¤„ï¼š</p><ul><li>âœ… <strong>èŒè´£æ¸…æ™°</strong>ï¼šæ¯ä¸ªéƒ¨é—¨ç®¡å¥½è‡ªå·±çš„äº‹</li><li>âœ… <strong>é¿å…æ±¡æŸ“</strong>ï¼šä¸­é—´å˜é‡ä¸ä¼šæ³„éœ²åˆ°å…¶ä»–åœ°æ–¹</li><li>âœ… <strong>å¯å¹¶è¡Œ</strong>ï¼šæŠ€æœ¯éƒ¨å’Œå¸‚åœºéƒ¨å¯ä»¥åŒæ—¶å·¥ä½œï¼Œäº’ä¸å¹²æ‰°</li><li>âœ… <strong>æ˜“ç»´æŠ¤</strong>ï¼šä¿®æ”¹æŠ€æœ¯éƒ¨æµç¨‹ä¸å½±å“å¸‚åœºéƒ¨</li></ul><hr><h3 id="langgraph-çš„-state-æ ¸å¿ƒæ¦‚å¿µ-å¤§ç™½è¯ç‰ˆ" tabindex="-1">LangGraph çš„ State æ ¸å¿ƒæ¦‚å¿µï¼ˆå¤§ç™½è¯ç‰ˆï¼‰ <a class="header-anchor" href="#langgraph-çš„-state-æ ¸å¿ƒæ¦‚å¿µ-å¤§ç™½è¯ç‰ˆ" aria-label="Permalink to &quot;LangGraph çš„ State æ ¸å¿ƒæ¦‚å¿µï¼ˆå¤§ç™½è¯ç‰ˆï¼‰&quot;">â€‹</a></h3><p><strong>State æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p><p>State å°±æ˜¯ä¸€ä¸ª<strong>æ•°æ®æµæ°´æœ¬</strong>ï¼Œè®°å½•äº†ä»å¼€å§‹åˆ°ç°åœ¨æ‰€æœ‰èŠ‚ç‚¹äº§ç”Ÿçš„æ•°æ®ã€‚</p><p><strong>æ ¸å¿ƒæ¯”å–»ï¼šState = ä¿¡æ¯å¹¿åœº</strong></p><p>æƒ³è±¡ä¸€ä¸ªåŸå¸‚çš„ä¸­å¿ƒå¹¿åœºï¼Œæ‰€æœ‰äººï¼ˆèŠ‚ç‚¹ï¼‰éƒ½ä¼šæ¥è¿™é‡Œï¼š</p><ul><li>ğŸ“¢ <strong>å‘å¸ƒæ¶ˆæ¯</strong>ï¼šæŠŠè‡ªå·±å¤„ç†çš„ç»“æœè´´åˆ°å¹¿åœºçš„å…¬å‘Šæ¿ä¸Š</li><li>ğŸ‘€ <strong>æŸ¥çœ‹æ¶ˆæ¯</strong>ï¼šçœ‹çœ‹åˆ«äººè´´äº†ä»€ä¹ˆä¿¡æ¯ï¼Œä½œä¸ºè‡ªå·±å·¥ä½œçš„è¾“å…¥</li><li>ğŸ”„ <strong>ä¿¡æ¯æ±‡æ€»</strong>ï¼šæ‰€æœ‰äººçš„å·¥ä½œæˆæœéƒ½æ±‡é›†åœ¨è¿™ä¸ªå¹¿åœº</li></ul><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>         ä¿¡æ¯å¹¿åœºï¼ˆStateï¼‰</span></span>
<span class="line"><span>    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span></span>
<span class="line"><span>    â”‚  ç”¨æˆ·è¾“å…¥: &quot;...&quot;        â”‚  â† åˆå§‹ä¿¡æ¯</span></span>
<span class="line"><span>    â”‚  èŠ‚ç‚¹Açš„ç»“æœ: &quot;...&quot;     â”‚  â† èŠ‚ç‚¹A è´´ä¸Šå»çš„</span></span>
<span class="line"><span>    â”‚  èŠ‚ç‚¹Bçš„ç»“æœ: &quot;...&quot;     â”‚  â† èŠ‚ç‚¹B è´´ä¸Šå»çš„</span></span>
<span class="line"><span>    â”‚  èŠ‚ç‚¹Cçš„ç»“æœ: &quot;...&quot;     â”‚  â† èŠ‚ç‚¹C è´´ä¸Šå»çš„</span></span>
<span class="line"><span>    â”‚  æœ€ç»ˆç­”æ¡ˆ: &quot;...&quot;        â”‚  â† æœ€åä¸€ä¸ªèŠ‚ç‚¹æ€»ç»“çš„</span></span>
<span class="line"><span>    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span></span>
<span class="line"><span>           â†‘    â†‘    â†‘    â†‘</span></span>
<span class="line"><span>           â”‚    â”‚    â”‚    â”‚</span></span>
<span class="line"><span>        èŠ‚ç‚¹A èŠ‚ç‚¹B èŠ‚ç‚¹C èŠ‚ç‚¹D</span></span>
<span class="line"><span>      ï¼ˆæ¥è´´ï¼‰ï¼ˆæ¥çœ‹ï¼‰ï¼ˆæ¥è´´ï¼‰ï¼ˆæ¥çœ‹ï¼‰</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p><strong>å…³é”®ç‰¹ç‚¹</strong>ï¼š</p><ol><li><p><strong>ä¸­å¿ƒåŒ–æ±‡èš</strong></p><ul><li>æ‰€æœ‰èŠ‚ç‚¹äº§ç”Ÿçš„ä¿¡æ¯éƒ½æ±‡æ€»åˆ° State è¿™ä¸ªå¹¿åœº</li><li>ä¸æ˜¯ç‚¹å¯¹ç‚¹ä¼ é€’ï¼Œè€Œæ˜¯&quot;æˆ‘è´´å…¬å‘Š â†’ ä½ æ¥çœ‹å…¬å‘Š&quot;</li></ul></li><li><p><strong>ä¿¡æ¯æŒä¹…åŒ–</strong></p><ul><li>è´´åœ¨å¹¿åœºä¸Šçš„ä¿¡æ¯ä¸ä¼šæ¶ˆå¤±ï¼ˆé™¤éè¢«è¦†ç›–ï¼‰</li><li>åé¢çš„èŠ‚ç‚¹èƒ½çœ‹åˆ°å‰é¢æ‰€æœ‰èŠ‚ç‚¹çš„ä¿¡æ¯</li></ul></li><li><p><strong>å¼‚æ­¥åä½œ</strong></p><ul><li>èŠ‚ç‚¹A ä¸éœ€è¦ç­‰èŠ‚ç‚¹B çœ‹å®Œæ‰ç»§ç»­</li><li>å„è‡ªæŠŠä¿¡æ¯è´´ä¸Šå»å°±è¡Œï¼Œæœ‰ä¾èµ–å…³ç³»çš„èŠ‚ç‚¹è‡ªç„¶ä¼šæ¥çœ‹</li></ul></li><li><p><strong>å…¨å±€å¯è§</strong></p><ul><li>ä»»ä½•èŠ‚ç‚¹éƒ½èƒ½çœ‹åˆ°å¹¿åœºä¸Šçš„æ‰€æœ‰ä¿¡æ¯</li><li>ä½†å®é™…ä¸Šï¼ŒèŠ‚ç‚¹åªå…³å¿ƒè‡ªå·±éœ€è¦çš„é‚£éƒ¨åˆ†</li></ul></li></ol><hr><p><strong>ä¿¡æ¯å¹¿åœºçš„è¿ä½œæœºåˆ¶</strong></p><h4 id="åœºæ™¯-å¤šäººåä½œå†™æŠ¥å‘Š" tabindex="-1">åœºæ™¯ï¼šå¤šäººåä½œå†™æŠ¥å‘Š <a class="header-anchor" href="#åœºæ™¯-å¤šäººåä½œå†™æŠ¥å‘Š" aria-label="Permalink to &quot;åœºæ™¯ï¼šå¤šäººåä½œå†™æŠ¥å‘Š&quot;">â€‹</a></h4><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å¹¿åœºä¸Šçš„å…¬å‘Šæ¿ï¼ˆStateï¼‰</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> æŠ¥å‘ŠState</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TypedDict</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    è€æ¿éœ€æ±‚: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          # è€æ¿å‘å¸ƒçš„</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    å¸‚åœºæ•°æ®: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">dict</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         # å¸‚åœºéƒ¨è´´çš„</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    æŠ€æœ¯æ–¹æ¡ˆ: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          # æŠ€æœ¯éƒ¨è´´çš„</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    è´¢åŠ¡é¢„ç®—: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">float</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # è´¢åŠ¡éƒ¨è´´çš„</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    æœ€ç»ˆæŠ¥å‘Š: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          # æ±‡æ€»äººå‘˜ç”Ÿæˆçš„</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><strong>æ‰§è¡Œæµç¨‹</strong>ï¼š</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>1. è€æ¿æ¥å¹¿åœºï¼Œè´´äº†ä¸ªéœ€æ±‚ï¼š</span></span>
<span class="line"><span>   State = {&quot;è€æ¿éœ€æ±‚&quot;: &quot;åšä¸ªæ–°äº§å“åˆ†æ&quot;}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>2. å¸‚åœºéƒ¨æ¥å¹¿åœºçœ‹éœ€æ±‚ï¼Œåšå®Œè°ƒç ”åè´´ç»“æœï¼š</span></span>
<span class="line"><span>   State = {</span></span>
<span class="line"><span>       &quot;è€æ¿éœ€æ±‚&quot;: &quot;åšä¸ªæ–°äº§å“åˆ†æ&quot;,</span></span>
<span class="line"><span>       &quot;å¸‚åœºæ•°æ®&quot;: {&quot;ç”¨æˆ·é‡&quot;: 1000, &quot;ç«å“&quot;: [&quot;A&quot;, &quot;B&quot;]}  â† æ–°å¢</span></span>
<span class="line"><span>   }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>3. æŠ€æœ¯éƒ¨æ¥å¹¿åœºçœ‹éœ€æ±‚å’Œå¸‚åœºæ•°æ®ï¼Œè´´æŠ€æœ¯æ–¹æ¡ˆï¼š</span></span>
<span class="line"><span>   State = {</span></span>
<span class="line"><span>       &quot;è€æ¿éœ€æ±‚&quot;: &quot;åšä¸ªæ–°äº§å“åˆ†æ&quot;,</span></span>
<span class="line"><span>       &quot;å¸‚åœºæ•°æ®&quot;: {...},</span></span>
<span class="line"><span>       &quot;æŠ€æœ¯æ–¹æ¡ˆ&quot;: &quot;ä½¿ç”¨ Python + React&quot;  â† æ–°å¢</span></span>
<span class="line"><span>   }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>4. è´¢åŠ¡éƒ¨æ¥å¹¿åœºçœ‹æŠ€æœ¯æ–¹æ¡ˆï¼Œè´´é¢„ç®—ï¼š</span></span>
<span class="line"><span>   State = {</span></span>
<span class="line"><span>       &quot;è€æ¿éœ€æ±‚&quot;: &quot;åšä¸ªæ–°äº§å“åˆ†æ&quot;,</span></span>
<span class="line"><span>       &quot;å¸‚åœºæ•°æ®&quot;: {...},</span></span>
<span class="line"><span>       &quot;æŠ€æœ¯æ–¹æ¡ˆ&quot;: &quot;ä½¿ç”¨ Python + React&quot;,</span></span>
<span class="line"><span>       &quot;è´¢åŠ¡é¢„ç®—&quot;: 100000.0  â† æ–°å¢</span></span>
<span class="line"><span>   }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>5. æ±‡æ€»äººå‘˜æ¥å¹¿åœºçœ‹æ‰€æœ‰ä¿¡æ¯ï¼Œç”Ÿæˆæœ€ç»ˆæŠ¥å‘Šï¼š</span></span>
<span class="line"><span>   State = {</span></span>
<span class="line"><span>       &quot;è€æ¿éœ€æ±‚&quot;: &quot;åšä¸ªæ–°äº§å“åˆ†æ&quot;,</span></span>
<span class="line"><span>       &quot;å¸‚åœºæ•°æ®&quot;: {...},</span></span>
<span class="line"><span>       &quot;æŠ€æœ¯æ–¹æ¡ˆ&quot;: &quot;ä½¿ç”¨ Python + React&quot;,</span></span>
<span class="line"><span>       &quot;è´¢åŠ¡é¢„ç®—&quot;: 100000.0,</span></span>
<span class="line"><span>       &quot;æœ€ç»ˆæŠ¥å‘Š&quot;: &quot;ç»¼åˆå¸‚åœºã€æŠ€æœ¯ã€è´¢åŠ¡çš„å®Œæ•´æ–¹æ¡ˆ&quot;  â† æ–°å¢</span></span>
<span class="line"><span>   }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><p><strong>æ³¨æ„</strong>ï¼š</p><ul><li>æ¯ä¸ªéƒ¨é—¨ï¼ˆèŠ‚ç‚¹ï¼‰éƒ½æ˜¯<strong>ç‹¬ç«‹å·¥ä½œ</strong>çš„</li><li>ä»–ä»¬é€šè¿‡**å¹¿åœºï¼ˆStateï¼‰**åä½œï¼Œä¸éœ€è¦ç›´æ¥æ²Ÿé€š</li><li>å¹¿åœºä¸Šçš„ä¿¡æ¯<strong>è¶Šæ¥è¶Šä¸°å¯Œ</strong>ï¼Œæœ€ç»ˆæ±‡èšæˆå®Œæ•´ç»“æœ</li></ul><hr><p><strong>ä¿¡æ¯å¹¿åœº vs ä¼ ç»Ÿå‡½æ•°è°ƒç”¨</strong></p><p>âŒ <strong>ä¼ ç»Ÿæ–¹å¼ï¼ˆç‚¹å¯¹ç‚¹ä¼ é€’ï¼‰</strong>ï¼š</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åƒæ¥åŠ›èµ›ï¼Œä¿¡æ¯ä¸€ä¸ªäººä¼ ä¸€ä¸ªäºº</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">éœ€æ±‚ </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> è€æ¿.å‘å¸ƒéœ€æ±‚()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">å¸‚åœºæ•°æ® </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> å¸‚åœºéƒ¨.è°ƒç ”(éœ€æ±‚)           </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åªèƒ½çœ‹åˆ°éœ€æ±‚</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">æŠ€æœ¯æ–¹æ¡ˆ </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> æŠ€æœ¯éƒ¨.è®¾è®¡(éœ€æ±‚, å¸‚åœºæ•°æ®)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åªèƒ½çœ‹åˆ°éœ€æ±‚å’Œå¸‚åœºæ•°æ®</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">é¢„ç®— </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> è´¢åŠ¡éƒ¨.è®¡ç®—(æŠ€æœ¯æ–¹æ¡ˆ)           </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åªèƒ½çœ‹åˆ°æŠ€æœ¯æ–¹æ¡ˆ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">æŠ¥å‘Š </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> æ±‡æ€».ç”Ÿæˆ(éœ€æ±‚, å¸‚åœºæ•°æ®, æŠ€æœ¯æ–¹æ¡ˆ, é¢„ç®—)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è¦æ‰‹åŠ¨ä¼ æ‰€æœ‰å‚æ•°ï¼</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>é—®é¢˜ï¼š</p><ul><li>åé¢çš„å‡½æ•°è¦çŸ¥é“å‰é¢æ‰€æœ‰å‡½æ•°çš„å‚æ•°</li><li>æ”¹ä¸€ä¸ªåœ°æ–¹ï¼Œæ‰€æœ‰å‡½æ•°è°ƒç”¨éƒ½è¦æ”¹</li><li>ä¿¡æ¯åªèƒ½å•å‘æµåŠ¨ï¼Œä¸èƒ½å›å¤´çœ‹</li></ul><p>âœ… <strong>State æ–¹å¼ï¼ˆä¿¡æ¯å¹¿åœºï¼‰</strong>ï¼š</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ¯ä¸ªèŠ‚ç‚¹åªè´Ÿè´£ï¼š1. çœ‹å¹¿åœº  2. è´´å…¬å‘Š</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> å¸‚åœºéƒ¨</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    éœ€æ±‚ </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> state[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;è€æ¿éœ€æ±‚&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ä»å¹¿åœºçœ‹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    å¸‚åœºæ•°æ® </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> åšè°ƒç ”(éœ€æ±‚)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;å¸‚åœºæ•°æ®&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: å¸‚åœºæ•°æ®}  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è´´åˆ°å¹¿åœº</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> æŠ€æœ¯éƒ¨</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    éœ€æ±‚ </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> state[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;è€æ¿éœ€æ±‚&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]      </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ä»å¹¿åœºçœ‹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    å¸‚åœº </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> state[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;å¸‚åœºæ•°æ®&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]      </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ä»å¹¿åœºçœ‹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    æ–¹æ¡ˆ </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> è®¾è®¡æ–¹æ¡ˆ(éœ€æ±‚, å¸‚åœº)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æŠ€æœ¯æ–¹æ¡ˆ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: æ–¹æ¡ˆ}  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è´´åˆ°å¹¿åœº</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> è´¢åŠ¡éƒ¨</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    æ–¹æ¡ˆ </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> state[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æŠ€æœ¯æ–¹æ¡ˆ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ä»å¹¿åœºçœ‹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    é¢„ç®— </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> è®¡ç®—é¢„ç®—(æ–¹æ¡ˆ)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;è´¢åŠ¡é¢„ç®—&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: é¢„ç®—}  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è´´åˆ°å¹¿åœº</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> æ±‡æ€»</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state):</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # ä»å¹¿åœºä¸€æ¬¡æ€§çœ‹åˆ°æ‰€æœ‰ä¿¡æ¯ï¼</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    æ‰€æœ‰ä¿¡æ¯ </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> state</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    æŠ¥å‘Š </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ç”ŸæˆæŠ¥å‘Š(æ‰€æœ‰ä¿¡æ¯)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æœ€ç»ˆæŠ¥å‘Š&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: æŠ¥å‘Š}  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è´´åˆ°å¹¿åœº</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>ä¼˜åŠ¿ï¼š</p><ul><li>âœ… æ¯ä¸ªèŠ‚ç‚¹<strong>åªå…³å¿ƒå¹¿åœºï¼ˆstateï¼‰</strong>ï¼Œä¸éœ€è¦çŸ¥é“å…¶ä»–èŠ‚ç‚¹</li><li>âœ… æ·»åŠ æ–°èŠ‚ç‚¹ä¸å½±å“å·²æœ‰èŠ‚ç‚¹</li><li>âœ… ä¿¡æ¯å…¨å±€å¯è§ï¼Œä»»ä½•èŠ‚ç‚¹éƒ½èƒ½å›å¤´çœ‹ä¹‹å‰çš„æ•°æ®</li><li>âœ… è§£è€¦åˆï¼Œæ˜“æ‰©å±•</li></ul><hr><p><strong>ä¿¡æ¯å¹¿åœºçš„&quot;åˆ†åŒºç®¡ç†&quot;ï¼ˆå­å›¾çš„çŠ¶æ€éš”ç¦»ï¼‰</strong></p><p>å½“å¹¿åœºå¤ªå¤§ã€ä¿¡æ¯å¤ªæ‚æ—¶ï¼Œå¯ä»¥è®¾ç«‹<strong>åˆ†åŒºå¹¿åœº</strong>ï¼ˆå­å›¾ï¼‰ã€‚</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>         æ€»å¹¿åœºï¼ˆä¸»å›¾ Stateï¼‰</span></span>
<span class="line"><span>    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span></span>
<span class="line"><span>    â”‚ ç”¨æˆ·éœ€æ±‚: &quot;...&quot;         â”‚</span></span>
<span class="line"><span>    â”‚ å¸‚åœºæŠ¥å‘Š: &quot;...&quot;  â†â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€ æ¥è‡ªå¸‚åœºåˆ†åŒº</span></span>
<span class="line"><span>    â”‚ æŠ€æœ¯æŠ¥å‘Š: &quot;...&quot;  â†â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€ æ¥è‡ªæŠ€æœ¯åˆ†åŒº</span></span>
<span class="line"><span>    â”‚ æœ€ç»ˆæ–¹æ¡ˆ: &quot;...&quot;         â”‚</span></span>
<span class="line"><span>    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span></span>
<span class="line"><span>              â†“          â†“</span></span>
<span class="line"><span>     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span></span>
<span class="line"><span>     â”‚å¸‚åœºåˆ†åŒºå¹¿åœºâ”‚  â”‚æŠ€æœ¯åˆ†åŒºå¹¿åœºâ”‚</span></span>
<span class="line"><span>     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚</span></span>
<span class="line"><span>     â”‚è°ƒç ”æ•°æ®: ..â”‚  â”‚ä»£ç è®¾è®¡: ..â”‚  â† è¿™äº›ç»†èŠ‚</span></span>
<span class="line"><span>     â”‚ç«å“åˆ†æ: ..â”‚  â”‚æ¶æ„å›¾: ...â”‚  â† æ€»å¹¿åœºçœ‹ä¸åˆ°</span></span>
<span class="line"><span>     â”‚ç”¨æˆ·è®¿è°ˆ: ..â”‚  â”‚æŠ€æœ¯é€‰å‹: ..â”‚  â† åªåœ¨åˆ†åŒºå†…</span></span>
<span class="line"><span>     â”‚å¸‚åœºæŠ¥å‘Š: ..â”‚  â”‚æŠ€æœ¯æŠ¥å‘Š: ..â”‚  â† æœ€ç»ˆç»“æœè´´åˆ°æ€»å¹¿åœº</span></span>
<span class="line"><span>     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p><strong>æ¯”å–»</strong>ï¼š</p><ul><li><strong>æ€»å¹¿åœº</strong>ï¼ˆä¸»å›¾ Stateï¼‰ï¼šå¸‚æ”¿åºœå¤§å¹¿åœºï¼Œåªçœ‹å„éƒ¨é—¨çš„æœ€ç»ˆæ±‡æŠ¥</li><li><strong>åˆ†åŒºå¹¿åœº</strong>ï¼ˆå­å›¾ Stateï¼‰ï¼šå„éƒ¨é—¨å†…éƒ¨çš„å°å¹¿åœºï¼Œå¤„ç†ç»†èŠ‚å·¥ä½œ</li></ul><p><strong>å¥½å¤„</strong>ï¼š</p><ol><li><strong>ä¿¡æ¯åˆ†å±‚</strong>ï¼šæ€»å¹¿åœºä¸ä¼šè¢«ç»†èŠ‚æ·¹æ²¡</li><li><strong>å¹¶è¡Œå·¥ä½œ</strong>ï¼šå„åˆ†åŒºå¯ä»¥åŒæ—¶å·¥ä½œï¼Œäº’ä¸å¹²æ‰°</li><li><strong>éšç§ä¿æŠ¤</strong>ï¼šåˆ†åŒºå†…éƒ¨çš„å·¥ä½œç»†èŠ‚ä¸ä¼šæš´éœ²åˆ°æ€»å¹¿åœº</li></ol><hr><p><strong>ç”Ÿæ´»ç±»æ¯”ï¼šåšèœçš„èœè°±æœ¬</strong></p><p>æƒ³è±¡ä½ åœ¨åšä¸€é“å¤æ‚çš„èœï¼š</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># èœè°±çŠ¶æ€ï¼ˆStateï¼‰</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> åšèœState</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    é£Ÿæ: List[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]        </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åˆå§‹è¾“å…¥</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    åˆ‡å¥½çš„èœ: List[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]    </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ç¬¬ä¸€æ­¥äº§ç”Ÿ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    è°ƒå¥½çš„é…±æ–™: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # ç¬¬äºŒæ­¥äº§ç”Ÿ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ç‚’å¥½çš„åŠæˆå“: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      # ç¬¬ä¸‰æ­¥äº§ç”Ÿ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    æœ€ç»ˆæˆå“: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          # æœ€åä¸€æ­¥äº§ç”Ÿ</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>æ‰§è¡Œæµç¨‹ï¼š</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>å¼€å§‹ â†’ æ´—èœåˆ‡èœ â†’ è°ƒé…±æ–™ â†’ ç‚’èœ â†’ è£…ç›˜ â†’ ç»“æŸ</span></span>
<span class="line"><span>      â†“        â†“       â†“      â†“</span></span>
<span class="line"><span>    æ›´æ–°State æ›´æ–°State æ›´æ–°State æ›´æ–°State</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>æ¯ä¸ªèŠ‚ç‚¹ï¼ˆæ­¥éª¤ï¼‰åšä¸¤ä»¶äº‹ï¼š</p><ol><li><strong>è¯»å–</strong> State ä¸­çš„æ•°æ®ï¼ˆçœ‹èœè°±æœ¬ï¼ŒçŸ¥é“ä¸Šä¸€æ­¥åšäº†ä»€ä¹ˆï¼‰</li><li><strong>æ›´æ–°</strong> State ä¸­çš„æ•°æ®ï¼ˆåœ¨èœè°±æœ¬ä¸Šè®°å½•è¿™ä¸€æ­¥çš„ç»“æœï¼‰</li></ol><hr><p><strong>State çš„ä¸‰å¤§ç‰¹æ€§</strong></p><h4 id="_1-ç´¯ç§¯æ€§-accumulative" tabindex="-1">1. ç´¯ç§¯æ€§ï¼ˆAccumulativeï¼‰ <a class="header-anchor" href="#_1-ç´¯ç§¯æ€§-accumulative" aria-label="Permalink to &quot;1. ç´¯ç§¯æ€§ï¼ˆAccumulativeï¼‰&quot;">â€‹</a></h4><p>State åƒæ»šé›ªçƒä¸€æ ·ï¼Œè¶Šæ»šè¶Šå¤§ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½å¾€ä¸ŠåŠ ä¸œè¥¿ã€‚</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åˆå§‹çŠ¶æ€</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">state </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;é£Ÿæ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;é¸¡è›‹&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ç•ªèŒ„&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># èŠ‚ç‚¹1ï¼šæ´—èœåˆ‡èœ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> åˆ‡èœ</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;åˆ‡å¥½çš„èœ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ç•ªèŒ„å—&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;é¸¡è›‹æ¶²&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]}</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ç°åœ¨ state = {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#     &quot;é£Ÿæ&quot;: [&quot;é¸¡è›‹&quot;, &quot;ç•ªèŒ„&quot;],</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#     &quot;åˆ‡å¥½çš„èœ&quot;: [&quot;ç•ªèŒ„å—&quot;, &quot;é¸¡è›‹æ¶²&quot;]  â† æ–°å¢</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># èŠ‚ç‚¹2ï¼šè°ƒé…±æ–™</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> è°ƒé…±æ–™</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;è°ƒå¥½çš„é…±æ–™&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ç›+ç³–+é…±æ²¹&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ç°åœ¨ state = {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#     &quot;é£Ÿæ&quot;: [&quot;é¸¡è›‹&quot;, &quot;ç•ªèŒ„&quot;],</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#     &quot;åˆ‡å¥½çš„èœ&quot;: [&quot;ç•ªèŒ„å—&quot;, &quot;é¸¡è›‹æ¶²&quot;],</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#     &quot;è°ƒå¥½çš„é…±æ–™&quot;: &quot;ç›+ç³–+é…±æ²¹&quot;  â† åˆæ–°å¢</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># èŠ‚ç‚¹3ï¼šç‚’èœ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ç‚’èœ</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    èœ </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> state[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;åˆ‡å¥½çš„èœ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]      </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è¯»å–ä¹‹å‰çš„æ•°æ®</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    é…±æ–™ </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> state[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;è°ƒå¥½çš„é…±æ–™&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è¯»å–ä¹‹å‰çš„æ•°æ®</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æœ€ç»ˆæˆå“&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ç‚’</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">èœ</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> with </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">é…±æ–™</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ç°åœ¨ state = {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#     &quot;é£Ÿæ&quot;: [&quot;é¸¡è›‹&quot;, &quot;ç•ªèŒ„&quot;],</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#     &quot;åˆ‡å¥½çš„èœ&quot;: [&quot;ç•ªèŒ„å—&quot;, &quot;é¸¡è›‹æ¶²&quot;],</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#     &quot;è°ƒå¥½çš„é…±æ–™&quot;: &quot;ç›+ç³–+é…±æ²¹&quot;,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#     &quot;æœ€ç»ˆæˆå“&quot;: &quot;ç‚’ç•ªèŒ„é¸¡è›‹ with è°ƒæ–™&quot;  â† ç»§ç»­æ–°å¢</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><p><strong>å…³é”®ç‚¹</strong>ï¼šæ¯ä¸ªèŠ‚ç‚¹ä¸ä¼šåˆ é™¤ä¹‹å‰çš„æ•°æ®ï¼Œåªä¼šæ·»åŠ æ–°æ•°æ®ã€‚</p><hr><h4 id="_2-å¯è¦†ç›–æ€§-overwritable" tabindex="-1">2. å¯è¦†ç›–æ€§ï¼ˆOverwritableï¼‰ <a class="header-anchor" href="#_2-å¯è¦†ç›–æ€§-overwritable" aria-label="Permalink to &quot;2. å¯è¦†ç›–æ€§ï¼ˆOverwritableï¼‰&quot;">â€‹</a></h4><p>å¦‚æœèŠ‚ç‚¹è¿”å›äº†<strong>åŒåå­—æ®µ</strong>ï¼Œä¼šè¦†ç›–æ—§å€¼ã€‚</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åˆå§‹çŠ¶æ€</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">state </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æ¸©åº¦&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;å¸¸æ¸©&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># èŠ‚ç‚¹1ï¼šåŠ çƒ­</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> åŠ çƒ­</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æ¸©åº¦&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;100åº¦&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># state = {&quot;æ¸©åº¦&quot;: &quot;100åº¦&quot;}  â† è¦†ç›–äº†&quot;å¸¸æ¸©&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># èŠ‚ç‚¹2ï¼šå†·å´</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> å†·å´</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æ¸©åº¦&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;50åº¦&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># state = {&quot;æ¸©åº¦&quot;: &quot;50åº¦&quot;}  â† åˆè¦†ç›–äº†&quot;100åº¦&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p><strong>é»˜è®¤è¡Œä¸º</strong>ï¼šåé¢çš„èŠ‚ç‚¹ä¼šè¦†ç›–å‰é¢èŠ‚ç‚¹çš„åŒåå­—æ®µã€‚</p><p><strong>è‡ªå®šä¹‰è¡Œä¸º</strong>ï¼šä½¿ç”¨ Reducer æ”¹å˜åˆå¹¶æ–¹å¼</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> operator </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> add</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> typing </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Annotated</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> State</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TypedDict</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # é»˜è®¤è¡Œä¸ºï¼šè¦†ç›–</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    æ¸©åº¦: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # è‡ªå®šä¹‰è¡Œä¸ºï¼šç´¯åŠ </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    æ—¥å¿—: Annotated[List[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">], add]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ä½¿ç”¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">state </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æ—¥å¿—&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æ­¥éª¤1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># èŠ‚ç‚¹1</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> èŠ‚ç‚¹1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æ—¥å¿—&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æ­¥éª¤2&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]}</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># state = {&quot;æ—¥å¿—&quot;: [&quot;æ­¥éª¤1&quot;, &quot;æ­¥éª¤2&quot;]}  â† åˆå¹¶ï¼Œä¸æ˜¯è¦†ç›–ï¼</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># èŠ‚ç‚¹2</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> èŠ‚ç‚¹2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æ—¥å¿—&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æ­¥éª¤3&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]}</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># state = {&quot;æ—¥å¿—&quot;: [&quot;æ­¥éª¤1&quot;, &quot;æ­¥éª¤2&quot;, &quot;æ­¥éª¤3&quot;]}  â† ç»§ç»­åˆå¹¶</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><hr><h4 id="_3-èŠ‚ç‚¹é—´é€šä¿¡çš„å”¯ä¸€æ–¹å¼" tabindex="-1">3. èŠ‚ç‚¹é—´é€šä¿¡çš„å”¯ä¸€æ–¹å¼ <a class="header-anchor" href="#_3-èŠ‚ç‚¹é—´é€šä¿¡çš„å”¯ä¸€æ–¹å¼" aria-label="Permalink to &quot;3. èŠ‚ç‚¹é—´é€šä¿¡çš„å”¯ä¸€æ–¹å¼&quot;">â€‹</a></h4><p>åœ¨ LangGraph ä¸­ï¼ŒèŠ‚ç‚¹ä¹‹é—´<strong>ä¸èƒ½ç›´æ¥å¯¹è¯</strong>ï¼Œåªèƒ½é€šè¿‡ State äº¤æµã€‚</p><p>âŒ <strong>é”™è¯¯æ–¹å¼</strong>ï¼ˆèŠ‚ç‚¹æƒ³ç›´æ¥è°ƒç”¨ï¼‰ï¼š</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> èŠ‚ç‚¹A</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> èŠ‚ç‚¹B(state)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># é”™è¯¯ï¼ä¸èƒ½è¿™æ ·</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;data&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: result}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>âœ… <strong>æ­£ç¡®æ–¹å¼</strong>ï¼ˆé€šè¿‡ State é€šä¿¡ï¼‰ï¼š</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># èŠ‚ç‚¹A å†™å…¥ State</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> èŠ‚ç‚¹A</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ä¸­é—´ç»“æœ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Açš„æ•°æ®&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># èŠ‚ç‚¹B ä» State è¯»å–</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> èŠ‚ç‚¹B</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    a_data </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> state[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ä¸­é—´ç»“æœ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è¯»å–Aå†™å…¥çš„æ•°æ®</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æœ€ç»ˆç»“æœ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;å¤„ç†äº†</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">a_data</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åœ¨å›¾ä¸­è¿æ¥</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">graph.add_edge(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;èŠ‚ç‚¹A&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;èŠ‚ç‚¹B&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><strong>ç±»æ¯”</strong>ï¼š</p><ul><li>State = ä¼ çº¸æ¡</li><li>èŠ‚ç‚¹A åœ¨çº¸æ¡ä¸Šå†™ &quot;ä¸­é—´ç»“æœ = XXX&quot;</li><li>èŠ‚ç‚¹B çœ‹çº¸æ¡ï¼ŒçŸ¥é“äº† A çš„ç»“æœ</li></ul><hr><p><strong>State çš„è®¾è®¡åŸåˆ™</strong></p><h4 id="åŸåˆ™-1-åªåŒ…å«å¿…è¦çš„å­—æ®µ" tabindex="-1">åŸåˆ™ 1ï¼šåªåŒ…å«å¿…è¦çš„å­—æ®µ <a class="header-anchor" href="#åŸåˆ™-1-åªåŒ…å«å¿…è¦çš„å­—æ®µ" aria-label="Permalink to &quot;åŸåˆ™ 1ï¼šåªåŒ…å«å¿…è¦çš„å­—æ®µ&quot;">â€‹</a></h4><p>âŒ <strong>ä¸å¥½çš„è®¾è®¡</strong>ï¼ˆå¤ªå¤šæ— ç”¨å­—æ®µï¼‰ï¼š</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> State</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TypedDict</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ç”¨æˆ·è¾“å…¥: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ä¸´æ—¶å˜é‡1: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     # åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹ç”¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ä¸´æ—¶å˜é‡2: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">int</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     # åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹ç”¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ä¸´æ—¶å˜é‡3: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">list</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹ç”¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    è°ƒè¯•ä¿¡æ¯: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      # å¼€å‘æ—¶ç”¨ï¼Œç”Ÿäº§ä¸éœ€è¦</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    æœ€ç»ˆç»“æœ: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>âœ… <strong>å¥½çš„è®¾è®¡</strong>ï¼ˆåªä¿ç•™å¿…è¦çš„ï¼‰ï¼š</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> State</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TypedDict</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ç”¨æˆ·è¾“å…¥: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      # è¾“å…¥</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    æœ€ç»ˆç»“æœ: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      # è¾“å‡º</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # ä¸´æ—¶å˜é‡åœ¨å‡½æ•°å†…éƒ¨å®šä¹‰ï¼Œä¸æ”¾ State</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>æŠ€å·§</strong>ï¼šå¦‚æœæŸä¸ªæ•°æ®åªåœ¨ä¸€ä¸ªèŠ‚ç‚¹å†…éƒ¨ä½¿ç”¨ï¼Œå°±ç”¨å±€éƒ¨å˜é‡ï¼Œä¸è¦æ”¾ Stateã€‚</p><hr><h4 id="åŸåˆ™-2-ç”¨å­å›¾éš”ç¦»å¤æ‚çŠ¶æ€" tabindex="-1">åŸåˆ™ 2ï¼šç”¨å­å›¾éš”ç¦»å¤æ‚çŠ¶æ€ <a class="header-anchor" href="#åŸåˆ™-2-ç”¨å­å›¾éš”ç¦»å¤æ‚çŠ¶æ€" aria-label="Permalink to &quot;åŸåˆ™ 2ï¼šç”¨å­å›¾éš”ç¦»å¤æ‚çŠ¶æ€&quot;">â€‹</a></h4><p>å½“çŠ¶æ€å˜å¾—å¤æ‚æ—¶ï¼Œç”¨å­å›¾æ‹†åˆ†ã€‚</p><p>âŒ <strong>ä¸å¥½çš„è®¾è®¡</strong>ï¼ˆçŠ¶æ€è‡ƒè‚¿ï¼‰ï¼š</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> å·¨å‹State</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TypedDict</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # ä¸»æµç¨‹å­—æ®µ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ç”¨æˆ·è¾“å…¥: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    æœ€ç»ˆç»“æœ: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # å­ä»»åŠ¡Açš„å­—æ®µ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    A_ä¸­é—´æ•°æ®1: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    A_ä¸­é—´æ•°æ®2: List</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    A_ç»“æœ: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # å­ä»»åŠ¡Bçš„å­—æ®µ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    B_ä¸­é—´æ•°æ®1: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">dict</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    B_ä¸­é—´æ•°æ®2: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    B_ç»“æœ: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # å…¨æ··åœ¨ä¸€èµ·ï¼</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>âœ… <strong>å¥½çš„è®¾è®¡</strong>ï¼ˆç”¨å­å›¾åˆ†ç¦»ï¼‰ï¼š</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ä¸»å›¾çŠ¶æ€ï¼ˆåªå…³å¿ƒæœ€ç»ˆç»“æœï¼‰</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ä¸»State</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TypedDict</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ç”¨æˆ·è¾“å…¥: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    A_ç»“æœ: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # æ¥è‡ªå­å›¾A</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    B_ç»“æœ: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # æ¥è‡ªå­å›¾B</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    æœ€ç»ˆç»“æœ: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å­å›¾AçŠ¶æ€ï¼ˆæœ‰è‡ªå·±çš„ä¸­é—´å˜é‡ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> å­å›¾AState</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TypedDict</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ç”¨æˆ·è¾“å…¥: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      # è¾“å…¥</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ä¸­é—´æ•°æ®1: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     # å†…éƒ¨ä½¿ç”¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ä¸­é—´æ•°æ®2: List    </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å†…éƒ¨ä½¿ç”¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    A_ç»“æœ: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # è¾“å‡º</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å­å›¾BçŠ¶æ€ï¼ˆæœ‰è‡ªå·±çš„ä¸­é—´å˜é‡ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> å­å›¾BState</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TypedDict</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ç”¨æˆ·è¾“å…¥: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      # è¾“å…¥</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ä¸­é—´æ•°æ®1: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">dict</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # å†…éƒ¨ä½¿ç”¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ä¸­é—´æ•°æ®2: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     # å†…éƒ¨ä½¿ç”¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    B_ç»“æœ: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # è¾“å‡º</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><hr><h4 id="åŸåˆ™-3-æ˜ç¡®è¾“å…¥å’Œè¾“å‡º" tabindex="-1">åŸåˆ™ 3ï¼šæ˜ç¡®è¾“å…¥å’Œè¾“å‡º <a class="header-anchor" href="#åŸåˆ™-3-æ˜ç¡®è¾“å…¥å’Œè¾“å‡º" aria-label="Permalink to &quot;åŸåˆ™ 3ï¼šæ˜ç¡®è¾“å…¥å’Œè¾“å‡º&quot;">â€‹</a></h4><p>ä½¿ç”¨ <code>output_schema</code> æ˜ç¡®å­å›¾çš„è¾“å‡ºã€‚</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å­å›¾å†…éƒ¨çŠ¶æ€ï¼ˆå®Œæ•´çš„å·¥ä½œç©ºé—´ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> å†…éƒ¨State</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TypedDict</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    è¾“å…¥æ•°æ®: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ä¸´æ—¶æ•°æ®1: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ä¸´æ—¶æ•°æ®2: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">int</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    æœ€ç»ˆç»“æœ: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å­å›¾è¾“å‡ºçŠ¶æ€ï¼ˆåªè¾“å‡ºå¿…è¦çš„ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> è¾“å‡ºState</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TypedDict</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    æœ€ç»ˆç»“æœ: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      # åªè¾“å‡ºè¿™ä¸€ä¸ª</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ„å»ºå­å›¾</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sub_graph </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> StateGraph(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    state_schema</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">å†…éƒ¨State,      </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å†…éƒ¨ç”¨å®Œæ•´çŠ¶æ€</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    output_schema</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">è¾“å‡ºState       </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è¾“å‡ºæ—¶åªè¿”å›æœ€ç»ˆç»“æœ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p><strong>å¥½å¤„</strong>ï¼š</p><ul><li>ä¸»å›¾ä¸ä¼šè¢«å­å›¾çš„ä¸´æ—¶æ•°æ®æ±¡æŸ“</li><li>æ¸…æ™°çš„æ¥å£çº¦å®š</li><li>æ˜“äºæµ‹è¯•å’Œç»´æŠ¤</li></ul><hr><p><strong>State å®æˆ˜ç¤ºä¾‹ï¼šå¤šæ­¥éª¤æ¨ç†</strong></p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> typing </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> TypedDict, List</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langgraph.graph </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> StateGraph, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">START</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">END</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å®šä¹‰çŠ¶æ€</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ReasoningState</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TypedDict</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    é—®é¢˜: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                  # è¾“å…¥</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    æ€è€ƒæ­¥éª¤: List[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]        </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ç´¯ç§¯çš„æ¨ç†è¿‡ç¨‹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    æœ€ç»ˆç­”æ¡ˆ: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">              # è¾“å‡º</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># èŠ‚ç‚¹1ï¼šåˆ†æé—®é¢˜</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> åˆ†æé—®é¢˜</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    é—®é¢˜ </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> state[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;é—®é¢˜&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    åˆ†æ </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;åˆ†æï¼š</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">é—®é¢˜</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">æ¶‰åŠæ•°å­¦è®¡ç®—&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æ€è€ƒæ­¥éª¤&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [åˆ†æ]}  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ç¬¬ä¸€ä¸ªæ€è€ƒæ­¥éª¤</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># èŠ‚ç‚¹2ï¼šåˆ¶å®šæ–¹æ¡ˆ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> åˆ¶å®šæ–¹æ¡ˆ</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    æ–¹æ¡ˆ </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;æ–¹æ¡ˆï¼šå…ˆè®¡ç®—å­é—®é¢˜ï¼Œå†æ±‡æ€»&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æ€è€ƒæ­¥éª¤&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [æ–¹æ¡ˆ]}  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ä¼šå’Œä¹‹å‰çš„åˆå¹¶ï¼ˆå¦‚æœç”¨ Reducerï¼‰</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># èŠ‚ç‚¹3ï¼šæ‰§è¡Œè®¡ç®—</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> æ‰§è¡Œè®¡ç®—</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    æ­¥éª¤ </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> state[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æ€è€ƒæ­¥éª¤&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è¯»å–ä¹‹å‰çš„æ¨ç†</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    è®¡ç®— </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;æ‰§è¡Œï¼š2 + 2 = 4&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;æ€è€ƒæ­¥éª¤&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [è®¡ç®—],</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;æœ€ç»ˆç­”æ¡ˆ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;4&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ„å»ºå›¾</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">graph </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> StateGraph(ReasoningState)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">graph.add_node(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;åˆ†æ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, åˆ†æé—®é¢˜)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">graph.add_node(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æ–¹æ¡ˆ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, åˆ¶å®šæ–¹æ¡ˆ)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">graph.add_node(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;è®¡ç®—&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, æ‰§è¡Œè®¡ç®—)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">graph.add_edge(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">START</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;åˆ†æ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">graph.add_edge(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;åˆ†æ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æ–¹æ¡ˆ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">graph.add_edge(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æ–¹æ¡ˆ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;è®¡ç®—&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">graph.add_edge(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;è®¡ç®—&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">END</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è¿è¡Œ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> graph.compile().invoke({</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;é—®é¢˜&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;2 + 2 = ?&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ç»“æœ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;é—®é¢˜&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;2 + 2 = ?&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;æ€è€ƒæ­¥éª¤&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;åˆ†æï¼š2 + 2 = ?æ¶‰åŠæ•°å­¦è®¡ç®—&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;æ–¹æ¡ˆï¼šå…ˆè®¡ç®—å­é—®é¢˜ï¼Œå†æ±‡æ€»&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;æ‰§è¡Œï¼š2 + 2 = 4&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ],</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;æœ€ç»ˆç­”æ¡ˆ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;4&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br></div></div><hr><p><strong>State è°ƒè¯•æŠ€å·§</strong></p><ol><li><strong>æ‰“å°çŠ¶æ€å˜åŒ–</strong></li></ol><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> è°ƒè¯•èŠ‚ç‚¹</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state):</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;å½“å‰çŠ¶æ€ï¼š</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">state</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # ä½ çš„é€»è¾‘</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æ–°å­—æ®µ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;å€¼&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;è¿”å›æ•°æ®ï¼š</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">result</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> result</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ol start="2"><li><strong>ä½¿ç”¨ LangSmith è¿½è¸ª</strong></li></ol><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åœ¨ LangSmith ä¸­å¯ä»¥çœ‹åˆ°æ¯ä¸ªèŠ‚ç‚¹åçš„ State å¿«ç…§</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å¸®åŠ©ç†è§£æ•°æ®æµåŠ¨</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ol start="3"><li><strong>å•å…ƒæµ‹è¯•èŠ‚ç‚¹</strong></li></ol><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å•ç‹¬æµ‹è¯•èŠ‚ç‚¹å‡½æ•°</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> test_èŠ‚ç‚¹</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">():</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    mock_state </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;è¾“å…¥&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æµ‹è¯•æ•°æ®&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> èŠ‚ç‚¹å‡½æ•°(mock_state)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    assert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æœŸæœ›è¾“å‡º&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;...&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><hr><p><strong>æ€»ç»“ï¼šState çš„æœ¬è´¨</strong></p><ol><li><p><strong>State æ˜¯æ•°æ®çš„æµæ°´è´¦</strong></p><ul><li>è®°å½•ä»å¼€å§‹åˆ°ç°åœ¨çš„æ‰€æœ‰æ•°æ®</li><li>æ¯ä¸ªèŠ‚ç‚¹éƒ½å¾€ä¸Šæ·»åŠ æ–°æ•°æ®</li></ul></li><li><p><strong>State æ˜¯èŠ‚ç‚¹é—´çš„ä¼ çº¸æ¡</strong></p><ul><li>èŠ‚ç‚¹é€šè¿‡ State é€šä¿¡</li><li>å‰ä¸€ä¸ªèŠ‚ç‚¹å†™ï¼Œåä¸€ä¸ªèŠ‚ç‚¹è¯»</li></ul></li><li><p><strong>State éœ€è¦ç²¾å¿ƒè®¾è®¡</strong></p><ul><li>åªåŒ…å«å¿…è¦å­—æ®µ</li><li>å¤æ‚çŠ¶æ€ç”¨å­å›¾éš”ç¦»</li><li>ç”¨ output_schema æ§åˆ¶è¾“å‡º</li></ul></li><li><p><strong>State æ”¯æŒçµæ´»çš„åˆå¹¶ç­–ç•¥</strong></p><ul><li>é»˜è®¤è¦†ç›–</li><li>ç”¨ Reducer è‡ªå®šä¹‰ï¼ˆå¦‚åˆ—è¡¨åˆå¹¶ï¼‰</li></ul></li></ol><p><strong>è®°ä½è¿™ä¸ªå…¬å¼</strong>ï¼š</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>LangGraph = èŠ‚ç‚¹ï¼ˆå¤„ç†é€»è¾‘ï¼‰ + è¾¹ï¼ˆæ‰§è¡Œé¡ºåºï¼‰ + Stateï¼ˆæ•°æ®æµåŠ¨ï¼‰</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>State æ˜¯ä¸‰è€…ä¸­æœ€æ ¸å¿ƒçš„ï¼Œç†è§£äº† Stateï¼Œå°±ç†è§£äº† LangGraph çš„è¿ä½œåŸç†ï¼</p>`,321)])])}const c=i(p,[["render",e]]);export{g as __pageData,c as default};
