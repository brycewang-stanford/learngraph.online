import{_ as i,c as a,o as n,ag as l}from"./chunks/framework.Cf3FQAeg.js";const o=JSON.parse('{"title":"LangGraph æœ€ç®€å›¾ï¼ˆSimple Graphï¼‰è¯¦ç»†è§£è¯»","description":"","frontmatter":{},"headers":[],"relativePath":"module-1/1.1-simple-graph-è¯¦ç»†è§£è¯».md","filePath":"module-1/1.1-simple-graph-è¯¦ç»†è§£è¯».md","lastUpdated":1760223716000}'),e={name:"module-1/1.1-simple-graph-è¯¦ç»†è§£è¯».md"};function p(t,s,h,k,r,d){return n(),a("div",null,[...s[0]||(s[0]=[l(`<h1 id="langgraph-æœ€ç®€å›¾-simple-graph-è¯¦ç»†è§£è¯»" tabindex="-1">LangGraph æœ€ç®€å›¾ï¼ˆSimple Graphï¼‰è¯¦ç»†è§£è¯» <a class="header-anchor" href="#langgraph-æœ€ç®€å›¾-simple-graph-è¯¦ç»†è§£è¯»" aria-label="Permalink to &quot;LangGraph æœ€ç®€å›¾ï¼ˆSimple Graphï¼‰è¯¦ç»†è§£è¯»&quot;">â€‹</a></h1><h2 id="ğŸ“š-æ¦‚è¿°" tabindex="-1">ğŸ“š æ¦‚è¿° <a class="header-anchor" href="#ğŸ“š-æ¦‚è¿°" aria-label="Permalink to &quot;ğŸ“š æ¦‚è¿°&quot;">â€‹</a></h2><p>æœ¬æ–‡æ¡£è¯¦ç»†è§£è¯» LangGraph çš„**æœ€ç®€å›¾ï¼ˆSimple Graphï¼‰**æ•™ç¨‹ã€‚è¿™æ˜¯ LangGraph å…¥é—¨çš„ç¬¬ä¸€è¯¾ï¼Œé€šè¿‡æ„å»ºä¸€ä¸ªåŒ…å« 3 ä¸ªèŠ‚ç‚¹å’Œ 1 ä¸ªæ¡ä»¶è¾¹çš„ç®€å•å›¾ï¼Œå¸®åŠ©æ‚¨æŒæ¡ LangGraph çš„æ ¸å¿ƒæ¦‚å¿µå’ŒåŸºç¡€æ¶æ„ã€‚</p><p><strong>å­¦ä¹ ç›®æ ‡ï¼š</strong></p><ul><li>ç†è§£ LangGraph çš„æ ¸å¿ƒç»„ä»¶ï¼ˆStateã€Nodeã€Edgeï¼‰</li><li>æŒæ¡å›¾çš„æ„å»ºå’Œæ‰§è¡Œæµç¨‹</li><li>å­¦ä¹ æ¡ä»¶è¾¹çš„ä½¿ç”¨æ–¹æ³•</li><li>ç†Ÿæ‚‰ Python ç±»å‹æç¤ºå’Œ TypedDict</li></ul><hr><h2 id="ğŸ¯-æ ¸å¿ƒæ¦‚å¿µ" tabindex="-1">ğŸ¯ æ ¸å¿ƒæ¦‚å¿µ <a class="header-anchor" href="#ğŸ¯-æ ¸å¿ƒæ¦‚å¿µ" aria-label="Permalink to &quot;ğŸ¯ æ ¸å¿ƒæ¦‚å¿µ&quot;">â€‹</a></h2><h3 id="ä»€ä¹ˆæ˜¯-langgraph" tabindex="-1">ä»€ä¹ˆæ˜¯ LangGraphï¼Ÿ <a class="header-anchor" href="#ä»€ä¹ˆæ˜¯-langgraph" aria-label="Permalink to &quot;ä»€ä¹ˆæ˜¯ LangGraphï¼Ÿ&quot;">â€‹</a></h3><p>LangGraph æ˜¯ä¸€ä¸ªç”¨äºæ„å»º<strong>æœ‰çŠ¶æ€çš„å¤šæ­¥éª¤åº”ç”¨</strong>çš„æ¡†æ¶ã€‚å®ƒå°†åº”ç”¨ç¨‹åºå»ºæ¨¡ä¸ºä¸€ä¸ª<strong>å›¾ï¼ˆGraphï¼‰</strong>ï¼Œå…¶ä¸­ï¼š</p><ul><li><strong>èŠ‚ç‚¹ï¼ˆNodeï¼‰</strong>ï¼šæ‰§è¡Œå…·ä½“æ“ä½œçš„å‡½æ•°</li><li><strong>è¾¹ï¼ˆEdgeï¼‰</strong>ï¼šå®šä¹‰æ‰§è¡Œæµç¨‹çš„è·¯å¾„</li><li><strong>çŠ¶æ€ï¼ˆStateï¼‰</strong>ï¼šåœ¨èŠ‚ç‚¹é—´ä¼ é€’çš„æ•°æ®</li></ul><h3 id="å›¾çš„åŸºæœ¬ç»“æ„" tabindex="-1">å›¾çš„åŸºæœ¬ç»“æ„ <a class="header-anchor" href="#å›¾çš„åŸºæœ¬ç»“æ„" aria-label="Permalink to &quot;å›¾çš„åŸºæœ¬ç»“æ„&quot;">â€‹</a></h3><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>START â†’ Node 1 â†’ [æ¡ä»¶åˆ¤æ–­] â†’ Node 2 æˆ– Node 3 â†’ END</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><strong>ç‰¹ç‚¹ï¼š</strong></p><ul><li><strong>æµç¨‹æ§åˆ¶</strong>ï¼šé€šè¿‡è¾¹æ§åˆ¶èŠ‚ç‚¹çš„æ‰§è¡Œé¡ºåº</li><li><strong>çŠ¶æ€ç®¡ç†</strong>ï¼šæ¯ä¸ªèŠ‚ç‚¹å¯ä»¥è¯»å–å’Œæ›´æ–°çŠ¶æ€</li><li><strong>åŠ¨æ€è·¯ç”±</strong>ï¼šæ¡ä»¶è¾¹æ ¹æ®çŠ¶æ€åŠ¨æ€é€‰æ‹©ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</li></ul><hr><h2 id="ğŸ­-å®æˆ˜æ¡ˆä¾‹-æƒ…ç»ªç”Ÿæˆå™¨" tabindex="-1">ğŸ­ å®æˆ˜æ¡ˆä¾‹ï¼šæƒ…ç»ªç”Ÿæˆå™¨ <a class="header-anchor" href="#ğŸ­-å®æˆ˜æ¡ˆä¾‹-æƒ…ç»ªç”Ÿæˆå™¨" aria-label="Permalink to &quot;ğŸ­ å®æˆ˜æ¡ˆä¾‹ï¼šæƒ…ç»ªç”Ÿæˆå™¨&quot;">â€‹</a></h2><p>æˆ‘ä»¬å°†æ„å»ºä¸€ä¸ªç®€å•çš„æƒ…ç»ªç”Ÿæˆå™¨ï¼Œæ¼”ç¤º LangGraph çš„å®Œæ•´å·¥ä½œæµç¨‹ï¼š</p><p><strong>éœ€æ±‚ï¼š</strong></p><ol><li>æ¥æ”¶ç”¨æˆ·è¾“å…¥ï¼ˆå¦‚ &quot;Hi, this is Lance.&quot;ï¼‰</li><li>æ·»åŠ  &quot;I am&quot; åˆ°æ–‡æœ¬</li><li>éšæœºé€‰æ‹©æ·»åŠ  &quot;happy!&quot; æˆ– &quot;sad!&quot;</li></ol><h3 id="ç³»ç»Ÿæ¶æ„å›¾" tabindex="-1">ç³»ç»Ÿæ¶æ„å›¾ <a class="header-anchor" href="#ç³»ç»Ÿæ¶æ„å›¾" aria-label="Permalink to &quot;ç³»ç»Ÿæ¶æ„å›¾&quot;">â€‹</a></h3><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>ç”¨æˆ·è¾“å…¥: &quot;Hi, this is Lance.&quot;</span></span>
<span class="line"><span>        â†“</span></span>
<span class="line"><span>    [START]</span></span>
<span class="line"><span>        â†“</span></span>
<span class="line"><span>    [Node 1] æ·»åŠ  &quot;I am&quot;</span></span>
<span class="line"><span>        â†“</span></span>
<span class="line"><span>  [æ¡ä»¶è¾¹: decide_mood]</span></span>
<span class="line"><span>        â†“</span></span>
<span class="line"><span>   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span></span>
<span class="line"><span>   â†“            â†“</span></span>
<span class="line"><span>[Node 2]     [Node 3]</span></span>
<span class="line"><span>æ·»åŠ  &quot;happy!&quot;  æ·»åŠ  &quot;sad!&quot;</span></span>
<span class="line"><span>   â†“            â†“</span></span>
<span class="line"><span>   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜</span></span>
<span class="line"><span>        â†“</span></span>
<span class="line"><span>      [END]</span></span>
<span class="line"><span>        â†“</span></span>
<span class="line"><span>è¾“å‡º: &quot;Hi, this is Lance. I am happy!&quot;</span></span>
<span class="line"><span>     æˆ– &quot;Hi, this is Lance. I am sad!&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><hr><h2 id="ğŸ”§-ä»£ç å®ç°è¯¦è§£" tabindex="-1">ğŸ”§ ä»£ç å®ç°è¯¦è§£ <a class="header-anchor" href="#ğŸ”§-ä»£ç å®ç°è¯¦è§£" aria-label="Permalink to &quot;ğŸ”§ ä»£ç å®ç°è¯¦è§£&quot;">â€‹</a></h2><h3 id="_1-ç¯å¢ƒå‡†å¤‡" tabindex="-1">1. ç¯å¢ƒå‡†å¤‡ <a class="header-anchor" href="#_1-ç¯å¢ƒå‡†å¤‡" aria-label="Permalink to &quot;1. ç¯å¢ƒå‡†å¤‡&quot;">â€‹</a></h3><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%%</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">capture </span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;">--</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">no</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">stderr</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">pip install </span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;">--</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">quiet </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">U langgraph</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>è¯´æ˜ï¼š</strong></p><ul><li><code>%%capture --no-stderr</code>ï¼šJupyter é­”æ³•å‘½ä»¤ï¼Œéšè—å®‰è£…è¾“å‡º</li><li><code>--quiet</code>ï¼šé™é»˜å®‰è£…æ¨¡å¼</li><li><code>-U</code>ï¼šå‡çº§åˆ°æœ€æ–°ç‰ˆæœ¬</li></ul><hr><h3 id="_2-å®šä¹‰çŠ¶æ€-state" tabindex="-1">2. å®šä¹‰çŠ¶æ€ï¼ˆStateï¼‰ <a class="header-anchor" href="#_2-å®šä¹‰çŠ¶æ€-state" aria-label="Permalink to &quot;2. å®šä¹‰çŠ¶æ€ï¼ˆStateï¼‰&quot;">â€‹</a></h3><p>çŠ¶æ€æ˜¯ LangGraph çš„<strong>æ ¸å¿ƒæ•°æ®ç»“æ„</strong>ï¼Œè´¯ç©¿æ•´ä¸ªå›¾çš„æ‰§è¡Œè¿‡ç¨‹ã€‚</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> typing_extensions </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> TypedDict</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> State</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TypedDict</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    graph_state: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="python-çŸ¥è¯†ç‚¹-typeddict" tabindex="-1">Python çŸ¥è¯†ç‚¹ï¼šTypedDict <a class="header-anchor" href="#python-çŸ¥è¯†ç‚¹-typeddict" aria-label="Permalink to &quot;Python çŸ¥è¯†ç‚¹ï¼šTypedDict&quot;">â€‹</a></h4><p><code>TypedDict</code> æ˜¯ Python 3.8+ å¼•å…¥çš„ç±»å‹æç¤ºå·¥å…·ï¼Œç”¨äºå®šä¹‰å­—å…¸çš„ç»“æ„ï¼š</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ä¼ ç»Ÿå­—å…¸ - æ— ç±»å‹æç¤º</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">state </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;graph_state&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Hello&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># TypedDict - æœ‰ç±»å‹æç¤º</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> State</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TypedDict</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    graph_state: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # æ˜ç¡®æŒ‡å®šå­—æ®µç±»å‹</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">state: State </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;graph_state&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Hello&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><strong>ä¼˜åŠ¿ï¼š</strong></p><ol><li><strong>IDE æ”¯æŒ</strong>ï¼šè‡ªåŠ¨è¡¥å…¨å’Œç±»å‹æ£€æŸ¥</li><li><strong>æ–‡æ¡£ä½œç”¨</strong>ï¼šæ¸…æ™°å±•ç¤ºæ•°æ®ç»“æ„</li><li><strong>é”™è¯¯é¢„é˜²</strong>ï¼šé™æ€ç±»å‹æ£€æŸ¥å‘ç°æ½œåœ¨é”™è¯¯</li></ol><p><strong>LangGraph ä¸­çš„ä½œç”¨ï¼š</strong></p><ul><li><code>State</code> å®šä¹‰äº†å›¾ä¸­æ‰€æœ‰èŠ‚ç‚¹å…±äº«çš„æ•°æ®ç»“æ„</li><li>æ¯ä¸ªèŠ‚ç‚¹éƒ½å¯ä»¥è®¿é—®å’Œä¿®æ”¹ <code>State</code> ä¸­çš„å­—æ®µ</li><li>æä¾›äº†ç±»å‹å®‰å…¨çš„çŠ¶æ€ç®¡ç†</li></ul><hr><h3 id="_3-å®šä¹‰èŠ‚ç‚¹-nodes" tabindex="-1">3. å®šä¹‰èŠ‚ç‚¹ï¼ˆNodesï¼‰ <a class="header-anchor" href="#_3-å®šä¹‰èŠ‚ç‚¹-nodes" aria-label="Permalink to &quot;3. å®šä¹‰èŠ‚ç‚¹ï¼ˆNodesï¼‰&quot;">â€‹</a></h3><p>èŠ‚ç‚¹æ˜¯æ‰§è¡Œå…·ä½“æ“ä½œçš„ <strong>Python å‡½æ•°</strong>ã€‚</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> node_1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state):</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;---Node 1---&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;graph_state&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: state[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;graph_state&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot; I am&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> node_2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state):</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;---Node 2---&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;graph_state&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: state[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;graph_state&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot; happy!&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> node_3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state):</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;---Node 3---&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;graph_state&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: state[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;graph_state&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot; sad!&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="èŠ‚ç‚¹çš„æ ¸å¿ƒç‰¹æ€§" tabindex="-1">èŠ‚ç‚¹çš„æ ¸å¿ƒç‰¹æ€§ <a class="header-anchor" href="#èŠ‚ç‚¹çš„æ ¸å¿ƒç‰¹æ€§" aria-label="Permalink to &quot;èŠ‚ç‚¹çš„æ ¸å¿ƒç‰¹æ€§&quot;">â€‹</a></h4><p><strong>1. è¾“å…¥å‚æ•°</strong></p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> node_1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state):</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    #         ^^^^^</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    #         å¿…é¡»æ¥æ”¶ state å‚æ•°</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å½“å‰çŠ¶æ€ï¼ˆ<code>State</code> ç±»å‹ï¼‰</li><li>å¯ä»¥é€šè¿‡ <code>state[&#39;graph_state&#39;]</code> è®¿é—®çŠ¶æ€å­—æ®µ</li></ul><p><strong>2. è¿”å›å€¼</strong></p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;graph_state&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: state[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;graph_state&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot; I am&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#      è¿”å›ä¸€ä¸ªå­—å…¸ï¼Œæ›´æ–°çŠ¶æ€ä¸­çš„å­—æ®µ</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>è¿”å›çš„å­—å…¸ä¼š<strong>æ›´æ–°</strong>çŠ¶æ€</li><li>é»˜è®¤è¡Œä¸ºï¼š<strong>è¦†ç›–</strong>åŸæœ‰å€¼ï¼ˆéåˆå¹¶ï¼‰</li></ul><p><strong>3. çŠ¶æ€æ›´æ–°æœºåˆ¶</strong></p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ‰§è¡Œå‰ï¼šstate = {&quot;graph_state&quot;: &quot;Hi, this is Lance.&quot;}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">node_1(state)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ‰§è¡Œåï¼šstate = {&quot;graph_state&quot;: &quot;Hi, this is Lance. I am&quot;}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>é‡è¦</strong>ï¼šè¿”å›çš„å€¼ä¼š<strong>å®Œå…¨æ›¿æ¢</strong>å¯¹åº”å­—æ®µçš„åŸå€¼ï¼Œé™¤éä½¿ç”¨äº† Reducerï¼ˆåç»­è¯¾ç¨‹è®²è§£ï¼‰ã€‚</p><hr><h3 id="_4-å®šä¹‰è¾¹-edges" tabindex="-1">4. å®šä¹‰è¾¹ï¼ˆEdgesï¼‰ <a class="header-anchor" href="#_4-å®šä¹‰è¾¹-edges" aria-label="Permalink to &quot;4. å®šä¹‰è¾¹ï¼ˆEdgesï¼‰&quot;">â€‹</a></h3><p>è¾¹å®šä¹‰äº†èŠ‚ç‚¹ä¹‹é—´çš„è¿æ¥å…³ç³»ï¼Œåˆ†ä¸ºä¸¤ç§ç±»å‹ï¼š</p><h4 id="æ™®é€šè¾¹-normal-edge" tabindex="-1">æ™®é€šè¾¹ï¼ˆNormal Edgeï¼‰ <a class="header-anchor" href="#æ™®é€šè¾¹-normal-edge" aria-label="Permalink to &quot;æ™®é€šè¾¹ï¼ˆNormal Edgeï¼‰&quot;">â€‹</a></h4><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">builder.add_edge(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">START</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;node_1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li><strong>å›ºå®šè·¯ç”±</strong>ï¼šæ€»æ˜¯ä»èµ·ç‚¹æµå‘ç»ˆç‚¹</li><li><strong>æ— æ¡ä»¶æ‰§è¡Œ</strong>ï¼šæ¯æ¬¡éƒ½ä¼šèµ°è¿™æ¡è·¯å¾„</li></ul><h4 id="æ¡ä»¶è¾¹-conditional-edge" tabindex="-1">æ¡ä»¶è¾¹ï¼ˆConditional Edgeï¼‰ <a class="header-anchor" href="#æ¡ä»¶è¾¹-conditional-edge" aria-label="Permalink to &quot;æ¡ä»¶è¾¹ï¼ˆConditional Edgeï¼‰&quot;">â€‹</a></h4><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> random</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> typing </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Literal</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> decide_mood</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state) -&gt; Literal[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;node_2&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;node_3&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # ä»çŠ¶æ€ä¸­è·å–æ•°æ®ï¼ˆè¿™é‡Œæœªä½¿ç”¨ï¼Œä»…ä½œç¤ºä¾‹ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    user_input </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> state[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;graph_state&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # 50/50 éšæœºé€‰æ‹©</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> random.random() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;node_2&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 50% æ¦‚ç‡è¿”å› Node 2</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;node_3&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      # 50% æ¦‚ç‡è¿”å› Node 3</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h4 id="python-çŸ¥è¯†ç‚¹-literal-ç±»å‹" tabindex="-1">Python çŸ¥è¯†ç‚¹ï¼šLiteral ç±»å‹ <a class="header-anchor" href="#python-çŸ¥è¯†ç‚¹-literal-ç±»å‹" aria-label="Permalink to &quot;Python çŸ¥è¯†ç‚¹ï¼šLiteral ç±»å‹&quot;">â€‹</a></h4><p><code>Literal</code> æ˜¯ Python 3.8+ çš„é«˜çº§ç±»å‹æç¤ºï¼Œç”¨äºé™å®šè¿”å›å€¼çš„å¯èƒ½å–å€¼ï¼š</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> typing </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Literal</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> decide_mood</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state) -&gt; Literal[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;node_2&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;node_3&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    #                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    #                     è¿”å›å€¼åªèƒ½æ˜¯ &quot;node_2&quot; æˆ– &quot;node_3&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;node_2&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # âœ… åˆæ³•</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # return &quot;node_4&quot;  # âŒ ç±»å‹æ£€æŸ¥ä¼šæŠ¥é”™</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><strong>ä¼˜åŠ¿ï¼š</strong></p><ol><li><strong>ç±»å‹å®‰å…¨</strong>ï¼šIDE ä¼šæ£€æŸ¥è¿”å›å€¼æ˜¯å¦åˆæ³•</li><li><strong>è‡ªåŠ¨è¡¥å…¨</strong>ï¼šç¼–è¾‘å™¨ä¼šæç¤ºå¯ç”¨é€‰é¡¹</li><li><strong>æ–‡æ¡£ä½œç”¨</strong>ï¼šæ¸…æ™°å±•ç¤ºæ‰€æœ‰å¯èƒ½çš„è·¯å¾„</li></ol><h4 id="æ¡ä»¶è¾¹çš„å·¥ä½œåŸç†" tabindex="-1">æ¡ä»¶è¾¹çš„å·¥ä½œåŸç† <a class="header-anchor" href="#æ¡ä»¶è¾¹çš„å·¥ä½œåŸç†" aria-label="Permalink to &quot;æ¡ä»¶è¾¹çš„å·¥ä½œåŸç†&quot;">â€‹</a></h4><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ¡ä»¶å‡½æ•°çš„èŒè´£</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> decide_mood</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state) -&gt; Literal[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;node_2&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;node_3&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # 1. è¯»å–çŠ¶æ€</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    user_input </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> state[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;graph_state&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # 2. æ‰§è¡Œé€»è¾‘åˆ¤æ–­</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> some_condition:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;node_2&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # è·¯ç”±åˆ°èŠ‚ç‚¹ 2</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;node_3&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # è·¯ç”±åˆ°èŠ‚ç‚¹ 3</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><strong>æ‰§è¡Œæµç¨‹ï¼š</strong></p><ol><li>èŠ‚ç‚¹ 1 æ‰§è¡Œå®Œæ¯•</li><li>LangGraph è°ƒç”¨ <code>decide_mood(state)</code></li><li>æ ¹æ®è¿”å›å€¼ï¼ˆ&quot;node_2&quot; æˆ– &quot;node_3&quot;ï¼‰é€‰æ‹©ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</li><li>æ‰§è¡Œè¢«é€‰ä¸­çš„èŠ‚ç‚¹</li></ol><hr><h3 id="_5-æ„å»ºå›¾-graph-construction" tabindex="-1">5. æ„å»ºå›¾ï¼ˆGraph Constructionï¼‰ <a class="header-anchor" href="#_5-æ„å»ºå›¾-graph-construction" aria-label="Permalink to &quot;5. æ„å»ºå›¾ï¼ˆGraph Constructionï¼‰&quot;">â€‹</a></h3><p>ç°åœ¨å°†æ‰€æœ‰ç»„ä»¶ç»„è£…æˆå®Œæ•´çš„å›¾ã€‚</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> IPython.display </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Image, display</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langgraph.graph </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> StateGraph, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">START</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">END</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 1. åˆå§‹åŒ–å›¾æ„å»ºå™¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">builder </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> StateGraph(State)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 2. æ·»åŠ èŠ‚ç‚¹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">builder.add_node(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;node_1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, node_1)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">builder.add_node(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;node_2&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, node_2)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">builder.add_node(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;node_3&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, node_3)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 3. æ·»åŠ è¾¹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">builder.add_edge(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">START</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;node_1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)                    </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å¼€å§‹ â†’ èŠ‚ç‚¹1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">builder.add_conditional_edges(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;node_1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, decide_mood) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># èŠ‚ç‚¹1 â†’ æ¡ä»¶åˆ¤æ–­</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">builder.add_edge(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;node_2&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">END</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)                      </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># èŠ‚ç‚¹2 â†’ ç»“æŸ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">builder.add_edge(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;node_3&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">END</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)                      </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># èŠ‚ç‚¹3 â†’ ç»“æŸ</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 4. ç¼–è¯‘å›¾</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">graph </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> builder.compile()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 5. å¯è§†åŒ–</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">display(Image(graph.get_graph().draw_mermaid_png()))</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h4 id="langgraph-æ ¸å¿ƒ-api-è¯¦è§£" tabindex="-1">LangGraph æ ¸å¿ƒ API è¯¦è§£ <a class="header-anchor" href="#langgraph-æ ¸å¿ƒ-api-è¯¦è§£" aria-label="Permalink to &quot;LangGraph æ ¸å¿ƒ API è¯¦è§£&quot;">â€‹</a></h4><p><strong>1. StateGraph</strong></p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">builder </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> StateGraph(State)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#                    ^^^^^</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#                    ä¼ å…¥çŠ¶æ€ç±»å‹</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>å›¾çš„æ„å»ºå™¨ï¼Œç”¨äºæ·»åŠ èŠ‚ç‚¹å’Œè¾¹</li><li>æ³›å‹ç±»ï¼Œæ¥å— <code>State</code> ç±»å‹å‚æ•°</li><li>ç¡®ä¿æ‰€æœ‰èŠ‚ç‚¹ä½¿ç”¨ç›¸åŒçš„çŠ¶æ€ç»“æ„</li></ul><p><strong>2. add_node</strong></p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">builder.add_node(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;node_1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, node_1)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#                ^^^^^^^^  ^^^^^^</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#                èŠ‚ç‚¹åç§°   èŠ‚ç‚¹å‡½æ•°</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>æ³¨å†ŒèŠ‚ç‚¹åˆ°å›¾ä¸­</li><li>èŠ‚ç‚¹åç§°ç”¨äºè¾¹çš„è¿æ¥ï¼ˆå­—ç¬¦ä¸²å½¢å¼ï¼‰</li><li>èŠ‚ç‚¹å‡½æ•°æ˜¯å®é™…æ‰§è¡Œçš„é€»è¾‘</li></ul><p><strong>3. add_edge</strong></p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">builder.add_edge(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">START</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;node_1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#                ^^^^^  ^^^^^^^^</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#                èµ·ç‚¹    ç»ˆç‚¹</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>æ·»åŠ å›ºå®šè·¯ç”±çš„è¾¹</li><li><code>START</code> å’Œ <code>END</code> æ˜¯ç‰¹æ®ŠèŠ‚ç‚¹ï¼ˆåç»­è¯´æ˜ï¼‰</li></ul><p><strong>4. add_conditional_edges</strong></p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">builder.add_conditional_edges(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;node_1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, decide_mood)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#                             ^^^^^^^^  ^^^^^^^^^^^</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#                             èµ·ç‚¹èŠ‚ç‚¹   æ¡ä»¶å‡½æ•°</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>æ·»åŠ æ¡ä»¶è·¯ç”±çš„è¾¹</li><li>æ¡ä»¶å‡½æ•°è¿”å›ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„åç§°</li><li>è‡ªåŠ¨æ ¹æ®è¿”å›å€¼è·¯ç”±åˆ°å¯¹åº”èŠ‚ç‚¹</li></ul><p><strong>5. compile</strong></p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">graph </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> builder.compile()</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li>å°†æ„å»ºå™¨è½¬æ¢ä¸ºå¯æ‰§è¡Œçš„å›¾</li><li>æ‰§è¡ŒåŸºæœ¬éªŒè¯ï¼ˆå¦‚æ£€æŸ¥è¾¹çš„è¿æ¥æ˜¯å¦æœ‰æ•ˆï¼‰</li><li>è¿”å› <code>CompiledGraph</code> å¯¹è±¡ï¼Œå¯ä»¥è°ƒç”¨ <code>invoke</code> ç­‰æ–¹æ³•</li></ul><h4 id="ç‰¹æ®ŠèŠ‚ç‚¹-start-å’Œ-end" tabindex="-1">ç‰¹æ®ŠèŠ‚ç‚¹ï¼šSTART å’Œ END <a class="header-anchor" href="#ç‰¹æ®ŠèŠ‚ç‚¹-start-å’Œ-end" aria-label="Permalink to &quot;ç‰¹æ®ŠèŠ‚ç‚¹ï¼šSTART å’Œ END&quot;">â€‹</a></h4><p><strong>START èŠ‚ç‚¹</strong></p><ul><li>å›¾çš„å…¥å£ç‚¹</li><li>æ¥æ”¶ç”¨æˆ·è¾“å…¥</li><li>å°†è¾“å…¥ä¼ é€’ç»™ç¬¬ä¸€ä¸ªèŠ‚ç‚¹</li></ul><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">builder.add_edge(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">START</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;node_1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ç”¨æˆ·è¾“å…¥ â†’ node_1</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>END èŠ‚ç‚¹</strong></p><ul><li>å›¾çš„å‡ºå£ç‚¹</li><li>æ ‡è®°æ‰§è¡Œç»“æŸ</li><li>è¿”å›æœ€ç»ˆçŠ¶æ€</li></ul><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">builder.add_edge(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;node_2&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">END</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># node_2 â†’ ç»“æŸå¹¶è¿”å›ç»“æœ</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="å¯è§†åŒ–å›¾ç»“æ„" tabindex="-1">å¯è§†åŒ–å›¾ç»“æ„ <a class="header-anchor" href="#å¯è§†åŒ–å›¾ç»“æ„" aria-label="Permalink to &quot;å¯è§†åŒ–å›¾ç»“æ„&quot;">â€‹</a></h4><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">display(Image(graph.get_graph().draw_mermaid_png()))</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>ç”Ÿæˆ Mermaid å›¾ï¼Œæ˜¾ç¤ºå›¾çš„ç»“æ„ï¼š</p><ul><li>èŠ‚ç‚¹ï¼šçŸ©å½¢æ¡†</li><li>è¾¹ï¼šç®­å¤´è¿æ¥</li><li>æ¡ä»¶è¾¹ï¼šè±å½¢åˆ¤æ–­æ¡†</li></ul><hr><h3 id="_6-æ‰§è¡Œå›¾-graph-invocation" tabindex="-1">6. æ‰§è¡Œå›¾ï¼ˆGraph Invocationï¼‰ <a class="header-anchor" href="#_6-æ‰§è¡Œå›¾-graph-invocation" aria-label="Permalink to &quot;6. æ‰§è¡Œå›¾ï¼ˆGraph Invocationï¼‰&quot;">â€‹</a></h3><p>å›¾å®ç°äº† LangChain çš„ <strong>Runnable åè®®</strong>ï¼Œæä¾›ç»Ÿä¸€çš„æ‰§è¡Œæ¥å£ã€‚</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">graph.invoke({</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;graph_state&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Hi, this is Lance.&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><strong>è¾“å‡ºç¤ºä¾‹ï¼š</strong></p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>---Node 1---</span></span>
<span class="line"><span>---Node 3---</span></span>
<span class="line"><span>{&#39;graph_state&#39;: &#39;Hi, this is Lance. I am sad!&#39;}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="invoke-æ–¹æ³•è¯¦è§£" tabindex="-1">invoke æ–¹æ³•è¯¦è§£ <a class="header-anchor" href="#invoke-æ–¹æ³•è¯¦è§£" aria-label="Permalink to &quot;invoke æ–¹æ³•è¯¦è§£&quot;">â€‹</a></h4><p><strong>1. è¾“å…¥å‚æ•°</strong></p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">graph.invoke({</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;graph_state&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Hi, this is Lance.&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#            åˆå§‹çŠ¶æ€ï¼ˆå­—å…¸å½¢å¼ï¼‰</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>è¾“å…¥å¿…é¡»æ˜¯å­—å…¸</li><li>å­—æ®µå¿…é¡»ä¸ <code>State</code> å®šä¹‰åŒ¹é…</li><li>è®¾ç½®å›¾çš„åˆå§‹çŠ¶æ€</li></ul><p><strong>2. æ‰§è¡Œæµç¨‹</strong></p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 1. åˆå§‹çŠ¶æ€</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">state </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;graph_state&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Hi, this is Lance.&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 2. START â†’ node_1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">state </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> node_1(state)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># {&quot;graph_state&quot;: &quot;Hi, this is Lance. I am&quot;}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 3. æ¡ä»¶è¾¹åˆ¤æ–­</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">next_node </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> decide_mood(state)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è¿”å› &quot;node_3&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 4. node_3 æ‰§è¡Œ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">state </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> node_3(state)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># {&quot;graph_state&quot;: &quot;Hi, this is Lance. I am sad!&quot;}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 5. END èŠ‚ç‚¹</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> state</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p><strong>3. è¿”å›å€¼</strong></p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> graph.invoke({</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;graph_state&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Hi, this is Lance.&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(result)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># {&#39;graph_state&#39;: &#39;Hi, this is Lance. I am sad!&#39;}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>è¿”å›æœ€ç»ˆçŠ¶æ€ï¼ˆå­—å…¸å½¢å¼ï¼‰</li><li>åŒ…å«æ‰€æœ‰çŠ¶æ€å­—æ®µçš„æœ€æ–°å€¼</li></ul><h4 id="åŒæ­¥æ‰§è¡Œç‰¹æ€§" tabindex="-1">åŒæ­¥æ‰§è¡Œç‰¹æ€§ <a class="header-anchor" href="#åŒæ­¥æ‰§è¡Œç‰¹æ€§" aria-label="Permalink to &quot;åŒæ­¥æ‰§è¡Œç‰¹æ€§&quot;">â€‹</a></h4><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">invoke() </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åŒæ­¥æ–¹æ³•</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li><strong>é˜»å¡æ‰§è¡Œ</strong>ï¼šç­‰å¾…æ¯ä¸ªèŠ‚ç‚¹å®Œæˆåæ‰ç»§ç»­</li><li><strong>é¡ºåºæ‰§è¡Œ</strong>ï¼šæŒ‰è¾¹çš„å®šä¹‰ä¾æ¬¡æ‰§è¡Œ</li><li><strong>æœ€ç»ˆè¿”å›</strong>ï¼šæ‰€æœ‰èŠ‚ç‚¹æ‰§è¡Œå®Œæ¯•åè¿”å›æœ€ç»ˆçŠ¶æ€</li></ul><p><strong>å¯¹æ¯”å¼‚æ­¥æ–¹æ³•ï¼ˆåç»­è¯¾ç¨‹ï¼‰ï¼š</strong></p><ul><li><code>invoke()</code>ï¼šåŒæ­¥ï¼Œç­‰å¾…å®Œæˆ</li><li><code>ainvoke()</code>ï¼šå¼‚æ­¥ï¼Œéé˜»å¡</li><li><code>stream()</code>ï¼šæµå¼ï¼Œé€æ­¥è¿”å›</li></ul><hr><h2 id="ğŸ“-æ ¸å¿ƒçŸ¥è¯†ç‚¹æ€»ç»“" tabindex="-1">ğŸ“ æ ¸å¿ƒçŸ¥è¯†ç‚¹æ€»ç»“ <a class="header-anchor" href="#ğŸ“-æ ¸å¿ƒçŸ¥è¯†ç‚¹æ€»ç»“" aria-label="Permalink to &quot;ğŸ“ æ ¸å¿ƒçŸ¥è¯†ç‚¹æ€»ç»“&quot;">â€‹</a></h2><h3 id="langgraph-ç‰¹æœ‰æ¦‚å¿µ" tabindex="-1">LangGraph ç‰¹æœ‰æ¦‚å¿µ <a class="header-anchor" href="#langgraph-ç‰¹æœ‰æ¦‚å¿µ" aria-label="Permalink to &quot;LangGraph ç‰¹æœ‰æ¦‚å¿µ&quot;">â€‹</a></h3><h4 id="_1-çŠ¶æ€-state" tabindex="-1">1. çŠ¶æ€ï¼ˆStateï¼‰ <a class="header-anchor" href="#_1-çŠ¶æ€-state" aria-label="Permalink to &quot;1. çŠ¶æ€ï¼ˆStateï¼‰&quot;">â€‹</a></h4><p><strong>å®šä¹‰æ–¹å¼ï¼š</strong></p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> typing_extensions </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> TypedDict</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> State</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TypedDict</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    graph_state: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>ä½œç”¨ï¼š</strong></p><ul><li>å®šä¹‰å›¾ä¸­æ‰€æœ‰èŠ‚ç‚¹å…±äº«çš„æ•°æ®ç»“æ„</li><li>æä¾›ç±»å‹å®‰å…¨çš„çŠ¶æ€ç®¡ç†</li><li>æ”¯æŒçŠ¶æ€çš„è¯»å–å’Œæ›´æ–°</li></ul><p><strong>å…³é”®ç‚¹ï¼š</strong></p><ul><li>å¿…é¡»ä½¿ç”¨ <code>TypedDict</code> æˆ–ç±»ä¼¼ç±»å‹</li><li>æ‰€æœ‰èŠ‚ç‚¹éƒ½ä½¿ç”¨ç›¸åŒçš„çŠ¶æ€ç»“æ„</li><li>çŠ¶æ€å­—æ®µå¯ä»¥æ˜¯ä»»æ„ç±»å‹ï¼ˆstr, list, dict, è‡ªå®šä¹‰ç±»ç­‰ï¼‰</li></ul><h4 id="_2-èŠ‚ç‚¹-node" tabindex="-1">2. èŠ‚ç‚¹ï¼ˆNodeï¼‰ <a class="header-anchor" href="#_2-èŠ‚ç‚¹-node" aria-label="Permalink to &quot;2. èŠ‚ç‚¹ï¼ˆNodeï¼‰&quot;">â€‹</a></h4><p><strong>å®šä¹‰æ–¹å¼ï¼š</strong></p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> node_name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state):</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # è¯»å–çŠ¶æ€</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> state[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;field_name&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # æ‰§è¡Œé€»è¾‘</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    new_value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> process(value)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # æ›´æ–°çŠ¶æ€</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;field_name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: new_value}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><strong>ç‰¹æ€§ï¼š</strong></p><ul><li>å¿…é¡»æ¥æ”¶ <code>state</code> å‚æ•°</li><li>è¿”å›å­—å…¸æ›´æ–°çŠ¶æ€</li><li>å¯ä»¥è¯»å–å’Œä¿®æ”¹ä»»æ„çŠ¶æ€å­—æ®µ</li></ul><h4 id="_3-è¾¹-edge" tabindex="-1">3. è¾¹ï¼ˆEdgeï¼‰ <a class="header-anchor" href="#_3-è¾¹-edge" aria-label="Permalink to &quot;3. è¾¹ï¼ˆEdgeï¼‰&quot;">â€‹</a></h4><p><strong>æ™®é€šè¾¹ï¼š</strong></p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">builder.add_edge(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;node_a&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;node_b&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># node_a æ€»æ˜¯æµå‘ node_b</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>æ¡ä»¶è¾¹ï¼š</strong></p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> condition</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state) -&gt; Literal[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;node_b&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;node_c&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> some_logic:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;node_b&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;node_c&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">builder.add_conditional_edges(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;node_a&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, condition)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># node_a æ ¹æ® condition è¿”å›å€¼é€‰æ‹©ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="_4-ç‰¹æ®ŠèŠ‚ç‚¹" tabindex="-1">4. ç‰¹æ®ŠèŠ‚ç‚¹ <a class="header-anchor" href="#_4-ç‰¹æ®ŠèŠ‚ç‚¹" aria-label="Permalink to &quot;4. ç‰¹æ®ŠèŠ‚ç‚¹&quot;">â€‹</a></h4><table tabindex="0"><thead><tr><th>èŠ‚ç‚¹</th><th>ä½œç”¨</th><th>ç”¨æ³•</th></tr></thead><tbody><tr><td><strong>START</strong></td><td>å›¾çš„å…¥å£</td><td><code>builder.add_edge(START, &quot;first_node&quot;)</code></td></tr><tr><td><strong>END</strong></td><td>å›¾çš„å‡ºå£</td><td><code>builder.add_edge(&quot;last_node&quot;, END)</code></td></tr></tbody></table><h4 id="_5-å›¾çš„æ„å»ºæµç¨‹" tabindex="-1">5. å›¾çš„æ„å»ºæµç¨‹ <a class="header-anchor" href="#_5-å›¾çš„æ„å»ºæµç¨‹" aria-label="Permalink to &quot;5. å›¾çš„æ„å»ºæµç¨‹&quot;">â€‹</a></h4><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 1. åˆ›å»ºæ„å»ºå™¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">builder </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> StateGraph(State)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 2. æ·»åŠ èŠ‚ç‚¹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">builder.add_node(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, function)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 3. æ·»åŠ è¾¹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">builder.add_edge(source, target)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">builder.add_conditional_edges(source, condition_function)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 4. ç¼–è¯‘</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">graph </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> builder.compile()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 5. æ‰§è¡Œ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> graph.invoke(initial_state)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><hr><h3 id="python-ç‰¹æœ‰çŸ¥è¯†ç‚¹" tabindex="-1">Python ç‰¹æœ‰çŸ¥è¯†ç‚¹ <a class="header-anchor" href="#python-ç‰¹æœ‰çŸ¥è¯†ç‚¹" aria-label="Permalink to &quot;Python ç‰¹æœ‰çŸ¥è¯†ç‚¹&quot;">â€‹</a></h3><h4 id="_1-typeddict" tabindex="-1">1. TypedDict <a class="header-anchor" href="#_1-typeddict" aria-label="Permalink to &quot;1. TypedDict&quot;">â€‹</a></h4><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> typing_extensions </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> TypedDict</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> State</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TypedDict</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    field1: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    field2: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">int</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    field3: list[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>ç‰¹ç‚¹ï¼š</strong></p><ul><li>å®šä¹‰å­—å…¸çš„é”®å’Œå€¼ç±»å‹</li><li>é™æ€ç±»å‹æ£€æŸ¥ï¼ˆIDE æ”¯æŒï¼‰</li><li>è¿è¡Œæ—¶ä¸å¼ºåˆ¶éªŒè¯ï¼ˆä¸ Pydantic ä¸åŒï¼‰</li></ul><h4 id="_2-literal-ç±»å‹" tabindex="-1">2. Literal ç±»å‹ <a class="header-anchor" href="#_2-literal-ç±»å‹" aria-label="Permalink to &quot;2. Literal ç±»å‹&quot;">â€‹</a></h4><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> typing </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Literal</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() -&gt; Literal[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;option1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;option2&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;option1&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # åªèƒ½è¿”å›è¿™ä¸¤ä¸ªå€¼ä¹‹ä¸€</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>ä½œç”¨ï¼š</strong></p><ul><li>é™å®šè¿”å›å€¼çš„å¯èƒ½å–å€¼</li><li>æä¾›æ›´ç²¾ç¡®çš„ç±»å‹æç¤º</li><li>ç”¨äºæ¡ä»¶è¾¹çš„è¿”å›ç±»å‹</li></ul><h4 id="_3-ç±»å‹æç¤º-type-hints" tabindex="-1">3. ç±»å‹æç¤ºï¼ˆType Hintsï¼‰ <a class="header-anchor" href="#_3-ç±»å‹æç¤º-type-hints" aria-label="Permalink to &quot;3. ç±»å‹æç¤ºï¼ˆType Hintsï¼‰&quot;">â€‹</a></h4><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å‡½æ•°å‚æ•°å’Œè¿”å›å€¼ç±»å‹</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> node_1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state: State) -&gt; dict[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;graph_state&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;...&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å˜é‡ç±»å‹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">graph_state: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Hello&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>ä¼˜åŠ¿ï¼š</strong></p><ul><li>ä»£ç å¯è¯»æ€§æ›´å¥½</li><li>IDE è‡ªåŠ¨è¡¥å…¨å’Œé”™è¯¯æ£€æŸ¥</li><li>æ–‡æ¡£ä½œç”¨</li></ul><hr><h2 id="ğŸ’¡-æœ€ä½³å®è·µ" tabindex="-1">ğŸ’¡ æœ€ä½³å®è·µ <a class="header-anchor" href="#ğŸ’¡-æœ€ä½³å®è·µ" aria-label="Permalink to &quot;ğŸ’¡ æœ€ä½³å®è·µ&quot;">â€‹</a></h2><h3 id="_1-ä½•æ—¶ä½¿ç”¨ç®€å•å›¾" tabindex="-1">1. ä½•æ—¶ä½¿ç”¨ç®€å•å›¾ï¼Ÿ <a class="header-anchor" href="#_1-ä½•æ—¶ä½¿ç”¨ç®€å•å›¾" aria-label="Permalink to &quot;1. ä½•æ—¶ä½¿ç”¨ç®€å•å›¾ï¼Ÿ&quot;">â€‹</a></h3><p>âœ… <strong>é€‚ç”¨åœºæ™¯ï¼š</strong></p><ul><li>å­¦ä¹  LangGraph åŸºç¡€æ¦‚å¿µ</li><li>ç®€å•çš„æµç¨‹æ§åˆ¶ï¼ˆ3-5 ä¸ªèŠ‚ç‚¹ï¼‰</li><li>éœ€è¦æ¡ä»¶è·¯ç”±çš„ç®€å•ä»»åŠ¡</li><li>åŸå‹å¼€å‘å’Œæ¦‚å¿µéªŒè¯</li></ul><p>âŒ <strong>ä¸é€‚ç”¨åœºæ™¯ï¼š</strong></p><ul><li>å¤æ‚çš„å¤šæ­¥éª¤æµç¨‹ï¼ˆè€ƒè™‘å­å›¾ï¼‰</li><li>éœ€è¦å¹¶è¡Œæ‰§è¡Œï¼ˆè€ƒè™‘ Map-Reduceï¼‰</li><li>éœ€è¦å¾ªç¯å’Œé‡è¯•ï¼ˆè€ƒè™‘å¾ªç¯å›¾ï¼‰</li><li>å¤æ‚çš„çŠ¶æ€ç®¡ç†ï¼ˆè€ƒè™‘å¤šçŠ¶æ€è®¾è®¡ï¼‰</li></ul><h3 id="_2-çŠ¶æ€è®¾è®¡åŸåˆ™" tabindex="-1">2. çŠ¶æ€è®¾è®¡åŸåˆ™ <a class="header-anchor" href="#_2-çŠ¶æ€è®¾è®¡åŸåˆ™" aria-label="Permalink to &quot;2. çŠ¶æ€è®¾è®¡åŸåˆ™&quot;">â€‹</a></h3><h4 id="åŸåˆ™-1-ä¿æŒçŠ¶æ€ç®€æ´" tabindex="-1">åŸåˆ™ 1ï¼šä¿æŒçŠ¶æ€ç®€æ´ <a class="header-anchor" href="#åŸåˆ™-1-ä¿æŒçŠ¶æ€ç®€æ´" aria-label="Permalink to &quot;åŸåˆ™ 1ï¼šä¿æŒçŠ¶æ€ç®€æ´&quot;">â€‹</a></h4><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># âœ… å¥½çš„è®¾è®¡ - åªåŒ…å«å¿…éœ€å­—æ®µ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> State</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TypedDict</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    user_input: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    result: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># âŒ ä¸å¥½çš„è®¾è®¡ - è¿‡å¤šå­—æ®µ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> State</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TypedDict</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    user_input: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    intermediate_1: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    intermediate_2: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    intermediate_3: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    temp_value: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    result: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h4 id="åŸåˆ™-2-ä½¿ç”¨æœ‰æ„ä¹‰çš„å­—æ®µå" tabindex="-1">åŸåˆ™ 2ï¼šä½¿ç”¨æœ‰æ„ä¹‰çš„å­—æ®µå <a class="header-anchor" href="#åŸåˆ™-2-ä½¿ç”¨æœ‰æ„ä¹‰çš„å­—æ®µå" aria-label="Permalink to &quot;åŸåˆ™ 2ï¼šä½¿ç”¨æœ‰æ„ä¹‰çš„å­—æ®µå&quot;">â€‹</a></h4><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># âœ… æ¸…æ™°çš„å‘½å</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> State</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TypedDict</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    user_query: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    search_results: list[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    final_answer: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># âŒ æ¨¡ç³Šçš„å‘½å</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> State</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TypedDict</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    data: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    result: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">list</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    output: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="åŸåˆ™-3-é€‚å½“çš„å­—æ®µç±»å‹" tabindex="-1">åŸåˆ™ 3ï¼šé€‚å½“çš„å­—æ®µç±»å‹ <a class="header-anchor" href="#åŸåˆ™-3-é€‚å½“çš„å­—æ®µç±»å‹" aria-label="Permalink to &quot;åŸåˆ™ 3ï¼šé€‚å½“çš„å­—æ®µç±»å‹&quot;">â€‹</a></h4><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> State</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TypedDict</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # ç®€å•ç±»å‹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    message: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    count: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">int</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    is_done: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">bool</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # å¤æ‚ç±»å‹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    items: list[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    metadata: dict[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, Any]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # è‡ªå®šä¹‰ç±»å‹ï¼ˆåç»­è¯¾ç¨‹ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # response: ChatMessage</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="_3-èŠ‚ç‚¹è®¾è®¡æŠ€å·§" tabindex="-1">3. èŠ‚ç‚¹è®¾è®¡æŠ€å·§ <a class="header-anchor" href="#_3-èŠ‚ç‚¹è®¾è®¡æŠ€å·§" aria-label="Permalink to &quot;3. èŠ‚ç‚¹è®¾è®¡æŠ€å·§&quot;">â€‹</a></h3><h4 id="æŠ€å·§-1-å•ä¸€èŒè´£" tabindex="-1">æŠ€å·§ 1ï¼šå•ä¸€èŒè´£ <a class="header-anchor" href="#æŠ€å·§-1-å•ä¸€èŒè´£" aria-label="Permalink to &quot;æŠ€å·§ 1ï¼šå•ä¸€èŒè´£&quot;">â€‹</a></h4><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># âœ… æ¯ä¸ªèŠ‚ç‚¹åšä¸€ä»¶äº‹</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fetch_data</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    data </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> api.fetch()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;data&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: data}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> process_data</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> process(state[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;data&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;result&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: result}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># âŒ èŠ‚ç‚¹åšå¤ªå¤šäº‹æƒ…</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> do_everything</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    data </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> api.fetch()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> process(data)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    final </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> format</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(result)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;final&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: final}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h4 id="æŠ€å·§-2-æ·»åŠ æ—¥å¿—" tabindex="-1">æŠ€å·§ 2ï¼šæ·»åŠ æ—¥å¿— <a class="header-anchor" href="#æŠ€å·§-2-æ·»åŠ æ—¥å¿—" aria-label="Permalink to &quot;æŠ€å·§ 2ï¼šæ·»åŠ æ—¥å¿—&quot;">â€‹</a></h4><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> node_1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state):</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;---Node 1 æ‰§è¡Œ---&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;è¾“å…¥çŠ¶æ€: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">state</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> process(state)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;è¾“å‡ºçŠ¶æ€: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">result</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> result</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="æŠ€å·§-3-é”™è¯¯å¤„ç†" tabindex="-1">æŠ€å·§ 3ï¼šé”™è¯¯å¤„ç† <a class="header-anchor" href="#æŠ€å·§-3-é”™è¯¯å¤„ç†" aria-label="Permalink to &quot;æŠ€å·§ 3ï¼šé”™è¯¯å¤„ç†&quot;">â€‹</a></h4><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> safe_node</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> risky_operation(state)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;result&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: result, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;error&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">None</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    except</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Exception</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> e:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;result&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">None</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;error&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(e)}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_4-æ¡ä»¶è¾¹çš„è®¾è®¡" tabindex="-1">4. æ¡ä»¶è¾¹çš„è®¾è®¡ <a class="header-anchor" href="#_4-æ¡ä»¶è¾¹çš„è®¾è®¡" aria-label="Permalink to &quot;4. æ¡ä»¶è¾¹çš„è®¾è®¡&quot;">â€‹</a></h3><h4 id="æŠ€å·§-1-åŸºäºçŠ¶æ€çš„è·¯ç”±" tabindex="-1">æŠ€å·§ 1ï¼šåŸºäºçŠ¶æ€çš„è·¯ç”± <a class="header-anchor" href="#æŠ€å·§-1-åŸºäºçŠ¶æ€çš„è·¯ç”±" aria-label="Permalink to &quot;æŠ€å·§ 1ï¼šåŸºäºçŠ¶æ€çš„è·¯ç”±&quot;">â€‹</a></h4><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> route_by_state</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state) -&gt; Literal[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;node_a&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;node_b&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # åŸºäºçŠ¶æ€å­—æ®µåšå†³ç­–</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> state[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;score&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.8</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;node_a&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;node_b&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="æŠ€å·§-2-å¤šæ¡ä»¶åˆ¤æ–­" tabindex="-1">æŠ€å·§ 2ï¼šå¤šæ¡ä»¶åˆ¤æ–­ <a class="header-anchor" href="#æŠ€å·§-2-å¤šæ¡ä»¶åˆ¤æ–­" aria-label="Permalink to &quot;æŠ€å·§ 2ï¼šå¤šæ¡ä»¶åˆ¤æ–­&quot;">â€‹</a></h4><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> complex_routing</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state) -&gt; Literal[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;node_a&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;node_b&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;node_c&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> state[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;value&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;node_a&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    elif</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 50</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;node_b&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;node_c&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="æŠ€å·§-3-æ·»åŠ é»˜è®¤è·¯ç”±" tabindex="-1">æŠ€å·§ 3ï¼šæ·»åŠ é»˜è®¤è·¯ç”± <a class="header-anchor" href="#æŠ€å·§-3-æ·»åŠ é»˜è®¤è·¯ç”±" aria-label="Permalink to &quot;æŠ€å·§ 3ï¼šæ·»åŠ é»˜è®¤è·¯ç”±&quot;">â€‹</a></h4><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> safe_routing</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state) -&gt; Literal[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;node_a&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;node_b&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;error_node&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> state[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;condition&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;node_a&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;node_b&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    except</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;error_node&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # å¼‚å¸¸æƒ…å†µçš„é»˜è®¤è·¯ç”±</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><hr><h2 id="ğŸš€-è¿›é˜¶æ‰©å±•" tabindex="-1">ğŸš€ è¿›é˜¶æ‰©å±• <a class="header-anchor" href="#ğŸš€-è¿›é˜¶æ‰©å±•" aria-label="Permalink to &quot;ğŸš€ è¿›é˜¶æ‰©å±•&quot;">â€‹</a></h2><h3 id="_1-å¤šå­—æ®µçŠ¶æ€" tabindex="-1">1. å¤šå­—æ®µçŠ¶æ€ <a class="header-anchor" href="#_1-å¤šå­—æ®µçŠ¶æ€" aria-label="Permalink to &quot;1. å¤šå­—æ®µçŠ¶æ€&quot;">â€‹</a></h3><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> State</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TypedDict</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    user_input: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    processing_step: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">int</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    results: list[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    metadata: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">dict</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> node</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state):</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # å¯ä»¥æ›´æ–°å¤šä¸ªå­—æ®µ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;processing_step&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: state[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;processing_step&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;results&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: state[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;results&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;new_item&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="_2-åµŒå¥—çŠ¶æ€ç»“æ„" tabindex="-1">2. åµŒå¥—çŠ¶æ€ç»“æ„ <a class="header-anchor" href="#_2-åµŒå¥—çŠ¶æ€ç»“æ„" aria-label="Permalink to &quot;2. åµŒå¥—çŠ¶æ€ç»“æ„&quot;">â€‹</a></h3><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> typing </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Any</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> State</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TypedDict</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    config: dict[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, Any]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    data: dict[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, list[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> node</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state):</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # è®¿é—®åµŒå¥—ç»“æ„</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    threshold </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> state[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;config&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">][</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;threshold&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    items </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> state[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;data&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">][</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;items&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;data&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;items&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: processed_items}}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="_3-å¯é€‰å­—æ®µ-python-3-11" tabindex="-1">3. å¯é€‰å­—æ®µï¼ˆPython 3.11+ï¼‰ <a class="header-anchor" href="#_3-å¯é€‰å­—æ®µ-python-3-11" aria-label="Permalink to &quot;3. å¯é€‰å­—æ®µï¼ˆPython 3.11+ï¼‰&quot;">â€‹</a></h3><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> typing </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> NotRequired</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> State</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TypedDict</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    required_field: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    optional_field: NotRequired[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å¯é€‰å­—æ®µ</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><hr><h2 id="ğŸ¯-å®é™…åº”ç”¨æ¡ˆä¾‹" tabindex="-1">ğŸ¯ å®é™…åº”ç”¨æ¡ˆä¾‹ <a class="header-anchor" href="#ğŸ¯-å®é™…åº”ç”¨æ¡ˆä¾‹" aria-label="Permalink to &quot;ğŸ¯ å®é™…åº”ç”¨æ¡ˆä¾‹&quot;">â€‹</a></h2><h3 id="æ¡ˆä¾‹-1-ç®€å•çš„èŠå¤©æœºå™¨äºº" tabindex="-1">æ¡ˆä¾‹ 1ï¼šç®€å•çš„èŠå¤©æœºå™¨äºº <a class="header-anchor" href="#æ¡ˆä¾‹-1-ç®€å•çš„èŠå¤©æœºå™¨äºº" aria-label="Permalink to &quot;æ¡ˆä¾‹ 1ï¼šç®€å•çš„èŠå¤©æœºå™¨äºº&quot;">â€‹</a></h3><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ChatState</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TypedDict</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    user_message: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    bot_response: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    sentiment: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> analyze_sentiment</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state):</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # åˆ†æç”¨æˆ·æ¶ˆæ¯çš„æƒ…æ„Ÿ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    sentiment </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sentiment_analyzer(state[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;user_message&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;sentiment&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: sentiment}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> generate_response</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state):</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # æ ¹æ®æƒ…æ„Ÿç”Ÿæˆå›å¤</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> state[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;sentiment&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;positive&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        response </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;å¾ˆé«˜å…´å¬åˆ°è¿™ä¸ªæ¶ˆæ¯ï¼&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        response </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;æˆ‘ç†è§£ä½ çš„æ„Ÿå—ã€‚&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;bot_response&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: response}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> route_by_sentiment</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state) -&gt; Literal[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;positive_response&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;negative_response&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;positive_response&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> state[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;sentiment&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;positive&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> else</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;negative_response&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h3 id="æ¡ˆä¾‹-2-å†…å®¹å®¡æ ¸æµç¨‹" tabindex="-1">æ¡ˆä¾‹ 2ï¼šå†…å®¹å®¡æ ¸æµç¨‹ <a class="header-anchor" href="#æ¡ˆä¾‹-2-å†…å®¹å®¡æ ¸æµç¨‹" aria-label="Permalink to &quot;æ¡ˆä¾‹ 2ï¼šå†…å®¹å®¡æ ¸æµç¨‹&quot;">â€‹</a></h3><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ModerationState</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TypedDict</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    content: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    is_safe: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">bool</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    action: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> check_content</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state):</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # æ£€æŸ¥å†…å®¹æ˜¯å¦å®‰å…¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    is_safe </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> content_filter(state[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;content&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;is_safe&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: is_safe}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> approve_content</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;action&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;approved&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> reject_content</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;action&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;rejected&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> route_content</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state) -&gt; Literal[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;approve&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;reject&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;approve&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> state[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;is_safe&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;reject&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h3 id="æ¡ˆä¾‹-3-æ•°æ®å¤„ç†ç®¡é“" tabindex="-1">æ¡ˆä¾‹ 3ï¼šæ•°æ®å¤„ç†ç®¡é“ <a class="header-anchor" href="#æ¡ˆä¾‹-3-æ•°æ®å¤„ç†ç®¡é“" aria-label="Permalink to &quot;æ¡ˆä¾‹ 3ï¼šæ•°æ®å¤„ç†ç®¡é“&quot;">â€‹</a></h3><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DataState</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TypedDict</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    raw_data: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    cleaned_data: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    processed_data: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">dict</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    quality_score: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">float</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> clean_data</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    cleaned </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> remove_noise(state[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;raw_data&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;cleaned_data&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: cleaned}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> process_data</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    processed </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> transform(state[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;cleaned_data&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;processed_data&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: processed}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> check_quality</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    score </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> calculate_quality(state[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;processed_data&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;quality_score&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: score}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> route_quality</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state) -&gt; Literal[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;save_result&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;retry_processing&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;save_result&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> state[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;quality_score&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.7</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> else</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;retry_processing&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><hr><h2 id="ğŸ”-å¸¸è§é—®é¢˜" tabindex="-1">ğŸ” å¸¸è§é—®é¢˜ <a class="header-anchor" href="#ğŸ”-å¸¸è§é—®é¢˜" aria-label="Permalink to &quot;ğŸ” å¸¸è§é—®é¢˜&quot;">â€‹</a></h2><h3 id="q1-ä¸ºä»€ä¹ˆèŠ‚ç‚¹è¿”å›å­—å…¸è€Œä¸æ˜¯ç›´æ¥è¿”å›å€¼" tabindex="-1">Q1: ä¸ºä»€ä¹ˆèŠ‚ç‚¹è¿”å›å­—å…¸è€Œä¸æ˜¯ç›´æ¥è¿”å›å€¼ï¼Ÿ <a class="header-anchor" href="#q1-ä¸ºä»€ä¹ˆèŠ‚ç‚¹è¿”å›å­—å…¸è€Œä¸æ˜¯ç›´æ¥è¿”å›å€¼" aria-label="Permalink to &quot;Q1: ä¸ºä»€ä¹ˆèŠ‚ç‚¹è¿”å›å­—å…¸è€Œä¸æ˜¯ç›´æ¥è¿”å›å€¼ï¼Ÿ&quot;">â€‹</a></h3><p>å› ä¸º LangGraph éœ€è¦çŸ¥é“æ›´æ–°å“ªä¸ªçŠ¶æ€å­—æ®µï¼š</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># âœ… æ­£ç¡® - æ˜ç¡®æŒ‡å®šæ›´æ–°çš„å­—æ®µ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> node</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;graph_state&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;new_value&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># âŒ é”™è¯¯ - LangGraph ä¸çŸ¥é“å¦‚ä½•æ›´æ–°çŠ¶æ€</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> node</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;new_value&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="q2-èŠ‚ç‚¹å¯ä»¥ä¸è¿”å›ä»»ä½•å€¼å—" tabindex="-1">Q2: èŠ‚ç‚¹å¯ä»¥ä¸è¿”å›ä»»ä½•å€¼å—ï¼Ÿ <a class="header-anchor" href="#q2-èŠ‚ç‚¹å¯ä»¥ä¸è¿”å›ä»»ä½•å€¼å—" aria-label="Permalink to &quot;Q2: èŠ‚ç‚¹å¯ä»¥ä¸è¿”å›ä»»ä½•å€¼å—ï¼Ÿ&quot;">â€‹</a></h3><p>å¯ä»¥ï¼Œä½†çŠ¶æ€ä¸ä¼šæ›´æ–°ï¼š</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> node</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state):</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;This node only prints&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # ä¸è¿”å›ä»»ä½•å€¼ï¼ŒçŠ¶æ€ä¿æŒä¸å˜</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>é€‚ç”¨äºåªæ‰§è¡Œå‰¯ä½œç”¨ï¼ˆå¦‚æ—¥å¿—ã€é€šçŸ¥ï¼‰çš„èŠ‚ç‚¹ã€‚</p><h3 id="q3-æ¡ä»¶è¾¹çš„è¿”å›å€¼å¿…é¡»æ˜¯-literal-ç±»å‹å—" tabindex="-1">Q3: æ¡ä»¶è¾¹çš„è¿”å›å€¼å¿…é¡»æ˜¯ Literal ç±»å‹å—ï¼Ÿ <a class="header-anchor" href="#q3-æ¡ä»¶è¾¹çš„è¿”å›å€¼å¿…é¡»æ˜¯-literal-ç±»å‹å—" aria-label="Permalink to &quot;Q3: æ¡ä»¶è¾¹çš„è¿”å›å€¼å¿…é¡»æ˜¯ Literal ç±»å‹å—ï¼Ÿ&quot;">â€‹</a></h3><p>ä¸æ˜¯å¿…é¡»çš„ï¼Œä½†å¼ºçƒˆæ¨èï¼š</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ¨è âœ… - ç±»å‹å®‰å…¨</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> decide</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state) -&gt; Literal[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;node_a&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;node_b&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;node_a&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å¯è¡Œä½†ä¸æ¨è - æ— ç±»å‹æ£€æŸ¥</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> decide</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;node_a&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # å¯èƒ½æ‹¼å†™é”™è¯¯å¯¼è‡´è¿è¡Œæ—¶é”™è¯¯</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="q4-å¯ä»¥åœ¨èŠ‚ç‚¹ä¹‹é—´å…±äº«å˜é‡å—" tabindex="-1">Q4: å¯ä»¥åœ¨èŠ‚ç‚¹ä¹‹é—´å…±äº«å˜é‡å—ï¼Ÿ <a class="header-anchor" href="#q4-å¯ä»¥åœ¨èŠ‚ç‚¹ä¹‹é—´å…±äº«å˜é‡å—" aria-label="Permalink to &quot;Q4: å¯ä»¥åœ¨èŠ‚ç‚¹ä¹‹é—´å…±äº«å˜é‡å—ï¼Ÿ&quot;">â€‹</a></h3><p>ä¸å»ºè®®ã€‚åº”è¯¥é€šè¿‡çŠ¶æ€ä¼ é€’æ•°æ®ï¼š</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># âŒ ä¸å¥½çš„åšæ³• - å…¨å±€å˜é‡</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">shared_data </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> []</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> node_1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    shared_data.append(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;data&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># âœ… å¥½çš„åšæ³• - é€šè¿‡çŠ¶æ€</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> State</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TypedDict</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    shared_data: list[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> node_1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;shared_data&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: state[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;shared_data&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;data&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="q5-start-å’Œ-end-èŠ‚ç‚¹å¯ä»¥çœç•¥å—" tabindex="-1">Q5: START å’Œ END èŠ‚ç‚¹å¯ä»¥çœç•¥å—ï¼Ÿ <a class="header-anchor" href="#q5-start-å’Œ-end-èŠ‚ç‚¹å¯ä»¥çœç•¥å—" aria-label="Permalink to &quot;Q5: START å’Œ END èŠ‚ç‚¹å¯ä»¥çœç•¥å—ï¼Ÿ&quot;">â€‹</a></h3><p>ä¸å¯ä»¥ã€‚å®ƒä»¬æ˜¯å¿…éœ€çš„ç‰¹æ®ŠèŠ‚ç‚¹ï¼š</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># âŒ é”™è¯¯ - ç¼ºå°‘ START</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">builder.add_edge(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;node_1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;node_2&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># âœ… æ­£ç¡®</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">builder.add_edge(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">START</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;node_1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">builder.add_edge(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;node_2&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">END</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><hr><h2 id="ğŸ“Š-å›¾çš„æ‰§è¡Œæ¨¡å¼" tabindex="-1">ğŸ“Š å›¾çš„æ‰§è¡Œæ¨¡å¼ <a class="header-anchor" href="#ğŸ“Š-å›¾çš„æ‰§è¡Œæ¨¡å¼" aria-label="Permalink to &quot;ğŸ“Š å›¾çš„æ‰§è¡Œæ¨¡å¼&quot;">â€‹</a></h2><h3 id="invoke-åŒæ­¥æ‰§è¡Œ" tabindex="-1">invoke - åŒæ­¥æ‰§è¡Œ <a class="header-anchor" href="#invoke-åŒæ­¥æ‰§è¡Œ" aria-label="Permalink to &quot;invoke - åŒæ­¥æ‰§è¡Œ&quot;">â€‹</a></h3><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> graph.invoke({</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;graph_state&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;input&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># é˜»å¡ç›´åˆ°å›¾æ‰§è¡Œå®Œæˆ</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(result)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>ç‰¹ç‚¹ï¼š</strong></p><ul><li>åŒæ­¥é˜»å¡</li><li>è¿”å›æœ€ç»ˆçŠ¶æ€</li><li>é€‚åˆç®€å•åœºæ™¯</li></ul><h3 id="stream-æµå¼æ‰§è¡Œ-é¢„å‘Š" tabindex="-1">stream - æµå¼æ‰§è¡Œï¼ˆé¢„å‘Šï¼‰ <a class="header-anchor" href="#stream-æµå¼æ‰§è¡Œ-é¢„å‘Š" aria-label="Permalink to &quot;stream - æµå¼æ‰§è¡Œï¼ˆé¢„å‘Šï¼‰&quot;">â€‹</a></h3><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> step </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> graph.stream({</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;graph_state&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;input&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}):</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(step)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># é€æ­¥è¿”å›æ¯ä¸ªèŠ‚ç‚¹çš„è¾“å‡º</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>ç‰¹ç‚¹ï¼š</strong></p><ul><li>é€æ­¥è¿”å›ç»“æœ</li><li>å¯ä»¥è§‚å¯Ÿæ‰§è¡Œè¿‡ç¨‹</li><li>é€‚åˆé•¿æ—¶é—´è¿è¡Œçš„å›¾</li></ul><hr><h2 id="ğŸ“–-æ‰©å±•é˜…è¯»" tabindex="-1">ğŸ“– æ‰©å±•é˜…è¯» <a class="header-anchor" href="#ğŸ“–-æ‰©å±•é˜…è¯»" aria-label="Permalink to &quot;ğŸ“– æ‰©å±•é˜…è¯»&quot;">â€‹</a></h2><ul><li><a href="https://langchain-ai.github.io/langgraph/concepts/low_level/" target="_blank" rel="noreferrer">LangGraph å®˜æ–¹æ–‡æ¡£ - æ ¸å¿ƒæ¦‚å¿µ</a></li><li><a href="https://langchain-ai.github.io/langgraph/concepts/low_level/#state" target="_blank" rel="noreferrer">LangGraph å®˜æ–¹æ–‡æ¡£ - State</a></li><li><a href="https://langchain-ai.github.io/langgraph/concepts/low_level/#nodes" target="_blank" rel="noreferrer">LangGraph å®˜æ–¹æ–‡æ¡£ - Nodes</a></li><li><a href="https://langchain-ai.github.io/langgraph/concepts/low_level/#edges" target="_blank" rel="noreferrer">LangGraph å®˜æ–¹æ–‡æ¡£ - Edges</a></li><li><a href="https://docs.python.org/3/library/typing.html#typing.TypedDict" target="_blank" rel="noreferrer">Python TypedDict æ–‡æ¡£</a></li><li><a href="https://docs.python.org/3/library/typing.html#typing.Literal" target="_blank" rel="noreferrer">Python Literal æ–‡æ¡£</a></li></ul><hr><h2 id="ğŸ‰-æ€»ç»“" tabindex="-1">ğŸ‰ æ€»ç»“ <a class="header-anchor" href="#ğŸ‰-æ€»ç»“" aria-label="Permalink to &quot;ğŸ‰ æ€»ç»“&quot;">â€‹</a></h2><p>é€šè¿‡è¿™ä¸ªç®€å•å›¾æ•™ç¨‹ï¼Œæˆ‘ä»¬å­¦ä¹ äº†ï¼š</p><h3 id="langgraph-æ ¸å¿ƒæ¦‚å¿µ" tabindex="-1">LangGraph æ ¸å¿ƒæ¦‚å¿µ <a class="header-anchor" href="#langgraph-æ ¸å¿ƒæ¦‚å¿µ" aria-label="Permalink to &quot;LangGraph æ ¸å¿ƒæ¦‚å¿µ&quot;">â€‹</a></h3><ol><li><strong>State</strong>ï¼šå®šä¹‰å›¾çš„æ•°æ®ç»“æ„</li><li><strong>Node</strong>ï¼šæ‰§è¡Œå…·ä½“æ“ä½œçš„å‡½æ•°</li><li><strong>Edge</strong>ï¼šæ§åˆ¶æ‰§è¡Œæµç¨‹çš„è¿æ¥</li><li><strong>START/END</strong>ï¼šå›¾çš„å…¥å£å’Œå‡ºå£</li></ol><h3 id="python-æŠ€æœ¯è¦ç‚¹" tabindex="-1">Python æŠ€æœ¯è¦ç‚¹ <a class="header-anchor" href="#python-æŠ€æœ¯è¦ç‚¹" aria-label="Permalink to &quot;Python æŠ€æœ¯è¦ç‚¹&quot;">â€‹</a></h3><ol><li><strong>TypedDict</strong>ï¼šç±»å‹å®‰å…¨çš„å­—å…¸å®šä¹‰</li><li><strong>Literal</strong>ï¼šé™å®šè¿”å›å€¼çš„å¯èƒ½å–å€¼</li><li><strong>ç±»å‹æç¤º</strong>ï¼šæå‡ä»£ç è´¨é‡å’Œå¯ç»´æŠ¤æ€§</li></ol><h3 id="å…³é”®æŠ€èƒ½" tabindex="-1">å…³é”®æŠ€èƒ½ <a class="header-anchor" href="#å…³é”®æŠ€èƒ½" aria-label="Permalink to &quot;å…³é”®æŠ€èƒ½&quot;">â€‹</a></h3><ol><li>æ„å»ºç®€å•çš„çŠ¶æ€æœº</li><li>ä½¿ç”¨æ¡ä»¶è¾¹å®ç°åŠ¨æ€è·¯ç”±</li><li>ç†è§£å›¾çš„æ‰§è¡Œæµç¨‹</li></ol><p><strong>ä¸‹ä¸€æ­¥ï¼š</strong> å­¦ä¹ æ›´å¤æ‚çš„å›¾ç»“æ„ï¼Œå¦‚é“¾å¼å›¾ã€å¹¶è¡Œå›¾ã€å¾ªç¯å›¾ç­‰ï¼Œæ„å»ºæ›´å¼ºå¤§çš„ AI åº”ç”¨ï¼</p>`,243)])])}const g=i(e,[["render",p]]);export{o as __pageData,g as default};
