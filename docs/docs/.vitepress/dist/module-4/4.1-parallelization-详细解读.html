<!DOCTYPE html>
<html lang="zh-CN" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>LangGraph å¹¶è¡ŒèŠ‚ç‚¹æ‰§è¡Œè¯¦ç»†è§£è¯» | LangGraph Lightning</title>
    <meta name="description" content="åŸºäº LangChain Academy çš„æ·±åº¦è§£è¯»ä¸å·¥ç¨‹å®æˆ˜æŒ‡å—">
    <meta name="generator" content="VitePress v1.6.4">
    <link rel="preload stylesheet" href="/langgraph-lightning/assets/style.CUcDhOk4.css" as="style">
    <link rel="preload stylesheet" href="/langgraph-lightning/vp-icons.css" as="style">
    
    <script type="module" src="/langgraph-lightning/assets/app.CM7EKiS1.js"></script>
    <link rel="preload" href="/langgraph-lightning/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/langgraph-lightning/assets/chunks/theme.DB-b9g6l.js">
    <link rel="modulepreload" href="/langgraph-lightning/assets/chunks/framework.Cf3FQAeg.js">
    <link rel="modulepreload" href="/langgraph-lightning/assets/module-4_4.1-parallelization-è¯¦ç»†è§£è¯».md.DZQkVBvx.lean.js">
    <link rel="icon" href="/favicon.ico">
    <meta name="keywords" content="LangGraph,LangChain,AI,Agent,Multi-Agent,Python,æ•™ç¨‹,å®æˆ˜">
    <meta name="author" content="Bryce Wang">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-d8b57b2d><!--[--><!--]--><!--[--><span tabindex="-1" data-v-fcbfc0e0></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-fcbfc0e0>Skip to content</a><!--]--><!----><header class="VPNav" data-v-d8b57b2d data-v-7ad780c2><div class="VPNavBar" data-v-7ad780c2 data-v-9fd4d1dd><div class="wrapper" data-v-9fd4d1dd><div class="container" data-v-9fd4d1dd><div class="title" data-v-9fd4d1dd><div class="VPNavBarTitle has-sidebar" data-v-9fd4d1dd data-v-9f43907a><a class="title" href="/langgraph-lightning/" data-v-9f43907a><!--[--><!--]--><!--[--><img class="VPImage logo" src="/langgraph-lightning/logo.svg" alt data-v-ab19afbb><!--]--><span data-v-9f43907a>LangGraph Lightning</span><!--[--><!--]--></a></div></div><div class="content" data-v-9fd4d1dd><div class="content-body" data-v-9fd4d1dd><!--[--><!--]--><div class="VPNavBarSearch search" data-v-9fd4d1dd><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="æœç´¢æ–‡æ¡£"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">æœç´¢æ–‡æ¡£</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-9fd4d1dd data-v-afb2845e><span id="main-nav-aria-label" class="visually-hidden" data-v-afb2845e> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/langgraph-lightning/" tabindex="0" data-v-afb2845e data-v-815115f5><!--[--><span data-v-815115f5>é¦–é¡µ</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/langgraph-lightning/module-0/0.1-Python%20Basics.html" tabindex="0" data-v-afb2845e data-v-815115f5><!--[--><span data-v-815115f5>å¼€å§‹å­¦ä¹ </span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup active" data-v-afb2845e data-v-bfe7971f><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-bfe7971f><span class="text" data-v-bfe7971f><!----><span data-v-bfe7971f>è¯¾ç¨‹ç« èŠ‚</span><span class="vpi-chevron-down text-icon" data-v-bfe7971f></span></span></button><div class="menu" data-v-bfe7971f><div class="VPMenu" data-v-bfe7971f data-v-20ed86d6><div class="items" data-v-20ed86d6><!--[--><!--[--><div class="VPMenuLink" data-v-20ed86d6 data-v-7eeeb2dc><a class="VPLink link" href="/langgraph-lightning/module-0/0.2-LangGraph%20Basics-%E8%AF%A6%E7%BB%86%E8%A7%A3%E8%AF%BB.html" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>ç¬¬ 0 ç«  - åŸºç¡€å…¥é—¨</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-20ed86d6 data-v-7eeeb2dc><a class="VPLink link" href="/langgraph-lightning/module-1/1.1-simple-graph-%E8%AF%A6%E7%BB%86%E8%A7%A3%E8%AF%BB.html" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>ç¬¬ 1 ç«  - æ ¸å¿ƒæ¦‚å¿µ</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-20ed86d6 data-v-7eeeb2dc><a class="VPLink link" href="/langgraph-lightning/module-2/2.1-state-schema-%E8%AF%A6%E7%BB%86%E8%A7%A3%E8%AF%BB.html" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>ç¬¬ 2 ç«  - çŠ¶æ€ç®¡ç†</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-20ed86d6 data-v-7eeeb2dc><a class="VPLink link" href="/langgraph-lightning/module-3/breakpoints-%E8%AF%A6%E7%BB%86%E8%A7%A3%E8%AF%BB.html" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>ç¬¬ 3 ç«  - äººæœºåä½œ</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-20ed86d6 data-v-7eeeb2dc><a class="VPLink link active" href="/langgraph-lightning/module-4/4.1-parallelization-%E8%AF%A6%E7%BB%86%E8%A7%A3%E8%AF%BB.html" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>ç¬¬ 4 ç«  - é«˜çº§æ¨¡å¼</span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><a class="VPLink link vp-external-link-icon VPNavBarMenuLink" href="https://github.com/brycewang-stanford/langgraph-lightning" target="_blank" rel="noreferrer" tabindex="0" data-v-afb2845e data-v-815115f5><!--[--><span data-v-815115f5>GitHub</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-9fd4d1dd data-v-3f90c1a5><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-3f90c1a5 data-v-be9742d9 data-v-b4ccac88><span class="check" data-v-b4ccac88><span class="icon" data-v-b4ccac88><!--[--><span class="vpi-sun sun" data-v-be9742d9></span><span class="vpi-moon moon" data-v-be9742d9></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-9fd4d1dd data-v-ef6192dc data-v-e71e869c><!--[--><a class="VPSocialLink no-icon" href="https://github.com/brycewang-stanford/langgraph-lightning" aria-label="github" target="_blank" rel="noopener" data-v-e71e869c data-v-60a9a2d3><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-9fd4d1dd data-v-f953d92f data-v-bfe7971f><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-bfe7971f><span class="vpi-more-horizontal icon" data-v-bfe7971f></span></button><div class="menu" data-v-bfe7971f><div class="VPMenu" data-v-bfe7971f data-v-20ed86d6><!----><!--[--><!--[--><!----><div class="group" data-v-f953d92f><div class="item appearance" data-v-f953d92f><p class="label" data-v-f953d92f>Appearance</p><div class="appearance-action" data-v-f953d92f><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-f953d92f data-v-be9742d9 data-v-b4ccac88><span class="check" data-v-b4ccac88><span class="icon" data-v-b4ccac88><!--[--><span class="vpi-sun sun" data-v-be9742d9></span><span class="vpi-moon moon" data-v-be9742d9></span><!--]--></span></span></button></div></div></div><div class="group" data-v-f953d92f><div class="item social-links" data-v-f953d92f><div class="VPSocialLinks social-links-list" data-v-f953d92f data-v-e71e869c><!--[--><a class="VPSocialLink no-icon" href="https://github.com/brycewang-stanford/langgraph-lightning" aria-label="github" target="_blank" rel="noopener" data-v-e71e869c data-v-60a9a2d3><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-9fd4d1dd data-v-6bee1efd><span class="container" data-v-6bee1efd><span class="top" data-v-6bee1efd></span><span class="middle" data-v-6bee1efd></span><span class="bottom" data-v-6bee1efd></span></span></button></div></div></div></div><div class="divider" data-v-9fd4d1dd><div class="divider-line" data-v-9fd4d1dd></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-d8b57b2d data-v-2488c25a><div class="container" data-v-2488c25a><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-2488c25a><span class="vpi-align-left menu-icon" data-v-2488c25a></span><span class="menu-text" data-v-2488c25a>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-2488c25a data-v-6b867909><button data-v-6b867909>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-d8b57b2d data-v-42c4c606><div class="curtain" data-v-42c4c606></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-42c4c606><span class="visually-hidden" id="sidebar-aria-label" data-v-42c4c606> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-51288d80><section class="VPSidebarItem level-0 collapsible" data-v-51288d80 data-v-0009425e><div class="item" role="button" tabindex="0" data-v-0009425e><div class="indicator" data-v-0009425e></div><h2 class="text" data-v-0009425e>ç¬¬ 0 ç« </h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-0009425e><span class="vpi-chevron-right caret-icon" data-v-0009425e></span></div></div><div class="items" data-v-0009425e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/langgraph-lightning/module-0/0.1-Python%20Basics.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>0.1-Python Basics</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/langgraph-lightning/module-0/0.2-LangGraph%20Basics-%E8%AF%A6%E7%BB%86%E8%A7%A3%E8%AF%BB.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>0.2-LangGraph Basics-è¯¦ç»†è§£è¯»</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-51288d80><section class="VPSidebarItem level-0 collapsible" data-v-51288d80 data-v-0009425e><div class="item" role="button" tabindex="0" data-v-0009425e><div class="indicator" data-v-0009425e></div><h2 class="text" data-v-0009425e>ç¬¬ 1 ç« </h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-0009425e><span class="vpi-chevron-right caret-icon" data-v-0009425e></span></div></div><div class="items" data-v-0009425e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/langgraph-lightning/module-1/1.1-simple-graph-%E8%AF%A6%E7%BB%86%E8%A7%A3%E8%AF%BB.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>1.1-simple-graph-è¯¦ç»†è§£è¯»</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/langgraph-lightning/module-1/1.2-chain-%E8%AF%A6%E7%BB%86%E8%A7%A3%E8%AF%BB.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>1.2-chain-è¯¦ç»†è§£è¯»</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/langgraph-lightning/module-1/1.3-router-%E8%AF%A6%E7%BB%86%E8%A7%A3%E8%AF%BB.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>1.3-router-è¯¦ç»†è§£è¯»</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/langgraph-lightning/module-1/1.4-agent-%E8%AF%A6%E7%BB%86%E8%A7%A3%E8%AF%BB.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>1.4-agent-è¯¦ç»†è§£è¯»</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/langgraph-lightning/module-1/1.5-agent-memory-%E8%AF%A6%E7%BB%86%E8%A7%A3%E8%AF%BB.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>1.5-agent-memory-è¯¦ç»†è§£è¯»</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/langgraph-lightning/module-1/1.6-deployment-%E8%AF%A6%E7%BB%86%E8%A7%A3%E8%AF%BB.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>1.6-deployment-è¯¦ç»†è§£è¯»</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-51288d80><section class="VPSidebarItem level-0 collapsible" data-v-51288d80 data-v-0009425e><div class="item" role="button" tabindex="0" data-v-0009425e><div class="indicator" data-v-0009425e></div><h2 class="text" data-v-0009425e>ç¬¬ 2 ç« </h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-0009425e><span class="vpi-chevron-right caret-icon" data-v-0009425e></span></div></div><div class="items" data-v-0009425e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/langgraph-lightning/module-2/2.1-state-schema-%E8%AF%A6%E7%BB%86%E8%A7%A3%E8%AF%BB.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>2.1-state-schema-è¯¦ç»†è§£è¯»</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/langgraph-lightning/module-2/2.2-state-reducers-%E8%AF%A6%E7%BB%86%E8%A7%A3%E8%AF%BB.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>2.2-state-reducers-è¯¦ç»†è§£è¯»</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/langgraph-lightning/module-2/2.3-multiple-schemas-%E8%AF%A6%E7%BB%86%E8%A7%A3%E8%AF%BB.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>2.3-multiple-schemas-è¯¦ç»†è§£è¯»</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/langgraph-lightning/module-2/2.4-trim-filter-messages-%E8%AF%A6%E7%BB%86%E8%A7%A3%E8%AF%BB.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>2.4-trim-filter-messages-è¯¦ç»†è§£è¯»</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/langgraph-lightning/module-2/2.5-chatbot-summarization-%E8%AF%A6%E7%BB%86%E8%A7%A3%E8%AF%BB.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>2.5-chatbot-summarization-è¯¦ç»†è§£è¯»</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/langgraph-lightning/module-2/2.6-chatbot-external-memory-%E8%AF%A6%E7%BB%86%E8%A7%A3%E8%AF%BB.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>2.6-chatbot-external-memory-è¯¦ç»†è§£è¯»</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-51288d80><section class="VPSidebarItem level-0 collapsible" data-v-51288d80 data-v-0009425e><div class="item" role="button" tabindex="0" data-v-0009425e><div class="indicator" data-v-0009425e></div><h2 class="text" data-v-0009425e>ç¬¬ 3 ç« </h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-0009425e><span class="vpi-chevron-right caret-icon" data-v-0009425e></span></div></div><div class="items" data-v-0009425e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/langgraph-lightning/module-3/breakpoints-%E8%AF%A6%E7%BB%86%E8%A7%A3%E8%AF%BB.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>breakpoints-è¯¦ç»†è§£è¯»</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/langgraph-lightning/module-3/dynamic-breakpoints-%E8%AF%A6%E7%BB%86%E8%A7%A3%E8%AF%BB.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>dynamic-breakpoints-è¯¦ç»†è§£è¯»</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/langgraph-lightning/module-3/edit-state-human-feedback-%E8%AF%A6%E7%BB%86%E8%A7%A3%E8%AF%BB.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>edit-state-human-feedback-è¯¦ç»†è§£è¯»</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/langgraph-lightning/module-3/streaming-interruption-%E8%AF%A6%E7%BB%86%E8%A7%A3%E8%AF%BB.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>streaming-interruption-è¯¦ç»†è§£è¯»</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/langgraph-lightning/module-3/time-travel-%E8%AF%A6%E7%BB%86%E8%A7%A3%E8%AF%BB.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>time-travel-è¯¦ç»†è§£è¯»</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-51288d80><section class="VPSidebarItem level-0 collapsible has-active" data-v-51288d80 data-v-0009425e><div class="item" role="button" tabindex="0" data-v-0009425e><div class="indicator" data-v-0009425e></div><h2 class="text" data-v-0009425e>ç¬¬ 4 ç« </h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-0009425e><span class="vpi-chevron-right caret-icon" data-v-0009425e></span></div></div><div class="items" data-v-0009425e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/langgraph-lightning/module-4/4.1-parallelization-%E8%AF%A6%E7%BB%86%E8%A7%A3%E8%AF%BB.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>4.1-parallelization-è¯¦ç»†è§£è¯»</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/langgraph-lightning/module-4/4.2-sub-graph-%E8%AF%A6%E7%BB%86%E8%A7%A3%E8%AF%BB.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>4.2-sub-graph-è¯¦ç»†è§£è¯»</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/langgraph-lightning/module-4/4.3-map-reduce-%E8%AF%A6%E7%BB%86%E8%A7%A3%E8%AF%BB.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>4.3-map-reduce-è¯¦ç»†è§£è¯»</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/langgraph-lightning/module-4/4.4-research-assistant-%E8%AF%A6%E7%BB%86%E8%A7%A3%E8%AF%BB.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>4.4-research-assistant-è¯¦ç»†è§£è¯»</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-d8b57b2d data-v-9a6c75ad><div class="VPDoc has-sidebar has-aside" data-v-9a6c75ad data-v-e6f2a212><!--[--><!--]--><div class="container" data-v-e6f2a212><div class="aside" data-v-e6f2a212><div class="aside-curtain" data-v-e6f2a212></div><div class="aside-container" data-v-e6f2a212><div class="aside-content" data-v-e6f2a212><div class="VPDocAside" data-v-e6f2a212 data-v-cb998dce><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-cb998dce data-v-f610f197><div class="content" data-v-f610f197><div class="outline-marker" data-v-f610f197></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-f610f197>ç›®å½•</div><ul class="VPDocOutlineItem root" data-v-f610f197 data-v-53c99d69><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-cb998dce></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-e6f2a212><div class="content-container" data-v-e6f2a212><!--[--><!--]--><main class="main" data-v-e6f2a212><div style="position:relative;" class="vp-doc _langgraph-lightning_module-4_4_1-parallelization-%E8%AF%A6%E7%BB%86%E8%A7%A3%E8%AF%BB" data-v-e6f2a212><div><h1 id="langgraph-å¹¶è¡ŒèŠ‚ç‚¹æ‰§è¡Œè¯¦ç»†è§£è¯»" tabindex="-1">LangGraph å¹¶è¡ŒèŠ‚ç‚¹æ‰§è¡Œè¯¦ç»†è§£è¯» <a class="header-anchor" href="#langgraph-å¹¶è¡ŒèŠ‚ç‚¹æ‰§è¡Œè¯¦ç»†è§£è¯»" aria-label="Permalink to &quot;LangGraph å¹¶è¡ŒèŠ‚ç‚¹æ‰§è¡Œè¯¦ç»†è§£è¯»&quot;">â€‹</a></h1><h2 id="ğŸ“š-æ¦‚è¿°" tabindex="-1">ğŸ“š æ¦‚è¿° <a class="header-anchor" href="#ğŸ“š-æ¦‚è¿°" aria-label="Permalink to &quot;ğŸ“š æ¦‚è¿°&quot;">â€‹</a></h2><p>æœ¬æ–‡æ¡£è¯¦ç»†è§£è¯» LangGraph ä¸­çš„<strong>å¹¶è¡ŒèŠ‚ç‚¹æ‰§è¡Œ</strong>ï¼ˆParallelizationï¼‰æœºåˆ¶ã€‚è¿™æ˜¯æ„å»ºé«˜æ•ˆå¤šæ™ºèƒ½ä½“ç³»ç»Ÿçš„æ ¸å¿ƒæŠ€æœ¯ä¹‹ä¸€ï¼Œèƒ½è®©å¤šä¸ªä»»åŠ¡åŒæ—¶æ‰§è¡Œï¼Œå¤§å¹…æå‡æ€§èƒ½ã€‚</p><h2 id="ğŸ¯-æ ¸å¿ƒæ¦‚å¿µ" tabindex="-1">ğŸ¯ æ ¸å¿ƒæ¦‚å¿µ <a class="header-anchor" href="#ğŸ¯-æ ¸å¿ƒæ¦‚å¿µ" aria-label="Permalink to &quot;ğŸ¯ æ ¸å¿ƒæ¦‚å¿µ&quot;">â€‹</a></h2><h3 id="ä»€ä¹ˆæ˜¯å¹¶è¡Œæ‰§è¡Œ" tabindex="-1">ä»€ä¹ˆæ˜¯å¹¶è¡Œæ‰§è¡Œï¼Ÿ <a class="header-anchor" href="#ä»€ä¹ˆæ˜¯å¹¶è¡Œæ‰§è¡Œ" aria-label="Permalink to &quot;ä»€ä¹ˆæ˜¯å¹¶è¡Œæ‰§è¡Œï¼Ÿ&quot;">â€‹</a></h3><p>åœ¨ LangGraph ä¸­ï¼Œå¹¶è¡Œæ‰§è¡ŒæŒ‡çš„æ˜¯è®©å¤šä¸ªèŠ‚ç‚¹åœ¨åŒä¸€æ—¶é—´æ­¥ï¼ˆstepï¼‰å†…åŒæ—¶è¿è¡Œï¼Œè€Œä¸æ˜¯æŒ‰é¡ºåºä¸€ä¸ªæ¥ä¸€ä¸ªæ‰§è¡Œã€‚è¿™ç§æ¨¡å¼å¸¸è¢«ç§°ä¸º <strong>Fan-outï¼ˆæ‰‡å‡ºï¼‰å’Œ Fan-inï¼ˆæ‰‡å…¥ï¼‰</strong>ï¼š</p><ul><li><strong>Fan-outï¼ˆæ‰‡å‡ºï¼‰</strong>ï¼šä¸€ä¸ªèŠ‚ç‚¹çš„è¾“å‡ºåˆ†å‘åˆ°å¤šä¸ªå¹¶è¡ŒèŠ‚ç‚¹</li><li><strong>Fan-inï¼ˆæ‰‡å…¥ï¼‰</strong>ï¼šå¤šä¸ªå¹¶è¡ŒèŠ‚ç‚¹çš„è¾“å‡ºæ±‡èšåˆ°ä¸€ä¸ªèŠ‚ç‚¹</li></ul><hr><h2 id="ğŸ”§-åŸºç¡€ç¤ºä¾‹-çº¿æ€§æ‰§è¡Œ-vs-å¹¶è¡Œæ‰§è¡Œ" tabindex="-1">ğŸ”§ åŸºç¡€ç¤ºä¾‹ï¼šçº¿æ€§æ‰§è¡Œ vs å¹¶è¡Œæ‰§è¡Œ <a class="header-anchor" href="#ğŸ”§-åŸºç¡€ç¤ºä¾‹-çº¿æ€§æ‰§è¡Œ-vs-å¹¶è¡Œæ‰§è¡Œ" aria-label="Permalink to &quot;ğŸ”§ åŸºç¡€ç¤ºä¾‹ï¼šçº¿æ€§æ‰§è¡Œ vs å¹¶è¡Œæ‰§è¡Œ&quot;">â€‹</a></h2><h3 id="_1-çº¿æ€§æ‰§è¡Œå›¾-sequential" tabindex="-1">1. çº¿æ€§æ‰§è¡Œå›¾ï¼ˆSequentialï¼‰ <a class="header-anchor" href="#_1-çº¿æ€§æ‰§è¡Œå›¾-sequential" aria-label="Permalink to &quot;1. çº¿æ€§æ‰§è¡Œå›¾ï¼ˆSequentialï¼‰&quot;">â€‹</a></h3><p>é¦–å…ˆçœ‹ä¸€ä¸ªç®€å•çš„çº¿æ€§æ‰§è¡Œç¤ºä¾‹ï¼š</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> typing </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Any</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> typing_extensions </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> TypedDict</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langgraph.graph </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> StateGraph, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">START</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">END</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> State</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TypedDict</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    state: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ReturnNodeValue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    def</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> __init__</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self, node_secret: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">._value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> node_secret</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    def</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> __call__</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self, state: State) -&gt; Any:</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Adding </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">._value</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> to </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">state[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;state&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;state&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">._value]}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ„å»ºå›¾</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">builder </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> StateGraph(State)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">builder.add_node(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;a&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, ReturnNodeValue(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;I&#39;m A&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">builder.add_node(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;b&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, ReturnNodeValue(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;I&#39;m B&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">builder.add_node(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;c&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, ReturnNodeValue(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;I&#39;m C&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">builder.add_node(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;d&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, ReturnNodeValue(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;I&#39;m D&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># çº¿æ€§æµç¨‹ï¼šSTART â†’ a â†’ b â†’ c â†’ d â†’ END</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">builder.add_edge(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">START</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;a&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">builder.add_edge(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;a&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;b&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">builder.add_edge(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;b&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;c&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">builder.add_edge(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;c&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;d&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">builder.add_edge(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;d&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">END</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">graph </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> builder.compile()</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><p><strong>æ‰§è¡Œç»“æœï¼š</strong></p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Adding I&#39;m A to []</span></span>
<span class="line"><span>Adding I&#39;m B to [&quot;I&#39;m A&quot;]</span></span>
<span class="line"><span>Adding I&#39;m C to [&quot;I&#39;m B&quot;]</span></span>
<span class="line"><span>Adding I&#39;m D to [&quot;I&#39;m C&quot;]</span></span>
<span class="line"><span></span></span>
<span class="line"><span>{&#39;state&#39;: [&quot;I&#39;m D&quot;]}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>åˆ†æï¼š</strong> æ¯ä¸ªèŠ‚ç‚¹æŒ‰é¡ºåºæ‰§è¡Œï¼Œåä¸€ä¸ªèŠ‚ç‚¹ä¼š<strong>è¦†ç›–</strong>å‰ä¸€ä¸ªèŠ‚ç‚¹çš„çŠ¶æ€ã€‚</p><hr><h3 id="_2-å¹¶è¡Œæ‰§è¡Œå›¾-parallel-é‡åˆ°é—®é¢˜" tabindex="-1">2. å¹¶è¡Œæ‰§è¡Œå›¾ï¼ˆParallelï¼‰- é‡åˆ°é—®é¢˜ï¼ <a class="header-anchor" href="#_2-å¹¶è¡Œæ‰§è¡Œå›¾-parallel-é‡åˆ°é—®é¢˜" aria-label="Permalink to &quot;2. å¹¶è¡Œæ‰§è¡Œå›¾ï¼ˆParallelï¼‰- é‡åˆ°é—®é¢˜ï¼&quot;">â€‹</a></h3><p>ç°åœ¨è®©æˆ‘ä»¬å°è¯•è®© <code>b</code> å’Œ <code>c</code> å¹¶è¡Œæ‰§è¡Œï¼š</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">builder </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> StateGraph(State)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">builder.add_node(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;a&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, ReturnNodeValue(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;I&#39;m A&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">builder.add_node(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;b&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, ReturnNodeValue(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;I&#39;m B&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">builder.add_node(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;c&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, ReturnNodeValue(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;I&#39;m C&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">builder.add_node(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;d&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, ReturnNodeValue(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;I&#39;m D&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å¹¶è¡Œæµç¨‹ï¼ša æ‰‡å‡ºåˆ° b å’Œ cï¼Œç„¶åæ‰‡å…¥åˆ° d</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">builder.add_edge(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">START</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;a&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">builder.add_edge(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;a&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;b&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># a â†’ b</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">builder.add_edge(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;a&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;c&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># a â†’ cï¼ˆå¹¶è¡Œï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">builder.add_edge(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;b&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;d&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># b â†’ d</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">builder.add_edge(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;c&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;d&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># c â†’ d</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">builder.add_edge(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;d&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">END</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">graph </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> builder.compile()</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p><strong>æ‰§è¡Œæ—¶ä¼šæŠ¥é”™ï¼</strong></p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Adding I&#39;m A to []</span></span>
<span class="line"><span>Adding I&#39;m B to [&quot;I&#39;m A&quot;]</span></span>
<span class="line"><span>Adding I&#39;m C to [&quot;I&#39;m A&quot;]</span></span>
<span class="line"><span>An error occurred: At key &#39;state&#39;: Can receive only one value per step.</span></span>
<span class="line"><span>Use an Annotated key to handle multiple values.</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>ä¸ºä»€ä¹ˆä¼šæŠ¥é”™ï¼Ÿ</strong></p><p>å› ä¸ºåœ¨åŒä¸€ä¸ªæ—¶é—´æ­¥ï¼ˆstepï¼‰å†…ï¼Œ<code>b</code> å’Œ <code>c</code> éƒ½è¯•å›¾æ›´æ–° <code>state</code> è¿™ä¸ªé”®ã€‚LangGraph ä¸çŸ¥é“å¦‚ä½•åˆå¹¶è¿™ä¸¤ä¸ªæ›´æ–°ï¼Œæ‰€ä»¥æŠ›å‡º <code>InvalidUpdateError</code> é”™è¯¯ã€‚</p><hr><h2 id="ğŸ”‘-è§£å†³æ–¹æ¡ˆ-ä½¿ç”¨-reducer" tabindex="-1">ğŸ”‘ è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨ Reducer <a class="header-anchor" href="#ğŸ”‘-è§£å†³æ–¹æ¡ˆ-ä½¿ç”¨-reducer" aria-label="Permalink to &quot;ğŸ”‘ è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨ Reducer&quot;">â€‹</a></h2><h3 id="ä»€ä¹ˆæ˜¯-reducer" tabindex="-1">ä»€ä¹ˆæ˜¯ Reducerï¼Ÿ <a class="header-anchor" href="#ä»€ä¹ˆæ˜¯-reducer" aria-label="Permalink to &quot;ä»€ä¹ˆæ˜¯ Reducerï¼Ÿ&quot;">â€‹</a></h3><p><strong>Reducer</strong> æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºå®šä¹‰å¦‚ä½•åˆå¹¶å¤šä¸ªå¹¶è¡Œæ›´æ–°ã€‚åœ¨ Python ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>Annotated</code> ç±»å‹æç¤ºæ¥æŒ‡å®š reducerã€‚</p><h3 id="python-çŸ¥è¯†ç‚¹-annotated-ç±»å‹æç¤º" tabindex="-1">Python çŸ¥è¯†ç‚¹ï¼š<code>Annotated</code> ç±»å‹æç¤º <a class="header-anchor" href="#python-çŸ¥è¯†ç‚¹-annotated-ç±»å‹æç¤º" aria-label="Permalink to &quot;Python çŸ¥è¯†ç‚¹ï¼š`Annotated` ç±»å‹æç¤º&quot;">â€‹</a></h3><p><code>Annotated</code> æ˜¯ Python 3.9+ å¼•å…¥çš„ç±»å‹æç¤ºå·¥å…·ï¼Œå…è®¸æˆ‘ä»¬ä¸ºç±»å‹æ·»åŠ å…ƒæ•°æ®ï¼š</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> typing </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Annotated</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> operator</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è¯­æ³•ï¼šAnnotated[ç±»å‹, å…ƒæ•°æ®]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">state: Annotated[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">list</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, operator.add]</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#      ^^^^^^^^  ^^^^  ^^^^^^^^^^^^^</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#      å…³é”®å­—    ç±»å‹   reducer å‡½æ•°</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="ä½¿ç”¨-operator-add-ä½œä¸º-reducer" tabindex="-1">ä½¿ç”¨ <code>operator.add</code> ä½œä¸º Reducer <a class="header-anchor" href="#ä½¿ç”¨-operator-add-ä½œä¸º-reducer" aria-label="Permalink to &quot;ä½¿ç”¨ `operator.add` ä½œä¸º Reducer&quot;">â€‹</a></h3><p><code>operator.add</code> æ˜¯ Python å†…ç½®çš„åŠ æ³•è¿ç®—ç¬¦å‡½æ•°ã€‚å¯¹äºåˆ—è¡¨ï¼Œå®ƒæ‰§è¡Œ<strong>åˆ—è¡¨æ‹¼æ¥</strong>ï¼š</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> operator</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># operator.add å¯¹åˆ—è¡¨çš„ä½œç”¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> operator.add([</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">], [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ç»“æœ: [1, 2, 3, 4]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>ä¿®å¤åçš„ä»£ç ï¼š</strong></p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> operator</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> typing </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Annotated</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> State</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TypedDict</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # ä½¿ç”¨ operator.add ä½œä¸º reducerï¼Œè®© state æ”¯æŒè¿½åŠ </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    state: Annotated[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">list</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, operator.add]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ„å»ºå›¾ï¼ˆç»“æ„åŒä¸Šï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">builder </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> StateGraph(State)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">builder.add_node(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;a&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, ReturnNodeValue(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;I&#39;m A&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">builder.add_node(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;b&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, ReturnNodeValue(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;I&#39;m B&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">builder.add_node(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;c&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, ReturnNodeValue(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;I&#39;m C&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">builder.add_node(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;d&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, ReturnNodeValue(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;I&#39;m D&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">builder.add_edge(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">START</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;a&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">builder.add_edge(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;a&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;b&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">builder.add_edge(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;a&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;c&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">builder.add_edge(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;b&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;d&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">builder.add_edge(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;c&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;d&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">builder.add_edge(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;d&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">END</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">graph </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> builder.compile()</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p><strong>æ‰§è¡Œç»“æœï¼š</strong></p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Adding I&#39;m A to []</span></span>
<span class="line"><span>Adding I&#39;m B to [&quot;I&#39;m A&quot;]</span></span>
<span class="line"><span>Adding I&#39;m C to [&quot;I&#39;m A&quot;]</span></span>
<span class="line"><span>Adding I&#39;m D to [&quot;I&#39;m A&quot;, &quot;I&#39;m B&quot;, &quot;I&#39;m C&quot;]</span></span>
<span class="line"><span></span></span>
<span class="line"><span>{&#39;state&#39;: [&quot;I&#39;m A&quot;, &quot;I&#39;m B&quot;, &quot;I&#39;m C&quot;, &quot;I&#39;m D&quot;]}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>âœ… æˆåŠŸï¼</strong> ç°åœ¨ <code>b</code> å’Œ <code>c</code> çš„æ›´æ–°éƒ½è¢«ä¿ç•™äº†ï¼Œå®ƒä»¬çš„ç»“æœè¢«æ‹¼æ¥åˆ° <code>state</code> åˆ—è¡¨ä¸­ã€‚</p><hr><h2 id="â³-ç­‰å¾…å¹¶è¡ŒèŠ‚ç‚¹å®Œæˆ" tabindex="-1">â³ ç­‰å¾…å¹¶è¡ŒèŠ‚ç‚¹å®Œæˆ <a class="header-anchor" href="#â³-ç­‰å¾…å¹¶è¡ŒèŠ‚ç‚¹å®Œæˆ" aria-label="Permalink to &quot;â³ ç­‰å¾…å¹¶è¡ŒèŠ‚ç‚¹å®Œæˆ&quot;">â€‹</a></h2><h3 id="ä¸åŒé•¿åº¦çš„å¹¶è¡Œè·¯å¾„" tabindex="-1">ä¸åŒé•¿åº¦çš„å¹¶è¡Œè·¯å¾„ <a class="header-anchor" href="#ä¸åŒé•¿åº¦çš„å¹¶è¡Œè·¯å¾„" aria-label="Permalink to &quot;ä¸åŒé•¿åº¦çš„å¹¶è¡Œè·¯å¾„&quot;">â€‹</a></h3><p>å½“å¹¶è¡Œè·¯å¾„çš„é•¿åº¦ä¸åŒæ—¶ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">builder </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> StateGraph(State)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">builder.add_node(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;a&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, ReturnNodeValue(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;I&#39;m A&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">builder.add_node(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;b&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, ReturnNodeValue(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;I&#39;m B&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">builder.add_node(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;b2&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, ReturnNodeValue(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;I&#39;m B2&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># b è·¯å¾„çš„é¢å¤–èŠ‚ç‚¹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">builder.add_node(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;c&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, ReturnNodeValue(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;I&#39;m C&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">builder.add_node(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;d&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, ReturnNodeValue(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;I&#39;m D&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">builder.add_edge(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">START</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;a&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">builder.add_edge(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;a&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;b&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">builder.add_edge(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;a&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;c&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">builder.add_edge(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;b&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;b2&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># b â†’ b2ï¼ˆæ›´é•¿çš„è·¯å¾„ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">builder.add_edge([</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;b2&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;c&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">], </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;d&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ç­‰å¾… b2 å’Œ c éƒ½å®Œæˆ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">builder.add_edge(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;d&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">END</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">graph </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> builder.compile()</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p><strong>æ‰§è¡Œç»“æœï¼š</strong></p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Adding I&#39;m A to []</span></span>
<span class="line"><span>Adding I&#39;m B to [&quot;I&#39;m A&quot;]</span></span>
<span class="line"><span>Adding I&#39;m C to [&quot;I&#39;m A&quot;]</span></span>
<span class="line"><span>Adding I&#39;m B2 to [&quot;I&#39;m A&quot;, &quot;I&#39;m B&quot;, &quot;I&#39;m C&quot;]</span></span>
<span class="line"><span>Adding I&#39;m D to [&quot;I&#39;m A&quot;, &quot;I&#39;m B&quot;, &quot;I&#39;m C&quot;, &quot;I&#39;m B2&quot;]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>å…³é”®ç‚¹ï¼š</strong></p><ul><li><code>b</code>ã€<code>b2</code> å’Œ <code>c</code> éƒ½å±äº<strong>åŒä¸€ä¸ªæ‰§è¡Œæ­¥éª¤ï¼ˆstepï¼‰</strong></li><li>è™½ç„¶ <code>c</code> å…ˆå®Œæˆï¼Œä½†å›¾ä¼š<strong>ç­‰å¾…</strong> <code>b2</code> ä¹Ÿå®Œæˆåï¼Œæ‰è¿›å…¥ <code>d</code> èŠ‚ç‚¹</li><li>è¿™æ˜¯ LangGraph çš„è‡ªåŠ¨åŒæ­¥æœºåˆ¶</li></ul><hr><h2 id="ğŸ¨-æ§åˆ¶çŠ¶æ€æ›´æ–°çš„é¡ºåº" tabindex="-1">ğŸ¨ æ§åˆ¶çŠ¶æ€æ›´æ–°çš„é¡ºåº <a class="header-anchor" href="#ğŸ¨-æ§åˆ¶çŠ¶æ€æ›´æ–°çš„é¡ºåº" aria-label="Permalink to &quot;ğŸ¨ æ§åˆ¶çŠ¶æ€æ›´æ–°çš„é¡ºåº&quot;">â€‹</a></h2><h3 id="é—®é¢˜-é»˜è®¤é¡ºåºä¸å¯æ§" tabindex="-1">é—®é¢˜ï¼šé»˜è®¤é¡ºåºä¸å¯æ§ <a class="header-anchor" href="#é—®é¢˜-é»˜è®¤é¡ºåºä¸å¯æ§" aria-label="Permalink to &quot;é—®é¢˜ï¼šé»˜è®¤é¡ºåºä¸å¯æ§&quot;">â€‹</a></h3><p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œè™½ç„¶éƒ½æ˜¯åŒä¸€æ­¥ï¼Œä½†çŠ¶æ€æ›´æ–°çš„é¡ºåºæ˜¯ï¼š<code>[&quot;I&#39;m A&quot;, &quot;I&#39;m B&quot;, &quot;I&#39;m C&quot;, &quot;I&#39;m B2&quot;]</code></p><p>æ³¨æ„ <code>&quot;I&#39;m C&quot;</code> å‡ºç°åœ¨ <code>&quot;I&#39;m B2&quot;</code> ä¹‹å‰ï¼Œå³ä½¿ <code>b2</code> æ˜¯ <code>b</code> çš„åç»­èŠ‚ç‚¹ã€‚</p><p><strong>åŸå› ï¼š</strong> LangGraph æ ¹æ®å›¾çš„æ‹“æ‰‘ç»“æ„å†³å®šæ›´æ–°é¡ºåºï¼Œæˆ‘ä»¬æ— æ³•ç›´æ¥æ§åˆ¶ã€‚</p><h3 id="è§£å†³æ–¹æ¡ˆ-è‡ªå®šä¹‰-reducer" tabindex="-1">è§£å†³æ–¹æ¡ˆï¼šè‡ªå®šä¹‰ Reducer <a class="header-anchor" href="#è§£å†³æ–¹æ¡ˆ-è‡ªå®šä¹‰-reducer" aria-label="Permalink to &quot;è§£å†³æ–¹æ¡ˆï¼šè‡ªå®šä¹‰ Reducer&quot;">â€‹</a></h3><p>æˆ‘ä»¬å¯ä»¥ç¼–å†™è‡ªå®šä¹‰ reducer æ¥æ’åºçŠ¶æ€æ›´æ–°ï¼š</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> sorting_reducer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(left, right):</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;åˆå¹¶å¹¶æ’åºåˆ—è¡¨ä¸­çš„å€¼&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # ç¡®ä¿ left æ˜¯åˆ—è¡¨</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> not</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> isinstance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(left, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">list</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        left </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [left]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # ç¡®ä¿ right æ˜¯åˆ—è¡¨</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> not</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> isinstance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(right, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">list</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        right </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [right]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # åˆå¹¶å¹¶æ’åº</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> sorted</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(left </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> right, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">reverse</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">False</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> State</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TypedDict</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # ä½¿ç”¨è‡ªå®šä¹‰çš„ sorting_reducer</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    state: Annotated[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">list</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, sorting_reducer]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p><strong>æ‰§è¡Œç»“æœï¼š</strong></p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Adding I&#39;m A to []</span></span>
<span class="line"><span>Adding I&#39;m B to [&quot;I&#39;m A&quot;]</span></span>
<span class="line"><span>Adding I&#39;m C to [&quot;I&#39;m A&quot;]</span></span>
<span class="line"><span>Adding I&#39;m B2 to [&quot;I&#39;m A&quot;, &quot;I&#39;m B&quot;, &quot;I&#39;m C&quot;]</span></span>
<span class="line"><span>Adding I&#39;m D to [&quot;I&#39;m A&quot;, &quot;I&#39;m B&quot;, &quot;I&#39;m B2&quot;, &quot;I&#39;m C&quot;]</span></span>
<span class="line"><span></span></span>
<span class="line"><span>{&#39;state&#39;: [&quot;I&#39;m A&quot;, &quot;I&#39;m B&quot;, &quot;I&#39;m B2&quot;, &quot;I&#39;m C&quot;, &quot;I&#39;m D&quot;]}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><strong>æ³¨æ„ï¼š</strong> ç°åœ¨é¡ºåºå˜æˆäº† <code>[&quot;I&#39;m A&quot;, &quot;I&#39;m B&quot;, &quot;I&#39;m B2&quot;, &quot;I&#39;m C&quot;, &quot;I&#39;m D&quot;]</code>ï¼ŒæŒ‰å­—æ¯é¡ºåºæ’åˆ—ï¼</p><h3 id="ğŸ”-reducer-å‡½æ•°è¯¦è§£" tabindex="-1">ğŸ” Reducer å‡½æ•°è¯¦è§£ <a class="header-anchor" href="#ğŸ”-reducer-å‡½æ•°è¯¦è§£" aria-label="Permalink to &quot;ğŸ” Reducer å‡½æ•°è¯¦è§£&quot;">â€‹</a></h3><p>è‡ªå®šä¹‰ reducer çš„å·¥ä½œåŸç†ï¼š</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> sorting_reducer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(left, right):</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # left: å½“å‰çŠ¶æ€çš„å€¼</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # right: æ–°èŠ‚ç‚¹è¿”å›çš„å€¼</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # 1. æ ‡å‡†åŒ–ä¸ºåˆ—è¡¨</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> not</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> isinstance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(left, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">list</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        left </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [left]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> not</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> isinstance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(right, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">list</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        right </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [right]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # 2. åˆå¹¶å¹¶å¤„ç†ï¼ˆè¿™é‡Œæ˜¯æ’åºï¼‰</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> sorted</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(left </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> right, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">reverse</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">False</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p><strong>å…¶ä»– reducer ç¤ºä¾‹ï¼š</strong></p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åªä¿ç•™æœ€æ–°çš„ N ä¸ªå€¼</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> keep_last_n</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(n</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> reducer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(left, right):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        combined </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (left </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> isinstance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(left, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">list</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [left]) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                   (right </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> isinstance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(right, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">list</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [right])</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> combined[</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">n:]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> reducer</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å»é‡</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> unique_reducer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(left, right):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    combined </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (left </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> isinstance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(left, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">list</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [left]) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">               (right </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> isinstance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(right, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">list</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [right])</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> list</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">dict</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.fromkeys(combined))  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ä¿æŒé¡ºåºçš„å»é‡</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><hr><h2 id="ğŸ¤–-å®æˆ˜æ¡ˆä¾‹-å¹¶è¡Œæ£€ç´¢ç”Ÿæˆç­”æ¡ˆ" tabindex="-1">ğŸ¤– å®æˆ˜æ¡ˆä¾‹ï¼šå¹¶è¡Œæ£€ç´¢ç”Ÿæˆç­”æ¡ˆ <a class="header-anchor" href="#ğŸ¤–-å®æˆ˜æ¡ˆä¾‹-å¹¶è¡Œæ£€ç´¢ç”Ÿæˆç­”æ¡ˆ" aria-label="Permalink to &quot;ğŸ¤– å®æˆ˜æ¡ˆä¾‹ï¼šå¹¶è¡Œæ£€ç´¢ç”Ÿæˆç­”æ¡ˆ&quot;">â€‹</a></h2><h3 id="åœºæ™¯" tabindex="-1">åœºæ™¯ <a class="header-anchor" href="#åœºæ™¯" aria-label="Permalink to &quot;åœºæ™¯&quot;">â€‹</a></h3><p>æˆ‘ä»¬è¦æ„å»ºä¸€ä¸ªé—®ç­”ç³»ç»Ÿï¼ŒåŒæ—¶ä»ä¸¤ä¸ªæ¥æºè·å–ä¿¡æ¯ï¼š</p><ol><li><strong>Wikipedia</strong> - è·å–ç™¾ç§‘çŸ¥è¯†</li><li><strong>Web Search (Tavily)</strong> - è·å–æœ€æ–°ç½‘ç»œä¿¡æ¯</li></ol><p>ç„¶åè®© LLM åŸºäºè¿™äº›ä¿¡æ¯ç”Ÿæˆç­”æ¡ˆã€‚</p><h3 id="state-å®šä¹‰" tabindex="-1">State å®šä¹‰ <a class="header-anchor" href="#state-å®šä¹‰" aria-label="Permalink to &quot;State å®šä¹‰&quot;">â€‹</a></h3><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> operator</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> typing </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Annotated</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> typing_extensions </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> TypedDict</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> State</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TypedDict</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    question: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                              # ç”¨æˆ·é—®é¢˜</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    answer: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                                # ç”Ÿæˆçš„ç­”æ¡ˆ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    context: Annotated[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">list</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, operator.add]     </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ£€ç´¢åˆ°çš„ä¸Šä¸‹æ–‡ï¼ˆæ”¯æŒå¹¶è¡Œè¿½åŠ ï¼‰</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><strong>å…³é”®ç‚¹ï¼š</strong></p><ul><li><code>context</code> ä½¿ç”¨ <code>operator.add</code> ä½œä¸º reducerï¼Œå…è®¸ä¸¤ä¸ªæ£€ç´¢èŠ‚ç‚¹å¹¶è¡Œå†™å…¥</li></ul><h3 id="èŠ‚ç‚¹å®ç°" tabindex="-1">èŠ‚ç‚¹å®ç° <a class="header-anchor" href="#èŠ‚ç‚¹å®ç°" aria-label="Permalink to &quot;èŠ‚ç‚¹å®ç°&quot;">â€‹</a></h3><h4 id="_1-web-æœç´¢èŠ‚ç‚¹" tabindex="-1">1. Web æœç´¢èŠ‚ç‚¹ <a class="header-anchor" href="#_1-web-æœç´¢èŠ‚ç‚¹" aria-label="Permalink to &quot;1. Web æœç´¢èŠ‚ç‚¹&quot;">â€‹</a></h4><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain_community.tools </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> TavilySearchResults</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> search_web</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state):</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;ä»ç½‘ç»œæœç´¢è·å–æ–‡æ¡£&quot;&quot;&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # ä½¿ç”¨ Tavily æœç´¢</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    tavily_search </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> TavilySearchResults(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">max_results</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    search_docs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tavily_search.invoke(state[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;question&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # æ ¼å¼åŒ–æœç´¢ç»“æœ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    formatted_search_docs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\n\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">---</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\n\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.join(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        [</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;&lt;Document href=&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">doc[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;url&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\n{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">doc[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;content&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&lt;/Document&gt;&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> doc </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> search_docs</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    )</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;context&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [formatted_search_docs]}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p><strong>çŸ¥è¯†ç‚¹ï¼š</strong></p><ul><li>è¿”å› <code>{&quot;context&quot;: [formatted_search_docs]}</code>ï¼Œæ³¨æ„ <code>context</code> çš„å€¼æ˜¯ä¸€ä¸ª<strong>åˆ—è¡¨</strong></li><li>è¿™æ · <code>operator.add</code> å¯ä»¥å°†å…¶æ‹¼æ¥åˆ°ç°æœ‰çš„ context ä¸­</li></ul><h4 id="_2-wikipedia-æœç´¢èŠ‚ç‚¹" tabindex="-1">2. Wikipedia æœç´¢èŠ‚ç‚¹ <a class="header-anchor" href="#_2-wikipedia-æœç´¢èŠ‚ç‚¹" aria-label="Permalink to &quot;2. Wikipedia æœç´¢èŠ‚ç‚¹&quot;">â€‹</a></h4><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain_community.document_loaders </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> WikipediaLoader</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> search_wikipedia</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state):</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;ä» Wikipedia è·å–æ–‡æ¡£&quot;&quot;&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # æœç´¢ Wikipedia</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    search_docs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> WikipediaLoader(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">        query</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">state[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;question&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">        load_max_docs</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ).load()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # æ ¼å¼åŒ–æœç´¢ç»“æœ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    formatted_search_docs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\n\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">---</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\n\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.join(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        [</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;&lt;Document source=&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">doc.metadata[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;source&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot; page=&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">doc.metadata.get(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;page&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\n{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">doc.page_content</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&lt;/Document&gt;&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> doc </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> search_docs</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    )</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;context&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [formatted_search_docs]}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h4 id="_3-ç”Ÿæˆç­”æ¡ˆèŠ‚ç‚¹" tabindex="-1">3. ç”Ÿæˆç­”æ¡ˆèŠ‚ç‚¹ <a class="header-anchor" href="#_3-ç”Ÿæˆç­”æ¡ˆèŠ‚ç‚¹" aria-label="Permalink to &quot;3. ç”Ÿæˆç­”æ¡ˆèŠ‚ç‚¹&quot;">â€‹</a></h4><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain_openai </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ChatOpenAI</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain_core.messages </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> HumanMessage, SystemMessage</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">llm </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ChatOpenAI(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">model</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;gpt-4o&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">temperature</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> generate_answer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state):</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;åŸºäºä¸Šä¸‹æ–‡ç”Ÿæˆç­”æ¡ˆ&quot;&quot;&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # è·å–çŠ¶æ€</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    context </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> state[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;context&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    question </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> state[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;question&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # æ„å»ºæç¤ºè¯</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    answer_template </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;&quot;&quot;Answer the question </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{question}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> using this context: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{context}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    answer_instructions </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> answer_template.format(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">        question</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">question,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">        context</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">context</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    )</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # è°ƒç”¨ LLM ç”Ÿæˆç­”æ¡ˆ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    answer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> llm.invoke([</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        SystemMessage(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">content</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">answer_instructions),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        HumanMessage(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">content</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Answer the question.&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ])</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;answer&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: answer}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h3 id="æ„å»ºå¹¶è¡Œå›¾" tabindex="-1">æ„å»ºå¹¶è¡Œå›¾ <a class="header-anchor" href="#æ„å»ºå¹¶è¡Œå›¾" aria-label="Permalink to &quot;æ„å»ºå¹¶è¡Œå›¾&quot;">â€‹</a></h3><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langgraph.graph </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> StateGraph, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">START</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">END</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">builder </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> StateGraph(State)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ·»åŠ èŠ‚ç‚¹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">builder.add_node(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;search_web&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, search_web)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">builder.add_node(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;search_wikipedia&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, search_wikipedia)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">builder.add_node(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;generate_answer&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, generate_answer)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å¹¶è¡Œæµç¨‹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">builder.add_edge(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">START</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;search_wikipedia&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># START â†’ search_wikipedia</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">builder.add_edge(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">START</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;search_web&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)        </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># START â†’ search_webï¼ˆå¹¶è¡Œï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">builder.add_edge(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;search_wikipedia&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;generate_answer&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ±‡èš</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">builder.add_edge(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;search_web&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;generate_answer&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)        </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ±‡èš</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">builder.add_edge(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;generate_answer&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">END</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">graph </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> builder.compile()</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p><strong>æµç¨‹å›¾ï¼š</strong></p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>          START</span></span>
<span class="line"><span>         /     \</span></span>
<span class="line"><span>        /       \</span></span>
<span class="line"><span>  search_web  search_wikipedia</span></span>
<span class="line"><span>        \       /</span></span>
<span class="line"><span>         \     /</span></span>
<span class="line"><span>    generate_answer</span></span>
<span class="line"><span>           |</span></span>
<span class="line"><span>          END</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="æ‰§è¡ŒæŸ¥è¯¢" tabindex="-1">æ‰§è¡ŒæŸ¥è¯¢ <a class="header-anchor" href="#æ‰§è¡ŒæŸ¥è¯¢" aria-label="Permalink to &quot;æ‰§è¡ŒæŸ¥è¯¢&quot;">â€‹</a></h3><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> graph.invoke({</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;question&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;How were Nvidia&#39;s Q2 2024 earnings&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(result[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;answer&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">].content)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>è¾“å‡ºç¤ºä¾‹ï¼š</strong></p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Nvidia&#39;s Q2 2024 earnings were strong, showcasing record revenue and a robust</span></span>
<span class="line"><span>performance in its data center division. The company reported revenue of $30.0</span></span>
<span class="line"><span>billion, which was up 15% from the previous quarter and up 122% from a year ago.</span></span>
<span class="line"><span>GAAP earnings per diluted share were $0.67, up 12% from the previous quarter and</span></span>
<span class="line"><span>up 168% from a year ago, while non-GAAP earnings per diluted share were $0.68...</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><hr><h2 id="ğŸ“-æ ¸å¿ƒçŸ¥è¯†ç‚¹æ€»ç»“" tabindex="-1">ğŸ“ æ ¸å¿ƒçŸ¥è¯†ç‚¹æ€»ç»“ <a class="header-anchor" href="#ğŸ“-æ ¸å¿ƒçŸ¥è¯†ç‚¹æ€»ç»“" aria-label="Permalink to &quot;ğŸ“ æ ¸å¿ƒçŸ¥è¯†ç‚¹æ€»ç»“&quot;">â€‹</a></h2><h3 id="langgraph-ç‰¹æœ‰æ¦‚å¿µ" tabindex="-1">LangGraph ç‰¹æœ‰æ¦‚å¿µ <a class="header-anchor" href="#langgraph-ç‰¹æœ‰æ¦‚å¿µ" aria-label="Permalink to &quot;LangGraph ç‰¹æœ‰æ¦‚å¿µ&quot;">â€‹</a></h3><ol><li><p><strong>å¹¶è¡Œæ‰§è¡Œæ¨¡å¼</strong></p><ul><li>Fan-outï¼šä¸€ä¸ªèŠ‚ç‚¹æ‰‡å‡ºåˆ°å¤šä¸ªèŠ‚ç‚¹</li><li>Fan-inï¼šå¤šä¸ªèŠ‚ç‚¹æ±‡èšåˆ°ä¸€ä¸ªèŠ‚ç‚¹</li></ul></li><li><p><strong>Reducer æœºåˆ¶</strong></p><ul><li>å¿…é¡»ä½¿ç”¨ reducer å¤„ç†å¹¶è¡Œæ›´æ–°åŒä¸€ state é”®çš„æƒ…å†µ</li><li><code>operator.add</code> ç”¨äºåˆ—è¡¨æ‹¼æ¥</li><li>å¯ä»¥è‡ªå®šä¹‰ reducer æ§åˆ¶åˆå¹¶é€»è¾‘</li></ul></li><li><p><strong>æ‰§è¡Œæ­¥éª¤ï¼ˆStepï¼‰</strong></p><ul><li>å¹¶è¡ŒèŠ‚ç‚¹åœ¨åŒä¸€ä¸ª step ä¸­æ‰§è¡Œ</li><li>å›¾ä¼šç­‰å¾…æ‰€æœ‰å¹¶è¡Œè·¯å¾„å®Œæˆåå†è¿›å…¥ä¸‹ä¸€æ­¥</li></ul></li><li><p><strong>çŠ¶æ€æ›´æ–°é¡ºåº</strong></p><ul><li>é»˜è®¤é¡ºåºç”± LangGraph æ ¹æ®å›¾æ‹“æ‰‘å†³å®š</li><li>å¯é€šè¿‡è‡ªå®šä¹‰ reducer æ§åˆ¶é¡ºåº</li></ul></li></ol><h3 id="python-ç‰¹æœ‰çŸ¥è¯†ç‚¹" tabindex="-1">Python ç‰¹æœ‰çŸ¥è¯†ç‚¹ <a class="header-anchor" href="#python-ç‰¹æœ‰çŸ¥è¯†ç‚¹" aria-label="Permalink to &quot;Python ç‰¹æœ‰çŸ¥è¯†ç‚¹&quot;">â€‹</a></h3><ol><li><p><strong><code>TypedDict</code></strong></p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> typing_extensions </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> TypedDict</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> State</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TypedDict</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    field1: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    field2: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">int</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>ç”¨äºå®šä¹‰å­—å…¸çš„ç±»å‹ç»“æ„</p></li><li><p><strong><code>Annotated</code> ç±»å‹æç¤º</strong></p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> typing </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Annotated</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è¯­æ³•ï¼šAnnotated[ç±»å‹, å…ƒæ•°æ®...]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">field: Annotated[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">list</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, operator.add]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>ä¸ºç±»å‹æ·»åŠ é¢å¤–çš„å…ƒæ•°æ®</p></li><li><p><strong><code>operator.add</code></strong></p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> operator</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å¯¹åˆ—è¡¨æ‰§è¡Œæ‹¼æ¥</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">operator.add([</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">], [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># [1, 2, 3, 4]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li><li><p><strong>å¯è°ƒç”¨ç±»ï¼ˆCallable Classï¼‰</strong></p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ReturnNodeValue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    def</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> __init__</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self, value):</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">._value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> value</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    def</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> __call__</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self, state):  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å®ç° __call__ æ–¹æ³•</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;state&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">._value]}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>å®ç° <code>__call__</code> æ–¹æ³•ä½¿å¯¹è±¡å¯ä»¥åƒå‡½æ•°ä¸€æ ·è°ƒç”¨</p></li></ol><hr><h2 id="ğŸ’¡-æœ€ä½³å®è·µ" tabindex="-1">ğŸ’¡ æœ€ä½³å®è·µ <a class="header-anchor" href="#ğŸ’¡-æœ€ä½³å®è·µ" aria-label="Permalink to &quot;ğŸ’¡ æœ€ä½³å®è·µ&quot;">â€‹</a></h2><h3 id="_1-ä½•æ—¶ä½¿ç”¨å¹¶è¡Œæ‰§è¡Œ" tabindex="-1">1. ä½•æ—¶ä½¿ç”¨å¹¶è¡Œæ‰§è¡Œï¼Ÿ <a class="header-anchor" href="#_1-ä½•æ—¶ä½¿ç”¨å¹¶è¡Œæ‰§è¡Œ" aria-label="Permalink to &quot;1. ä½•æ—¶ä½¿ç”¨å¹¶è¡Œæ‰§è¡Œï¼Ÿ&quot;">â€‹</a></h3><p>âœ… <strong>é€‚ç”¨åœºæ™¯ï¼š</strong></p><ul><li>å¤šä¸ªç‹¬ç«‹çš„æ•°æ®æºæ£€ç´¢ï¼ˆå¦‚åŒæ—¶æŸ¥è¯¢æ•°æ®åº“ã€APIã€æœç´¢å¼•æ“ï¼‰</li><li>å¤šä¸ªç‹¬ç«‹çš„å¤„ç†ä»»åŠ¡ï¼ˆå¦‚åŒæ—¶è¿›è¡Œæ–‡æœ¬åˆ†ç±»ã€å®ä½“æå–ã€æƒ…æ„Ÿåˆ†æï¼‰</li><li>éœ€è¦å¤šä¸ª Agent åŒæ—¶å·¥ä½œçš„åœºæ™¯</li></ul><p>âŒ <strong>ä¸é€‚ç”¨åœºæ™¯ï¼š</strong></p><ul><li>ä»»åŠ¡ä¹‹é—´æœ‰ä¾èµ–å…³ç³»</li><li>éœ€è¦ä¸¥æ ¼çš„æ‰§è¡Œé¡ºåº</li><li>èµ„æºå—é™ï¼ˆå¦‚ API è°ƒç”¨é™åˆ¶ï¼‰</li></ul><h3 id="_2-reducer-é€‰æ‹©æŒ‡å—" tabindex="-1">2. Reducer é€‰æ‹©æŒ‡å— <a class="header-anchor" href="#_2-reducer-é€‰æ‹©æŒ‡å—" aria-label="Permalink to &quot;2. Reducer é€‰æ‹©æŒ‡å—&quot;">â€‹</a></h3><table tabindex="0"><thead><tr><th>åœºæ™¯</th><th>Reducer</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>æ”¶é›†æ‰€æœ‰ç»“æœ</td><td><code>operator.add</code></td><td>æ‹¼æ¥æ‰€æœ‰æ›´æ–°</td></tr><tr><td>éœ€è¦æ’åº</td><td>è‡ªå®šä¹‰ <code>sorting_reducer</code></td><td>åˆå¹¶åæ’åº</td></tr><tr><td>å»é‡</td><td>è‡ªå®šä¹‰ <code>unique_reducer</code></td><td>åªä¿ç•™å”¯ä¸€å€¼</td></tr><tr><td>åªä¿ç•™æœ€æ–°</td><td>è‡ªå®šä¹‰ <code>lambda left, right: right</code></td><td>è¦†ç›–æ¨¡å¼</td></tr><tr><td>ä¿ç•™æœ€è¿‘ N ä¸ª</td><td>è‡ªå®šä¹‰ <code>keep_last_n</code></td><td>æ»‘åŠ¨çª—å£</td></tr></tbody></table><h3 id="_3-çŠ¶æ€è®¾è®¡å»ºè®®" tabindex="-1">3. çŠ¶æ€è®¾è®¡å»ºè®® <a class="header-anchor" href="#_3-çŠ¶æ€è®¾è®¡å»ºè®®" aria-label="Permalink to &quot;3. çŠ¶æ€è®¾è®¡å»ºè®®&quot;">â€‹</a></h3><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> State</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TypedDict</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # è¾“å…¥å­—æ®µï¼ˆä¸ä¼šè¢«å¹¶è¡Œæ›´æ–°ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    question: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # å¹¶è¡Œæ”¶é›†çš„æ•°æ®ï¼ˆä½¿ç”¨ reducerï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    search_results: Annotated[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">list</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, operator.add]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # æœ€ç»ˆè¾“å‡ºï¼ˆå•ä¸€èŠ‚ç‚¹æ›´æ–°ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    answer: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><hr><h2 id="ğŸš€-è¿›é˜¶æŠ€å·§" tabindex="-1">ğŸš€ è¿›é˜¶æŠ€å·§ <a class="header-anchor" href="#ğŸš€-è¿›é˜¶æŠ€å·§" aria-label="Permalink to &quot;ğŸš€ è¿›é˜¶æŠ€å·§&quot;">â€‹</a></h2><h3 id="ç¨³å®šæ’åº-stable-sorting" tabindex="-1">ç¨³å®šæ’åºï¼ˆStable Sortingï¼‰ <a class="header-anchor" href="#ç¨³å®šæ’åº-stable-sorting" aria-label="Permalink to &quot;ç¨³å®šæ’åºï¼ˆStable Sortingï¼‰&quot;">â€‹</a></h3><p>å¯¹äºéœ€è¦ç²¾ç¡®æ§åˆ¶é¡ºåºçš„åœºæ™¯ï¼Œå¯ä»¥ä½¿ç”¨&quot;ä¸´æ—¶å­—æ®µ + æ±‡èšèŠ‚ç‚¹&quot;æ¨¡å¼ï¼š</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> State</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TypedDict</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    question: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    temp_results: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">dict</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # ä¸´æ—¶å­˜å‚¨å¹¶è¡Œç»“æœ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    final_results: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">list</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # æ’åºåçš„æœ€ç»ˆç»“æœ</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> collect_results</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state):</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;æ±‡èšèŠ‚ç‚¹ï¼šåˆå¹¶å¹¶æ’åºä¸´æ—¶ç»“æœ&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    results </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> state[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;temp_results&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # æŒ‰è‡ªå®šä¹‰é¡ºåºæ’åº</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ordered </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [results[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;source1&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">], results[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;source2&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">], results[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;source3&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;final_results&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: ordered, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;temp_results&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {}}  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ¸…ç©ºä¸´æ—¶å­—æ®µ</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>è¯¦è§ <a href="https://langchain-ai.github.io/langgraph/how-tos/branching/#stable-sorting" target="_blank" rel="noreferrer">å®˜æ–¹æ–‡æ¡£</a></p><hr><h2 id="ğŸ“–-æ‰©å±•é˜…è¯»" tabindex="-1">ğŸ“– æ‰©å±•é˜…è¯» <a class="header-anchor" href="#ğŸ“–-æ‰©å±•é˜…è¯»" aria-label="Permalink to &quot;ğŸ“– æ‰©å±•é˜…è¯»&quot;">â€‹</a></h2><ul><li><a href="https://langchain-ai.github.io/langgraph/how-tos/branching/#how-to-create-branches-for-parallel-node-execution" target="_blank" rel="noreferrer">LangGraph å¹¶è¡Œæ‰§è¡Œå®˜æ–¹æ–‡æ¡£</a></li><li><a href="https://langchain-ai.github.io/langgraph/concepts/low_level/#state" target="_blank" rel="noreferrer">LangGraph State å’Œ Reducer è¯¦è§£</a></li><li>Python <code>typing</code> æ¨¡å—æ–‡æ¡£</li></ul><hr><p><strong>æ€»ç»“</strong>ï¼šå¹¶è¡Œæ‰§è¡Œæ˜¯ LangGraph çš„å¼ºå¤§åŠŸèƒ½ï¼Œé€šè¿‡åˆç†ä½¿ç”¨ reducer å’Œå›¾ç»“æ„è®¾è®¡ï¼Œå¯ä»¥æ„å»ºé«˜æ•ˆçš„å¤šä»»åŠ¡ã€å¤šæ™ºèƒ½ä½“ç³»ç»Ÿã€‚æŒæ¡è¿™ä¸ªæ¦‚å¿µæ˜¯è¿›å…¥é«˜çº§ LangGraph å¼€å‘çš„å…³é”®ä¸€æ­¥ï¼</p></div></div></main><footer class="VPDocFooter" data-v-e6f2a212 data-v-1bcd8184><!--[--><!--]--><div class="edit-info" data-v-1bcd8184><div class="edit-link" data-v-1bcd8184><a class="VPLink link vp-external-link-icon no-icon edit-link-button" href="https://github.com/brycewang-stanford/langgraph-lightning/edit/main/module-4/4.1-parallelization-è¯¦ç»†è§£è¯».md" target="_blank" rel="noreferrer" data-v-1bcd8184><!--[--><span class="vpi-square-pen edit-link-icon" data-v-1bcd8184></span> åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ<!--]--></a></div><div class="last-updated" data-v-1bcd8184><p class="VPLastUpdated" data-v-1bcd8184 data-v-1bb0c8a8>æœ€åæ›´æ–°äº: <time datetime="2025-10-11T23:01:56.000Z" data-v-1bb0c8a8></time></p></div></div><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-1bcd8184><span class="visually-hidden" id="doc-footer-aria-label" data-v-1bcd8184>Pager</span><div class="pager" data-v-1bcd8184><a class="VPLink link pager-link prev" href="/langgraph-lightning/module-3/time-travel-%E8%AF%A6%E7%BB%86%E8%A7%A3%E8%AF%BB.html" data-v-1bcd8184><!--[--><span class="desc" data-v-1bcd8184>ä¸Šä¸€é¡µ</span><span class="title" data-v-1bcd8184>time-travel-è¯¦ç»†è§£è¯»</span><!--]--></a></div><div class="pager" data-v-1bcd8184><a class="VPLink link pager-link next" href="/langgraph-lightning/module-4/4.2-sub-graph-%E8%AF%A6%E7%BB%86%E8%A7%A3%E8%AF%BB.html" data-v-1bcd8184><!--[--><span class="desc" data-v-1bcd8184>ä¸‹ä¸€é¡µ</span><span class="title" data-v-1bcd8184>4.2-sub-graph-è¯¦ç»†è§£è¯»</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-d8b57b2d data-v-566314d4><div class="container" data-v-566314d4><p class="message" data-v-566314d4>åŸºäº MIT è®¸å¯è¯å‘å¸ƒ</p><p class="copyright" data-v-566314d4>Copyright Â© 2024-present Bryce Wang</p></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"docs_index.md\":\"DndphVKj\",\"langgraph-ch-readme.md\":\"B7-8P1OY\",\"langgraph-lightning-readme.md\":\"BwfrNvvf\",\"langgraph-readme.md\":\"-A7AuhRN\",\"module-0_0.1-python basics.md\":\"BobCBDm1\",\"module-0_0.2-langgraph basics-è¯¦ç»†è§£è¯».md\":\"D9fKIaC-\",\"module-1_1.1-simple-graph-è¯¦ç»†è§£è¯».md\":\"DJ7iVvsD\",\"module-1_1.2-chain-è¯¦ç»†è§£è¯».md\":\"DTLVaIzU\",\"module-1_1.3-router-è¯¦ç»†è§£è¯».md\":\"zAw-nWS2\",\"module-1_1.4-agent-è¯¦ç»†è§£è¯».md\":\"DD5SxiTo\",\"module-1_1.5-agent-memory-è¯¦ç»†è§£è¯».md\":\"CygPwIBn\",\"module-1_1.6-deployment-è¯¦ç»†è§£è¯».md\":\"CVAKKex2\",\"module-2_2.1-state-schema-è¯¦ç»†è§£è¯».md\":\"LHfcBPfU\",\"module-2_2.2-state-reducers-è¯¦ç»†è§£è¯».md\":\"Cp3j381k\",\"module-2_2.3-multiple-schemas-è¯¦ç»†è§£è¯».md\":\"ByQjVkMU\",\"module-2_2.4-trim-filter-messages-è¯¦ç»†è§£è¯».md\":\"CuoDo63H\",\"module-2_2.5-chatbot-summarization-è¯¦ç»†è§£è¯».md\":\"TWMvL8Pb\",\"module-2_2.6-chatbot-external-memory-è¯¦ç»†è§£è¯».md\":\"DJR-0p4V\",\"module-3_breakpoints-è¯¦ç»†è§£è¯».md\":\"B34teF6S\",\"module-3_dynamic-breakpoints-è¯¦ç»†è§£è¯».md\":\"HlsUlw9l\",\"module-3_edit-state-human-feedback-è¯¦ç»†è§£è¯».md\":\"DvyTP9h5\",\"module-3_streaming-interruption-è¯¦ç»†è§£è¯».md\":\"CIoqDRrV\",\"module-3_time-travel-è¯¦ç»†è§£è¯».md\":\"D4qi8dRO\",\"module-4_4.1-parallelization-è¯¦ç»†è§£è¯».md\":\"DZQkVBvx\",\"module-4_4.2-sub-graph-è¯¦ç»†è§£è¯».md\":\"DF5wNZQp\",\"module-4_4.3-map-reduce-è¯¦ç»†è§£è¯».md\":\"BmJjVYdc\",\"module-4_4.4-research-assistant-è¯¦ç»†è§£è¯».md\":\"BsEj6QKt\",\"readme.md\":\"Db3S_WrE\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"zh-CN\",\"dir\":\"ltr\",\"title\":\"LangGraph Lightning\",\"description\":\"åŸºäº LangChain Academy çš„æ·±åº¦è§£è¯»ä¸å·¥ç¨‹å®æˆ˜æŒ‡å—\",\"base\":\"/langgraph-lightning/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"logo\":\"/logo.svg\",\"nav\":[{\"text\":\"é¦–é¡µ\",\"link\":\"/\"},{\"text\":\"å¼€å§‹å­¦ä¹ \",\"link\":\"/module-0/0.1-Python Basics\"},{\"text\":\"è¯¾ç¨‹ç« èŠ‚\",\"items\":[{\"text\":\"ç¬¬ 0 ç«  - åŸºç¡€å…¥é—¨\",\"link\":\"/module-0/0.2-LangGraph Basics-è¯¦ç»†è§£è¯»\"},{\"text\":\"ç¬¬ 1 ç«  - æ ¸å¿ƒæ¦‚å¿µ\",\"link\":\"/module-1/1.1-simple-graph-è¯¦ç»†è§£è¯»\"},{\"text\":\"ç¬¬ 2 ç«  - çŠ¶æ€ç®¡ç†\",\"link\":\"/module-2/2.1-state-schema-è¯¦ç»†è§£è¯»\"},{\"text\":\"ç¬¬ 3 ç«  - äººæœºåä½œ\",\"link\":\"/module-3/breakpoints-è¯¦ç»†è§£è¯»\"},{\"text\":\"ç¬¬ 4 ç«  - é«˜çº§æ¨¡å¼\",\"link\":\"/module-4/4.1-parallelization-è¯¦ç»†è§£è¯»\"}]},{\"text\":\"GitHub\",\"link\":\"https://github.com/brycewang-stanford/langgraph-lightning\"}],\"sidebar\":[{\"text\":\"ç¬¬ 0 ç« \",\"collapsed\":false,\"items\":[{\"text\":\"0.1-Python Basics\",\"link\":\"/module-0/0.1-Python Basics.md\"},{\"text\":\"0.2-LangGraph Basics-è¯¦ç»†è§£è¯»\",\"link\":\"/module-0/0.2-LangGraph Basics-è¯¦ç»†è§£è¯».md\"}]},{\"text\":\"ç¬¬ 1 ç« \",\"collapsed\":false,\"items\":[{\"text\":\"1.1-simple-graph-è¯¦ç»†è§£è¯»\",\"link\":\"/module-1/1.1-simple-graph-è¯¦ç»†è§£è¯».md\"},{\"text\":\"1.2-chain-è¯¦ç»†è§£è¯»\",\"link\":\"/module-1/1.2-chain-è¯¦ç»†è§£è¯».md\"},{\"text\":\"1.3-router-è¯¦ç»†è§£è¯»\",\"link\":\"/module-1/1.3-router-è¯¦ç»†è§£è¯».md\"},{\"text\":\"1.4-agent-è¯¦ç»†è§£è¯»\",\"link\":\"/module-1/1.4-agent-è¯¦ç»†è§£è¯».md\"},{\"text\":\"1.5-agent-memory-è¯¦ç»†è§£è¯»\",\"link\":\"/module-1/1.5-agent-memory-è¯¦ç»†è§£è¯».md\"},{\"text\":\"1.6-deployment-è¯¦ç»†è§£è¯»\",\"link\":\"/module-1/1.6-deployment-è¯¦ç»†è§£è¯».md\"}]},{\"text\":\"ç¬¬ 2 ç« \",\"collapsed\":false,\"items\":[{\"text\":\"2.1-state-schema-è¯¦ç»†è§£è¯»\",\"link\":\"/module-2/2.1-state-schema-è¯¦ç»†è§£è¯».md\"},{\"text\":\"2.2-state-reducers-è¯¦ç»†è§£è¯»\",\"link\":\"/module-2/2.2-state-reducers-è¯¦ç»†è§£è¯».md\"},{\"text\":\"2.3-multiple-schemas-è¯¦ç»†è§£è¯»\",\"link\":\"/module-2/2.3-multiple-schemas-è¯¦ç»†è§£è¯».md\"},{\"text\":\"2.4-trim-filter-messages-è¯¦ç»†è§£è¯»\",\"link\":\"/module-2/2.4-trim-filter-messages-è¯¦ç»†è§£è¯».md\"},{\"text\":\"2.5-chatbot-summarization-è¯¦ç»†è§£è¯»\",\"link\":\"/module-2/2.5-chatbot-summarization-è¯¦ç»†è§£è¯».md\"},{\"text\":\"2.6-chatbot-external-memory-è¯¦ç»†è§£è¯»\",\"link\":\"/module-2/2.6-chatbot-external-memory-è¯¦ç»†è§£è¯».md\"}]},{\"text\":\"ç¬¬ 3 ç« \",\"collapsed\":false,\"items\":[{\"text\":\"breakpoints-è¯¦ç»†è§£è¯»\",\"link\":\"/module-3/breakpoints-è¯¦ç»†è§£è¯».md\"},{\"text\":\"dynamic-breakpoints-è¯¦ç»†è§£è¯»\",\"link\":\"/module-3/dynamic-breakpoints-è¯¦ç»†è§£è¯».md\"},{\"text\":\"edit-state-human-feedback-è¯¦ç»†è§£è¯»\",\"link\":\"/module-3/edit-state-human-feedback-è¯¦ç»†è§£è¯».md\"},{\"text\":\"streaming-interruption-è¯¦ç»†è§£è¯»\",\"link\":\"/module-3/streaming-interruption-è¯¦ç»†è§£è¯».md\"},{\"text\":\"time-travel-è¯¦ç»†è§£è¯»\",\"link\":\"/module-3/time-travel-è¯¦ç»†è§£è¯».md\"}]},{\"text\":\"ç¬¬ 4 ç« \",\"collapsed\":false,\"items\":[{\"text\":\"4.1-parallelization-è¯¦ç»†è§£è¯»\",\"link\":\"/module-4/4.1-parallelization-è¯¦ç»†è§£è¯».md\"},{\"text\":\"4.2-sub-graph-è¯¦ç»†è§£è¯»\",\"link\":\"/module-4/4.2-sub-graph-è¯¦ç»†è§£è¯».md\"},{\"text\":\"4.3-map-reduce-è¯¦ç»†è§£è¯»\",\"link\":\"/module-4/4.3-map-reduce-è¯¦ç»†è§£è¯».md\"},{\"text\":\"4.4-research-assistant-è¯¦ç»†è§£è¯»\",\"link\":\"/module-4/4.4-research-assistant-è¯¦ç»†è§£è¯».md\"}]}],\"outline\":{\"level\":[2,3],\"label\":\"ç›®å½•\"},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/brycewang-stanford/langgraph-lightning\"}],\"footer\":{\"message\":\"åŸºäº MIT è®¸å¯è¯å‘å¸ƒ\",\"copyright\":\"Copyright Â© 2024-present Bryce Wang\"},\"search\":{\"provider\":\"local\",\"options\":{\"locales\":{\"root\":{\"translations\":{\"button\":{\"buttonText\":\"æœç´¢æ–‡æ¡£\",\"buttonAriaLabel\":\"æœç´¢æ–‡æ¡£\"},\"modal\":{\"noResultsText\":\"æ— æ³•æ‰¾åˆ°ç›¸å…³ç»“æœ\",\"resetButtonTitle\":\"æ¸…é™¤æŸ¥è¯¢æ¡ä»¶\",\"footer\":{\"selectText\":\"é€‰æ‹©\",\"navigateText\":\"åˆ‡æ¢\"}}}}}}},\"docFooter\":{\"prev\":\"ä¸Šä¸€é¡µ\",\"next\":\"ä¸‹ä¸€é¡µ\"},\"lastUpdated\":{\"text\":\"æœ€åæ›´æ–°äº\",\"formatOptions\":{\"dateStyle\":\"short\",\"timeStyle\":\"short\"}},\"editLink\":{\"pattern\":\"https://github.com/brycewang-stanford/langgraph-lightning/edit/main/:path\",\"text\":\"åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ\"}},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>